<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="介绍智能体经典范式构建，涵盖智能体架构、策略设计与优化机制，以及智能体在实际应用中的案例。">
<title>Agent 04-智能体经典范式构建</title>

<link rel='canonical' href='https://impself.github.io/p/agent-04-agent-classic-paradigm/'>

<link rel="stylesheet" href="/scss/style.min.94a091a235bf4cfab80ae319933a593529e2ee31ace7858746e3b3fad30e61b7.css"><meta property='og:title' content="Agent 04-智能体经典范式构建">
<meta property='og:description' content="介绍智能体经典范式构建，涵盖智能体架构、策略设计与优化机制，以及智能体在实际应用中的案例。">
<meta property='og:url' content='https://impself.github.io/p/agent-04-agent-classic-paradigm/'>
<meta property='og:site_name' content='impself小破站'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Agent' /><meta property='article:tag' content='AI' /><meta property='article:published_time' content='2026-02-18T13:24:09&#43;08:00'/><meta property='article:modified_time' content='2026-02-18T13:24:09&#43;08:00'/>
<meta name="twitter:title" content="Agent 04-智能体经典范式构建">
<meta name="twitter:description" content="介绍智能体经典范式构建，涵盖智能体架构、策略设计与优化机制，以及智能体在实际应用中的案例。">
    <link rel="shortcut icon" href="/img/you2.jpg" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&family=Noto+Sans+SC:wght@400;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/scss/custom.min.28be12c7a518ab917c7da96011bc7634f0fde160cef656e54132a7353e9a9373.css" integrity="sha256-KL4Sx6UYq5F8falgEbx2NPD94WDO9lblQTKnNT6ak3M=">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/you2_hu_638602a613500777.jpg" width="300"
                            height="299" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">impself小破站</a></h1>
            <h2 class="site-description">XDUer，擅长面向搜索引擎编程，AI编程，golang初学者，agent小白</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/impself'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://google.com'
                        target="_blank"
                        title="Google"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-google"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://space.bilibili.com/1262668861'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://v.douyin.com/TfK7Cbs7r-8/'
                        target="_blank"
                        title="Douyin"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-tiktok"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 7.917v4.034a9.948 9.948 0 0 1 -5 -1.951v4.5a6.5 6.5 0 1 1 -8 -6.326v4.326a2.5 2.5 0 1 0 4 2v-11.5h4.083a6.005 6.005 0 0 0 4.917 4.917" /></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#引言">引言</a></li>
    <li><a href="#核心知识点概览">核心知识点概览</a>
      <ol>
        <li><a href="#1-react思考-行动的动态循环">1. ReAct：思考-行动的动态循环</a></li>
        <li><a href="#2-plan-and-solve先规划后执行">2. Plan-and-Solve：先规划，后执行</a></li>
        <li><a href="#3-reflection执行-反思-优化">3. Reflection：执行-反思-优化</a></li>
      </ol>
    </li>
    <li><a href="#三种范式的对比分析">三种范式的对比分析</a></li>
    <li><a href="#架构组合示例">架构组合示例</a></li>
    <li><a href="#小结与展望">小结与展望</a></li>
    <li><a href="#思考与练习">思考与练习</a>
      <ol>
        <li><a href="#练习一范式理解与选择">练习一：范式理解与选择</a></li>
        <li><a href="#练习二输出解析的鲁棒性">练习二：输出解析的鲁棒性</a></li>
        <li><a href="#练习三工具调用与扩展">练习三：工具调用与扩展</a></li>
        <li><a href="#练习四动态规划机制">练习四：动态规划机制</a></li>
        <li><a href="#练习五reflection-机制深入">练习五：Reflection 机制深入</a></li>
        <li><a href="#练习六提示词工程">练习六：提示词工程</a></li>
        <li><a href="#练习七综合实战">练习七：综合实战</a></li>
      </ol>
    </li>
    <li><a href="#结语">结语</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            
            
            
            <a href="/categories/agent-dev/" style="background-color: #2a9d8f; color: #fff;">
                Agent开发
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/agent-04-agent-classic-paradigm/">Agent 04-智能体经典范式构建</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            介绍智能体经典范式构建，涵盖智能体架构、策略设计与优化机制，以及智能体在实际应用中的案例。
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published" datetime='2026-02-18T13:24:09&#43;08:00'>Feb 18, 2026</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 4 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="引言">引言
</h2><p>在前三章的学习中，我们已经掌握了关于大语言模型的基础知识。本章将进入实践环节，通过&quot;亲手造轮子&quot;的方式，从零开始编码实现<strong>三种业界经典的智能体构建范式</strong>：</p>
<ul>
<li><strong>ReAct</strong> — 推理与行动结合</li>
<li><strong>Plan-and-Solve</strong> — 规划与执行分离</li>
<li><strong>Reflection</strong> — 自我反思与迭代优化</li>
</ul>
<p>我们将深入探索它们的核心工作原理，并通过具体的实战案例，分析各自的优势、局限与适用场景。</p>
<h2 id="核心知识点概览">核心知识点概览
</h2><h3 id="1-react思考-行动的动态循环">1. ReAct：思考-行动的动态循环
</h3><p>ReAct 范式构建了一个能与外部世界交互的智能体。其核心机制是 <strong>&ldquo;思考(Thought) → 行动(Action) → 观察(Observation)&rdquo;</strong> 的动态循环。</p>
<p><img src="/p/agent-04-agent-classic-paradigm/react-loop.png"
	width="1401"
	height="435"
	srcset="/p/agent-04-agent-classic-paradigm/react-loop_hu_c02fe59af2b89539.png 480w, /p/agent-04-agent-classic-paradigm/react-loop_hu_b3dc8db617f7a9bc.png 1024w"
	loading="lazy"
	
		alt="ReAct 循环"
	
	
		class="gallery-image" 
		data-flex-grow="322"
		data-flex-basis="772px"
	
></p>
<p><strong>核心优势：</strong></p>
<ul>
<li>环境适应性强，能够利用外部工具</li>
<li>具备动态纠错能力</li>
<li>适合处理探索性、需要实时信息的任务</li>
</ul>
<p><strong>典型应用场景：</strong></p>
<ul>
<li>需要搜索引擎辅助的问答</li>
<li>实时数据查询</li>
<li>API 调用与交互式任务</li>
</ul>
<hr>
<h3 id="2-plan-and-solve先规划后执行">2. Plan-and-Solve：先规划，后执行
</h3><p>Plan-and-Solve 范式将复杂问题分解为清晰的步骤，然后逐一执行。</p>
<p><strong>执行流程：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">输入问题 → 规划阶段（生成步骤列表） → 执行阶段（逐步完成）
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>核心优势：</strong></p>
<ul>
<li>结构性强，逻辑清晰</li>
<li>稳定性高，推理路径确定</li>
<li>适合逻辑路径固定、内部推理密集的任务</li>
</ul>
<p><strong>典型应用场景：</strong></p>
<ul>
<li>多步数学推理</li>
<li>复杂问题分解</li>
<li>流程化任务处理</li>
</ul>
<hr>
<h3 id="3-reflection执行-反思-优化">3. Reflection：执行-反思-优化
</h3><p>Reflection 范式引入了自我优化能力，通过 <strong>&ldquo;执行 → 反思 → 优化&rdquo;</strong> 的迭代循环提升解决方案质量。</p>
<p><strong>迭代流程：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">初始方案 → 执行与评估 → 反思反馈 → 优化改进 → (循环) → 最终方案
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>核心价值：</strong></p>
<ul>
<li>显著提升输出质量</li>
<li>自动发现并修正错误</li>
<li>适用于对准确性和可靠性要求极高的场景</li>
</ul>
<p><strong>典型应用场景：</strong></p>
<ul>
<li>代码生成与优化</li>
<li>学术写作辅助</li>
<li>决策支持系统</li>
</ul>
<hr>
<h2 id="三种范式的对比分析">三种范式的对比分析
</h2><p>本章探讨的三种范式，代表了智能体解决问题的三种不同策略，如下表所示：</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: center">范式</th>
          <th style="text-align: left">思考模式</th>
          <th style="text-align: left">核心优势</th>
          <th style="text-align: left">适用场景</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><strong>ReAct</strong></td>
          <td style="text-align: left">思考-行动一体，动态循环</td>
          <td style="text-align: left">环境适应、动态纠错</td>
          <td style="text-align: left">探索性任务、工具调用</td>
      </tr>
      <tr>
          <td style="text-align: center"><strong>Plan-and-Solve</strong></td>
          <td style="text-align: left">先规划，后执行</td>
          <td style="text-align: left">结构稳定、逻辑清晰</td>
          <td style="text-align: left">多步推理、流程化任务</td>
      </tr>
      <tr>
          <td style="text-align: center"><strong>Reflection</strong></td>
          <td style="text-align: left">执行-反思-优化迭代</td>
          <td style="text-align: left">质量提升、自我修正</td>
          <td style="text-align: left">高精度要求、复杂输出</td>
      </tr>
  </tbody>
</table></div>
<blockquote>
<p>💡 <strong>选择建议</strong>：在实际应用中，选择哪种范式取决于任务的核心需求。某些复杂场景下，也可以将多种范式组合使用。</p>
</blockquote>
<hr>
<h2 id="架构组合示例">架构组合示例
</h2><p>当面临复杂任务时，可以考虑 <strong>混合范式架构</strong>：</p>
<ol>
<li><strong>Plan-and-Solve</strong> 进行高层次任务规划</li>
<li><strong>ReAct</strong> 在执行过程中处理具体的操作和环境交互</li>
<li><strong>Reflection</strong> 对整个过程进行自我优化和改进</li>
</ol>
<p><strong>适用场景：</strong> 智能客服系统、自动驾驶、复杂工作流自动化等。</p>
<hr>
<h2 id="小结与展望">小结与展望
</h2><p>至此，我们已经掌握了构建单个智能体的核心技术体系：</p>
<ul>
<li>✅ 理解了 ReAct 的动态交互机制</li>
<li>✅ 掌握了 Plan-and-Solve 的结构化规划方法</li>
<li>✅ 学会了 Reflection 的自我优化技巧</li>
</ul>
<p><strong>下一站预告：</strong> 为了更好地将理论付诸实践，下一章我们将探索不同<strong>低代码平台</strong>的使用方式，以及<strong>轻代码构建 Agent</strong>的实战方案。</p>
<hr>
<h2 id="思考与练习">思考与练习
</h2><blockquote>
<p>⚠️ <strong>提示</strong>：部分习题没有标准答案，重点在于培养对智能体范式设计的综合理解和实践能力。</p>
</blockquote>
<h3 id="练习一范式理解与选择">练习一：范式理解与选择
</h3><p><strong>问题 1.1</strong>：ReAct、Plan-and-Solve 和 Reflection 这三种范式在&quot;思考&quot;与&quot;行动&quot;的组织方式上有什么本质区别？</p>
<details>
<summary>点击查看参考答案</summary>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">范式</th>
          <th style="text-align: left">组织方式</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>ReAct</strong></td>
          <td style="text-align: left">思考-行动一体，动态循环；思考指导行动，行动结果反哺思考</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Plan-and-Solve</strong></td>
          <td style="text-align: left">先规划，后执行；分阶段处理，一次规划多步执行</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Reflection</strong></td>
          <td style="text-align: left">执行-反思-优化；通过迭代循环持续提升质量</td>
      </tr>
  </tbody>
</table></div>
</details>
<hr>
<p><strong>问题 1.2</strong>：如果要设计一个&quot;智能家居控制助手&quot;（需要控制灯光、空调、窗帘等多个设备，并根据用户习惯自动调节），你会选择哪种范式作为基础架构？为什么？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>推荐选择：ReAct</strong></p>
<p><strong>理由：</strong></p>
<ul>
<li>智能家居控制需要实时响应用户指令和环境变化</li>
<li>ReAct 的动态循环能够更好地适应这种需求</li>
<li>其环境适应性和动态纠错能力非常适合处理各种突发情况</li>
</ul>
</details>
<hr>
<p><strong>问题 1.3</strong>：是否可以将这三种范式进行组合使用？请设计一个混合范式的智能体架构。</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>混合架构设计：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">输入任务
</span></span><span class="line"><span class="cl">    ↓
</span></span><span class="line"><span class="cl">[Plan-and-Solve] 高层次任务规划
</span></span><span class="line"><span class="cl">    ↓
</span></span><span class="line"><span class="cl">[ReAct] 动态执行与环境交互（每一步骤）
</span></span><span class="line"><span class="cl">    ↓
</span></span><span class="line"><span class="cl">[Reflection] 全过程自我优化与改进
</span></span><span class="line"><span class="cl">    ↓
</span></span><span class="line"><span class="cl">输出结果
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>适用场景：</strong> 智能客服系统、自动驾驶、复杂项目管理等需要同时具备规划能力、实时交互和持续优化的场景。</p>
</details>
<hr>
<h3 id="练习二输出解析的鲁棒性">练习二：输出解析的鲁棒性
</h3><p><strong>问题 2.1</strong>：在 ReAct 实现中，我们使用正则表达式解析大语言模型的输出。当前的解析方法存在哪些潜在脆弱性？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>潜在问题：</strong></p>
<ul>
<li>格式依赖性强：如果模型输出格式变化（如标签被替换或省略），解析会失败</li>
<li>额外文本干扰：输出中包含额外文本时可能导致匹配错误</li>
<li>边界情况处理：特殊字符、多行输出等边界情况容易引发问题</li>
</ul>
</details>
<hr>
<p><strong>问题 2.2</strong>：除了正则表达式，还有哪些更鲁棒的输出解析方案？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>改进方案：</strong></p>
<ol>
<li><strong>结构化输出</strong>：使用 JSON、XML 等格式规范模型输出</li>
<li><strong>自然语言理解</strong>：使用 NLU 技术识别意图和实体</li>
<li><strong>专用解析器</strong>：针对特定格式设计专用解析逻辑</li>
<li><strong>模型约束</strong>：使用支持结构化输出的模型（如 Function Calling）</li>
</ol>
</details>
<hr>
<h3 id="练习三工具调用与扩展">练习三：工具调用与扩展
</h3><p><strong>问题 3.1</strong>：为 ReAct 智能体添加一个&quot;计算器&quot;工具，使其能够处理复杂的数学计算问题。</p>
<details>
<summary>点击查看代码示例</summary>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">calculator</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;安全地计算数学表达式&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">ast</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">operator</span> <span class="k">as</span> <span class="nn">op</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">operators</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ast</span><span class="o">.</span><span class="n">Add</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Sub</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">sub</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">ast</span><span class="o">.</span><span class="n">Mult</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Div</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">truediv</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">eval_node</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Num</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">n</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">left</span> <span class="o">=</span> <span class="n">eval_node</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">right</span> <span class="o">=</span> <span class="n">eval_node</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">operators</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">op</span><span class="p">)](</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;不支持的节点类型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">eval_node</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;eval&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="sa">f</span><span class="s2">&#34;计算错误: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 注册工具</span>
</span></span><span class="line"><span class="cl"><span class="n">tools</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&#34;calculator&#34;</span><span class="p">,</span> <span class="n">calculator</span><span class="p">,</span> <span class="s2">&#34;计算数学表达式，如 &#39;(123 + 456) * 789 / 12&#39;&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></details>
<hr>
<p><strong>问题 3.2</strong>：当可调用工具数量增加到 50-100 个时，如何优化工具的组织和检索机制？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>优化策略：</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">问题</th>
          <th style="text-align: left">解决方案</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">上下文占用大</td>
          <td style="text-align: left">分层组织，按需加载工具描述</td>
      </tr>
      <tr>
          <td style="text-align: left">相似工具干扰</td>
          <td style="text-align: left">工具聚类 + 语义检索</td>
      </tr>
      <tr>
          <td style="text-align: left">选择错误率高</td>
          <td style="text-align: left">约束执行 + 置信度过滤</td>
      </tr>
  </tbody>
</table></div>
<p><strong>工程实现：</strong></p>
<ol>
<li><strong>分层索引</strong>：建立工具分类目录（类目 → 子类 → 工具）</li>
<li><strong>语义检索</strong>：用向量相似度找到候选工具子集</li>
<li><strong>工具路由</strong>：训练轻量级路由模型，直接映射到目标工具</li>
<li><strong>缓存优化</strong>：缓存常用工具的调用结果</li>
</ol>
</details>
<hr>
<h3 id="练习四动态规划机制">练习四：动态规划机制
</h3><p><strong>问题 4.1</strong>：Plan-and-Solve 的计划是&quot;静态&quot;的，如何设计一个&quot;动态重规划&quot;机制？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>动态重规划机制设计：</strong></p>
<pre class="mermaid">
  graph TD
    A[执行步骤] --&gt; B{结果校验}
    B --&gt;|成功| C[继续下一步]
    B --&gt;|失败| D{重试次数 &lt; 阈值?}
    D --&gt;|是| E[局部重规划]
    D --&gt;|否| F[全局重规划]
    E --&gt; A
    F --&gt; A
</pre>

<p><strong>关键组件：</strong></p>
<ul>
<li>结果校验模块：判断是否满足成功标准</li>
<li>局部重规划：更换工具/调整参数/插入补充步骤</li>
<li>全局重规划：重新生成后续步骤</li>
<li>安全退出：设置重试和重规划次数上限</li>
</ul>
</details>
<hr>
<p><strong>问题 4.2</strong>：对比 Plan-and-Solve 与 ReAct，在处理&quot;预订商务旅行&quot;任务时哪种更合适？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>场景分析：</strong></p>
<p>| 范式 | 优势 | 劣势 |
|:&mdash;|:&mdash;|
| <strong>Plan-and-Solve</strong> | 适合处理有关联的多步骤预订 | 难以应对实时变化（如售罄、价格跳变） |
| <strong>ReAct</strong> | 能根据实时结果灵活调整 | 可能缺乏整体规划 |</p>
<p><strong>最佳方案：</strong> 组合使用</p>
<ul>
<li>用 Plan-and-Solve 做高层次规划（确定预订顺序和约束）</li>
<li>用 ReAct 处理每个子步骤的执行与纠错（如换日期、换机场）</li>
</ul>
</details>
<hr>
<p><strong>问题 4.3</strong>：设计一个&quot;分层规划&quot;系统及其优势。</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>分层规划架构：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">高层抽象计划 (3-8 个里程碑)
</span></span><span class="line"><span class="cl">    ├── 阶段 1
</span></span><span class="line"><span class="cl">    │   └── 细化子计划 (具体工具、参数、检查点)
</span></span><span class="line"><span class="cl">    ├── 阶段 2
</span></span><span class="line"><span class="cl">    │   └── 细化子计划
</span></span><span class="line"><span class="cl">    └── ...
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>核心优势：</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">优势</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>可扩展</strong></td>
          <td style="text-align: left">高层计划稳定，细节按需生成</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>更稳健</strong></td>
          <td style="text-align: left">局部失败只需重规划子计划</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>工具选择</strong></td>
          <td style="text-align: left">明确的意图收窄候选工具范围</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>可观测性</strong></td>
          <td style="text-align: left">高层里程碑便于审计和监控</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>可复用</strong></td>
          <td style="text-align: left">高层模板可跨任务复用</td>
      </tr>
  </tbody>
</table></div>
</details>
<hr>
<h3 id="练习五reflection-机制深入">练习五：Reflection 机制深入
</h3><p><strong>问题 5.1</strong>：使用两个不同的模型（一个更强大做反思，一个更快做执行）会带来什么影响？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>双模型架构分析：</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">收益</th>
          <th style="text-align: left">代价</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">用&quot;高推理能力&quot;提升正确性</td>
          <td style="text-align: left">增加系统复杂度</td>
      </tr>
      <tr>
          <td style="text-align: left">用&quot;高吞吐低成本&quot;承担重复劳动</td>
          <td style="text-align: left">需要模型对齐与调试</td>
      </tr>
      <tr>
          <td style="text-align: left">成本效益更优</td>
          <td style="text-align: left">增加调用链路延迟</td>
      </tr>
  </tbody>
</table></div>
<p><strong>结论：</strong> 对于工程化长期运行的系统（如自动代码代理），双模型架构通常比单模型更稳定、更经济。</p>
</details>
<hr>
<p><strong>问题 5.2</strong>：如何设计更智能的 Reflection 终止条件？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>改进的终止条件：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">should_terminate</span><span class="p">(</span><span class="n">iteration</span><span class="p">,</span> <span class="n">history</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 1. 质量评分阈值</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">latest_score</span> <span class="o">&gt;=</span> <span class="mf">0.95</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&#34;质量达标&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 2. 改进幅度检测</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">latest_score</span> <span class="o">-</span> <span class="n">previous_score</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.01</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&#34;改进饱和&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 3. 外部评估通过</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">all_tests_passed</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&#34;测试通过&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 4. 迭代次数上限</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">iteration</span> <span class="o">&gt;=</span> <span class="n">max_iterations</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&#34;达到最大迭代次数&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&#34;继续优化&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>多维度判断：</strong> 质量评分、改进幅度、外部测试、计算预算</p>
</details>
<hr>
<p><strong>问题 5.3</strong>：设计一个&quot;学术论文写作助手&quot;的多维度 Reflection 机制。</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>多维度评估体系：</strong></p>
<pre class="mermaid">
  graph TD
    A[论文初稿] --&gt; B[段落逻辑性评估]
    A --&gt; C[方法创新性评估]
    A --&gt; D[语言表达评估]
    A --&gt; E[引用规范评估]
    B --&gt; F[综合反馈报告]
    C --&gt; F
    D --&gt; F
    E --&gt; F
    F --&gt; G[针对性优化]
    G --&gt; H{终止条件满足?}
    H --&gt;|否| A
    H --&gt;|是| I[最终论文]
</pre>

<p><strong>评估维度：</strong></p>
<ol>
<li><strong>段落逻辑性</strong>：连贯性与结构合理性</li>
<li><strong>方法创新性</strong>：科学贡献与技术亮点</li>
<li><strong>语言表达</strong>：语法、用词、流畅度</li>
<li><strong>引用规范</strong>：格式正确性与引用完整性</li>
</ol>
</details>
<hr>
<h3 id="练习六提示词工程">练习六：提示词工程
</h3><p><strong>问题 6.1</strong>：ReAct 和 Plan-and-Solve 的提示词结构设计有何不同？</p>
<details>
<summary>点击查看参考答案</summary>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">范式</th>
          <th style="text-align: left">提示词设计重点</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>ReAct</strong></td>
          <td style="text-align: left">强调&quot;Thought-Action-Observation&quot;循环，明确三者角色定义</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Plan-and-Solve</strong></td>
          <td style="text-align: left">强调分阶段处理，明确规划阶段和执行阶段的边界</td>
      </tr>
  </tbody>
</table></div>
<p><strong>核心差异</strong>：提示词结构设计直接服务于各自范式的执行逻辑。</p>
</details>
<hr>
<p><strong>问题 6.2</strong>：角色设定对智能体行为的影响。</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>角色设定对比：</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">角色</th>
          <th style="text-align: left">输出倾向</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">&ldquo;严格的代码评审专家&rdquo;</td>
          <td style="text-align: left">关注正确性、性能、安全性</td>
      </tr>
      <tr>
          <td style="text-align: left">&ldquo;注重可读性的开源维护者&rdquo;</td>
          <td style="text-align: left">关注清晰度、注释、结构</td>
      </tr>
      <tr>
          <td style="text-align: left">&ldquo;注重效率的工程经理&rdquo;</td>
          <td style="text-align: left">关注开发速度、可维护性</td>
      </tr>
  </tbody>
</table></div>
<p><strong>结论：</strong> 角色设定是引导模型行为的重要手段，应根据目标场景精心设计。</p>
</details>
<hr>
<p><strong>问题 6.3</strong>：Few-shot 示例的效果分析。</p>
<details>
<summary>点击查看参考答案</summary>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">方案</th>
          <th style="text-align: left">优点</th>
          <th style="text-align: left">缺点</th>
          <th style="text-align: left">适用场景</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>无 Few-shot</strong></td>
          <td style="text-align: left">灵活、节省 token</td>
          <td style="text-align: left">格式不稳定</td>
          <td style="text-align: left">创意性任务</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>有 Few-shot</strong></td>
          <td style="text-align: left">稳定性高、格式遵循好</td>
          <td style="text-align: left">token 消耗大</td>
          <td style="text-align: left">结构化输出任务</td>
      </tr>
  </tbody>
</table></div>
<p><strong>建议：</strong> 对于需要结构化输出的智能体（如 Reflection、Planner），Few-shot 是<strong>必要而非可选</strong>的优化。</p>
</details>
<hr>
<h3 id="练习七综合实战">练习七：综合实战
</h3><p><strong>场景：</strong> 某电商公司希望搭建&quot;客服智能体&quot;，需要以下功能：</p>
<ul>
<li>理解用户的退款申请理由</li>
<li>查询用户的订单信息和物流状态</li>
<li>根据公司政策智能判断是否批准退款</li>
<li>生成得体的回复邮件并发送</li>
<li>争议情况下进行自我反思</li>
</ul>
<hr>
<p><strong>问题 7.1</strong>：选择何种范式作为核心架构？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>推荐架构：ReAct + Reflection</strong></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">组件</th>
          <th style="text-align: left">职责</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>ReAct</strong></td>
          <td style="text-align: left">动态调用工具查询订单、物流，做出初步判断</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Reflection</strong></td>
          <td style="text-align: left">对争议决策进行反思，提供更审慎的建议</td>
      </tr>
  </tbody>
</table></div>
</details>
<hr>
<p><strong>问题 7.2</strong>：系统需要哪些核心工具？</p>
<details>
<summary>点击查看参考答案</summary>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">工具</th>
          <th style="text-align: left">功能描述</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>订单查询工具</strong></td>
          <td style="text-align: left">根据用户信息查询订单详情和物流状态</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>政策判断工具</strong></td>
          <td style="text-align: left">根据退款政策评估申请是否符合条件</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>邮件生成工具</strong></td>
          <td style="text-align: left">生成得体回复并发送至用户邮箱</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>情感分析工具</strong></td>
          <td style="text-align: left">分析用户情绪，调整回复语气</td>
      </tr>
  </tbody>
</table></div>
</details>
<hr>
<p><strong>问题 7.3</strong>：如何设计提示词以平衡公司利益与用户体验？</p>
<details>
<summary>点击查看参考答案</summary>
<p><strong>提示词设计策略：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gh"># 角色设定
</span></span></span><span class="line"><span class="cl">你是一位专业且友好的客服代表，代表公司处理退款申请。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gh"># 决策原则
</span></span></span><span class="line"><span class="cl"><span class="k">1.</span> 严格遵守公司退款政策
</span></span><span class="line"><span class="cl"><span class="k">2.</span> 在保护公司利益的前提下，尽可能满足用户需求
</span></span><span class="line"><span class="cl"><span class="k">3.</span> 对用户表达理解和关心
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gh"># 回复要求
</span></span></span><span class="line"><span class="cl"><span class="k">-</span> 语气友好、专业
</span></span><span class="line"><span class="cl"><span class="k">-</span> 清晰说明决策理由
</span></span><span class="line"><span class="cl"><span class="k">-</span> 提供替代方案（如适用）
</span></span></code></pre></td></tr></table>
</div>
</div></details>
<hr>
<p><strong>问题 7.4</strong>：产品上线可能面临哪些风险？如何降低？</p>
<details>
<summary>点击查看参考答案</summary>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">风险类型</th>
          <th style="text-align: left">风险描述</th>
          <th style="text-align: left">缓解措施</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>错误决策</strong></td>
          <td style="text-align: left">误批/误拒退款申请</td>
          <td style="text-align: left">多模型评估 + 人工审核兜底</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>隐私泄露</strong></td>
          <td style="text-align: left">用户数据暴露</td>
          <td style="text-align: left">数据加密 + 访问控制 + 审计</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>体验下降</strong></td>
          <td style="text-align: left">回复不当导致用户不满</td>
          <td style="text-align: left">持续优化提示词 + 反馈机制</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>系统稳定性</strong></td>
          <td style="text-align: left">服务中断影响用户</td>
          <td style="text-align: left">冗余架构 + 监控告警 + 定期维护</td>
      </tr>
  </tbody>
</table></div>
</details>
<hr>
<h2 id="结语">结语
</h2><p>本章通过三种经典范式的实践，建立了构建智能体完整技术栈的认知。下一章，我们将走进<strong>低代码平台</strong>的世界，探索更高效的 Agent 构建方式。</p>
<p><strong>敬请期待！</strong></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/agent/">Agent</a>
        
            <a href="/tags/ai/">AI</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/agent-03-agent-language-basics/">
        
        

        <div class="article-details">
            <h2 class="article-title">Agent 03-大模型语言基础</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/agent-02-agent-develop/">
        
        

        <div class="article-details">
            <h2 class="article-title">Agent 02-智能体发展史</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/agent-01-initial-agent/">
        
        

        <div class="article-details">
            <h2 class="article-title">Agent 01-初识智能体</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2026 impself小破站
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.34.1">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >
    
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.12.2/+esm';
    mermaid.initialize({
        startOnLoad: true,
        theme: 'neutral',
    });
</script>


            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js" defer></script><script type="text/javascript" src="/ts/custom.5d820af14e5a5809f83a09b219bc3d8a7224a84b6bc755db35ce533b714cac35.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
