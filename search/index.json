[{"content":"","date":"2026-03-01T00:11:09+08:00","permalink":"https://impself.github.io/p/sql01-select-statement/","title":"SQL01-åŸºç¡€æŸ¥è¯¢"},{"content":"å¼•è¨€ åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œæ•°æ®é€šå¸¸è¢«åˆ†æ•£å­˜å‚¨åœ¨å¤šä¸ªè¡¨ä¸­ï¼Œä»¥éµå¾ªè§„èŒƒåŒ–è®¾è®¡åŸåˆ™ã€‚è¿æ¥ï¼ˆJOINï¼‰ æ˜¯ SQL ä¸­æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä»å¤šä¸ªè¡¨ä¸­ç»„åˆç›¸å…³æ•°æ®ã€‚\næœ¬æ–‡å°†ç³»ç»Ÿè®²è§£ SQL è¿æ¥çš„ 12 ç§ç”¨æ³•ï¼Œå¸®åŠ©ä½ ä»é›¶æŒæ¡è¡¨è¿æ¥çš„æ ¸å¿ƒæŠ€å·§ã€‚\nè¿æ¥ç±»å‹é€Ÿè§ˆ è¿æ¥ç±»å‹ å…³é”®å­— è¯´æ˜ å›¾ç¤º å†…è¿æ¥ INNER JOIN åªè¿”å›åŒ¹é…çš„è¡Œ A âˆ© B å·¦å¤–è¿æ¥ LEFT JOIN è¿”å›å·¦è¡¨å…¨éƒ¨ + åŒ¹é…çš„å³è¡¨ A å³å¤–è¿æ¥ RIGHT JOIN è¿”å›å³è¡¨å…¨éƒ¨ + åŒ¹é…çš„å·¦è¡¨ B äº¤å‰è¿æ¥ CROSS JOIN è¿”å›ç¬›å¡å°”ç§¯ A Ã— B è‡ªè¿æ¥ è¡¨åˆ«å è¡¨ä¸è‡ªèº«è¿æ¥ â€” ä¸€ã€å†…è¿æ¥ï¼ˆINNER JOINï¼‰ åŸºæœ¬æ¦‚å¿µ å†…è¿æ¥æ˜¯æœ€å¸¸ç”¨çš„è¿æ¥ç±»å‹ï¼Œåªè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œã€‚\ngraph LR A[è¡¨A] --- B[è¡¨B] C[å†…è¿æ¥ç»“æœ = äº¤é›†] è¯­æ³•ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 -- æŸ¥è¯¢è®¢å•æ˜ç»†åŠå¯¹åº”äº§å“ä¿¡æ¯ SELECT oi.order_id, oi.product_id, p.name AS product_name, oi.quantity, oi.unit_price FROM order_items oi INNER JOIN products p ON p.product_id = oi.product_id; æ‰§è¡Œé€»è¾‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ order_items â”‚ â”‚ products â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ order_id: 1 â”‚â”€â”€â”€â”€â” â”‚ product_id: 5 â”‚ â”‚ product_id: 5 â”‚ â”œâ”€â”€â”€â”€â”‚ name: \u0026#39; Laptop\u0026#39; â”‚ â”‚ quantity: 2 â”‚ â”‚ â”‚ price: 999.99 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ ç»“æœé›† â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ order_id: 1 â”‚ â”‚ product_name: \u0026#39;Laptop\u0026#39; â”‚ â”‚ quantity: 2 â”‚ â”‚ unit_price: 999.99 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ğŸ’¡ æ³¨æ„ï¼šå½“ product_id ä¸åŒ¹é…æ—¶ï¼Œè¯¥è¡Œä¸ä¼šå‡ºç°åœ¨ç»“æœä¸­ã€‚\näºŒã€è·¨æ•°æ®åº“è¿æ¥ ä½¿ç”¨åœºæ™¯ ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œæ•°æ®å¯èƒ½åˆ†æ•£åœ¨ä¸åŒæ•°æ®åº“ä¸­ã€‚SQL å…è®¸è·¨æ•°æ®åº“è¿æ¥è¡¨ã€‚\n1 2 3 4 5 -- è¿æ¥å½“å‰æ•°æ®åº“å’Œ sql_inventory æ•°æ®åº“ SELECT * FROM order_items oi JOIN sql_inventory.products p ON oi.product_id = p.product_id; è¯­æ³•æ ¼å¼ 1 2 3 database_name.table_name.column_name â”‚ â”‚ â”‚ æ•°æ®åº“å è¡¨å åˆ—å æœ€ä½³å®è·µ å»ºè®® è¯´æ˜ âœ… æ˜ç¡®æŒ‡å®šæ•°æ®åº“ é¿å…æ­§ä¹‰ï¼Œæé«˜å¯è¯»æ€§ âœ… ä½¿ç”¨åŒä¹‰è¯ ä¸ºè·¨åº“è¡¨åˆ›å»ºåˆ«åç®€åŒ–æŸ¥è¯¢ âš ï¸ æ³¨æ„æ€§èƒ½ è·¨åº“æŸ¥è¯¢å¯èƒ½è¾ƒæ…¢ ä¸‰ã€è‡ªè¿æ¥ï¼ˆSELF JOINï¼‰ åŸºæœ¬æ¦‚å¿µ è‡ªè¿æ¥æ˜¯æŒ‡è¡¨ä¸è‡ªèº«è¿›è¡Œè¿æ¥ï¼Œå¸¸ç”¨äºå¤„ç†å±‚æ¬¡ç»“æ„æ•°æ®ã€‚\n1 2 3 4 5 6 7 8 -- æŸ¥è¯¢å‘˜å·¥åŠå…¶ç»ç†ä¿¡æ¯ SELECT e.employee_id, e.first_name AS employee, m.first_name AS manager FROM employees e LEFT JOIN employees m ON e.reports_to = m.employee_id; åº”ç”¨åœºæ™¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ employees è¡¨ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ ID â”‚ name â”‚ reports_to â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ 1 â”‚ Alice â”‚ NULL â”‚ â† CEOâ”‚ â”‚ 2 â”‚ Bob â”‚ 1 â”‚ â”‚ â”‚ 3 â”‚ Carol â”‚ 1 â”‚ â”‚ â”‚ 4 â”‚ Dave â”‚ 2 â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â†“ â”‚ è‡ªè¿æ¥æŸ¥è¯¢ç»“æœï¼š â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ ID â”‚ employee â”‚ manager â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ 1 â”‚ Alice â”‚ NULL â”‚ â”‚ â”‚ 2 â”‚ Bob â”‚ Alice â”‚ â”‚ â”‚ 3 â”‚ Carol â”‚ Alice â”‚ â”‚ â”‚ 4 â”‚ Dave â”‚ Bob â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å¸¸è§ç”¨ä¾‹ åœºæ™¯ ç¤ºä¾‹ ç»„ç»‡æ¶æ„ å‘˜å·¥ â†’ ç»ç† åˆ†ç±»å±‚çº§ å­åˆ†ç±» â†’ çˆ¶åˆ†ç±» åœ°åŒºæ•°æ® åŸå¸‚ â†’ çœä»½ â†’ å›½å®¶ è¯„è®ºç³»ç»Ÿ è¯„è®º â†’ çˆ¶è¯„è®º å››ã€å¤šè¡¨è¿æ¥ è¯­æ³•ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 -- æŸ¥è¯¢æ”¯ä»˜è¯¦æƒ…ï¼ˆå®¢æˆ· + æ”¯ä»˜æ–¹å¼ï¼‰ SELECT p.date, p.invoice_id, c.name AS client, c.phone, pm.name AS payment_method FROM payments p JOIN clients c ON p.client_id = c.client_id JOIN payment_methods pm ON p.payment_method = pm.payment_method_id; è¿æ¥é¡ºåº graph TD A[payments ä¸»è¡¨] --\u0026gt; B[clients å®¢æˆ·è¡¨] A --\u0026gt; C[payment_methods æ”¯ä»˜æ–¹å¼è¡¨] B --\u0026gt; D[ç»“æœé›†] C --\u0026gt; D æ€§èƒ½å»ºè®® âš ï¸ æ³¨æ„ï¼šè¿æ¥çš„è¡¨è¶Šå¤šï¼ŒæŸ¥è¯¢æ€§èƒ½å½±å“è¶Šå¤§ã€‚å»ºè®®ï¼š\né™åˆ¶è¿æ¥æ•°é‡ï¼ˆé€šå¸¸ä¸è¶…è¿‡ 5 ä¸ªè¡¨ï¼‰ ç¡®ä¿è¿æ¥å­—æ®µæœ‰ç´¢å¼• å°†å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨ äº”ã€å¤åˆè¿æ¥ åŸºæœ¬æ¦‚å¿µ å¤åˆè¿æ¥ä½¿ç”¨å¤šä¸ªåˆ—ä½œä¸ºè¿æ¥æ¡ä»¶ï¼Œå¸¸è§äºå¤åˆä¸»é”®çš„åœºæ™¯ã€‚\n1 2 3 4 5 6 -- è®¢å•é¡¹å’Œè®¢å•é¡¹å¤‡æ³¨é€šè¿‡è®¢å•IDå’Œäº§å“IDè¿æ¥ SELECT * FROM order_items oi JOIN order_item_notes oin ON oi.order_id = oin.order_id AND oi.product_id = oin.product_id; åœºæ™¯è¯´æ˜ 1 2 3 4 5 6 7 8 9 10 11 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ order_items â”‚ â”‚ order_item_notes â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ order_id â”‚ product_id â”‚ â”‚ order_id â”‚ product_id â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ 1 â”‚ 5 â”‚â”€â”€â”€â”€â”€â–ºâ”‚ 1 â”‚ 5 â”‚ â”‚ 1 â”‚ 8 â”‚ â”‚ 1 â”‚ 8 â”‚ â”‚ 2 â”‚ 5 â”‚ â”‚ 2 â”‚ 5 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å¤åˆä¸»é”® å¤åˆä¸»é”® (order_id, product_id) (order_id, product_id) å…­ã€éšå¼è¿æ¥ vs æ˜¾å¼è¿æ¥ éšå¼è¿æ¥ï¼ˆä¼ ç»Ÿè¯­æ³•ï¼‰ 1 2 3 SELECT * FROM customers c, orders o WHERE c.customer_id = o.customer_id; æ˜¾å¼è¿æ¥ï¼ˆæ¨èï¼‰ 1 2 3 4 SELECT * FROM customers c INNER JOIN orders o ON c.customer_id = o.customer_id; å¯¹æ¯”åˆ†æ ç‰¹æ€§ éšå¼è¿æ¥ æ˜¾å¼è¿æ¥ å¯è¯»æ€§ â­â­ â­â­â­â­â­ è¿æ¥æ¡ä»¶åˆ†ç¦» âŒ å®¹æ˜“ä¸è¿‡æ»¤æ¡ä»¶æ··æ·† âœ… ON å­å¥æ˜ç¡® å¤–è¿æ¥æ”¯æŒ âŒ ä¸æ”¯æŒ âœ… å®Œæ•´æ”¯æŒ æ ‡å‡† SQL âš ï¸ æ—§è¯­æ³• âœ… ANSI æ ‡å‡† ğŸ’¡ æœ€ä½³å®è·µï¼šå§‹ç»ˆä½¿ç”¨æ˜¾å¼è¿æ¥è¯­æ³•ï¼ˆINNER JOIN/LEFT JOINï¼‰\nä¸ƒã€å¤–è¿æ¥ï¼ˆOUTER JOINï¼‰ ç±»å‹å¯¹æ¯” graph LR subgraph å·¦è¡¨ A A1[1] A2[2] A3[3] end subgraph å³è¡¨ B B1[2] B2[4] end è¿æ¥ç±»å‹ ç»“æœ è¯´æ˜ INNER JOIN {2} åªä¿ç•™åŒ¹é… LEFT JOIN {1,2,3} ä¿ç•™å·¦è¡¨å…¨éƒ¨ RIGHT JOIN {2,4} ä¿ç•™å³è¡¨å…¨éƒ¨ FULL JOIN {1,2,3,4} ä¿ç•™å…¨éƒ¨ï¼ˆMySQL ä¸æ”¯æŒï¼‰ å·¦å¤–è¿æ¥ç¤ºä¾‹ 1 2 3 4 5 6 7 8 -- æŸ¥è¯¢æ‰€æœ‰äº§å“åŠå…¶è®¢å•æ•°é‡ï¼ˆåŒ…æ‹¬æ— è®¢å•çš„äº§å“ï¼‰ SELECT p.product_id, p.name, oi.quantity FROM products p LEFT JOIN order_items oi ON p.product_id = oi.product_id; ç»“æœç‰¹å¾ï¼š æ— è®¢å•çš„äº§å“ï¼Œquantity æ˜¾ç¤ºä¸º NULL\nå…«ã€å¤šè¡¨å¤–è¿æ¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 -- æŸ¥è¯¢è®¢å•å®Œæ•´ä¿¡æ¯ï¼ˆå®¢æˆ· + è¿è¾“å•† + çŠ¶æ€ï¼‰ SELECT o.order_date, o.order_id, c.first_name AS customer, s.name AS shipper, os.name AS status FROM orders o LEFT JOIN shippers s ON o.shipper_id = s.shipper_id LEFT JOIN order_statuses os ON o.status = os.order_status_id LEFT JOIN customers c ON o.customer_id = c.customer_id ORDER BY os.name; è¿æ¥ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ orders â”‚ â† ä¸»è¡¨ â”‚ (æ‰€æœ‰è®¢å•éƒ½ä¼šä¿ç•™) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â–¼ â–¼ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚shippers â”‚ â”‚statuses â”‚ â”‚customersâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ä¹ã€è‡ªå¤–è¿æ¥ 1 2 3 4 5 6 7 8 -- æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥åŠç»ç†ï¼ˆåŒ…æ‹¬æ²¡æœ‰ç»ç†çš„CEOï¼‰ SELECT e.employee_id, e.first_name, m.first_name AS manager FROM employees e LEFT JOIN employees m ON e.reports_to = m.employee_id; ç»“æœç‰¹ç‚¹ï¼š CEO çš„ manager å­—æ®µä¸º NULL\nåã€USING å­å¥ ç®€åŒ–è¿æ¥æ¡ä»¶ å½“ä¸¤ä¸ªè¡¨çš„åˆ—åç›¸åŒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ USING ç®€åŒ–è¯­æ³•ã€‚\n1 2 3 4 5 6 7 8 9 10 11 -- ä¼ ç»Ÿå†™æ³• SELECT * FROM payments p JOIN clients c ON p.client_id = c.client_id; -- USING å†™æ³•ï¼ˆæ›´ç®€æ´ï¼‰ SELECT * FROM payments p JOIN clients c USING(client_id); å¤šåˆ—ä½¿ç”¨ 1 2 3 4 5 -- å¤åˆè¿æ¥çš„ USING å†™æ³• SELECT * FROM order_items oi JOIN order_item_notes oin USING(order_id, product_id); è¯­æ³•å¯¹æ¯” å†™æ³• é€‚ç”¨åœºæ™¯ ON t1.id = t2.id åˆ—åä¸åŒ USING(id) åˆ—åç›¸åŒ NATURAL JOIN æ‰€æœ‰åŒååˆ—ï¼ˆä¸æ¨èï¼‰ âš ï¸ æ³¨æ„ï¼šUSING åçš„åˆ—ååœ¨ç»“æœé›†ä¸­åªå‡ºç°ä¸€æ¬¡\nåä¸€ã€äº¤å‰è¿æ¥ï¼ˆCROSS JOINï¼‰ åŸºæœ¬æ¦‚å¿µ äº¤å‰è¿æ¥è¿”å›ç¬›å¡å°”ç§¯â€”â€”ä¸¤ä¸ªè¡¨æ¯ä¸€è¡Œçš„æ‰€æœ‰å¯èƒ½ç»„åˆã€‚\n1 2 3 4 5 6 -- ä¸¤ç§å†™æ³•ç­‰ä»· SELECT * FROM shippers s, products p; SELECT * FROM shippers s CROSS JOIN products p; ç»“æœç¤ºä¾‹ 1 2 3 4 shippers è¡¨æœ‰ 3 è¡Œ products è¡¨æœ‰ 10 è¡Œ ç»“æœé›†ï¼š3 Ã— 10 = 30 è¡Œ å®é™…åº”ç”¨åœºæ™¯ åœºæ™¯ è¯´æ˜ ç”Ÿæˆæ‰€æœ‰ç»„åˆ äº§å“ Ã— é¢œè‰² Ã— å°ºå¯¸ æµ‹è¯•æ•°æ®ç”Ÿæˆ å¿«é€Ÿæ„é€ æµ‹è¯•é›† æ—¥å†ç”Ÿæˆ æ—¥æœŸ Ã— æ—¶é—´æ®µ âš ï¸ è­¦å‘Šï¼šäº¤å‰è¿æ¥å¯èƒ½äº§ç”Ÿæµ·é‡æ•°æ®ï¼Œä½¿ç”¨å‰åŠ¡å¿…è¯„ä¼°æ•°æ®é‡ï¼\nåäºŒã€è”åˆï¼ˆUNIONï¼‰ åŸºæœ¬æ¦‚å¿µ UNION å°†å¤šä¸ª SELECT è¯­å¥çš„ç»“æœåˆå¹¶ä¸ºä¸€ä¸ªç»“æœé›†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 -- å®¢æˆ·åˆ†çº§æŸ¥è¯¢ SELECT customer_id, first_name, points, \u0026#39;Bronze\u0026#39; AS type FROM customers WHERE points \u0026lt; 2000 UNION SELECT customer_id, first_name, points, \u0026#39;Silver\u0026#39; AS type FROM customers WHERE points BETWEEN 2000 AND 3000 UNION SELECT customer_id, first_name, points, \u0026#39;Gold\u0026#39; AS type FROM customers WHERE points \u0026gt;= 3000 ORDER BY first_name; UNION vs UNION ALL ç‰¹æ€§ UNION UNION ALL å»é‡ âœ… è‡ªåŠ¨å»é‡ âŒ ä¿ç•™å…¨éƒ¨ æ€§èƒ½ è¾ƒæ…¢ï¼ˆéœ€è¦æ’åºå»é‡ï¼‰ è¾ƒå¿« ä½¿ç”¨åœºæ™¯ éœ€è¦å»é‡ ç¡®å®šæ— é‡å¤/éœ€ä¿ç•™ ä½¿ç”¨è§„åˆ™ 1 2 3 4 âœ“ å„ SELECT è¯­å¥çš„åˆ—æ•°å¿…é¡»ç›¸åŒ âœ“ å¯¹åº”åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹ âœ“ ç»“æœé›†çš„åˆ—åå–è‡ªç¬¬ä¸€ä¸ª SELECT âœ“ ORDER BY åº”æ”¾åœ¨æœ€åä¸€æ¡ SELECT ä¹‹å è¿æ¥æ€§èƒ½ä¼˜åŒ–æŒ‡å— 1. ç´¢å¼•ç­–ç•¥ 1 2 3 -- ä¸ºè¿æ¥æ¡ä»¶åˆ›å»ºç´¢å¼• CREATE INDEX idx_order_items_product ON order_items(product_id); CREATE INDEX idx_products_id ON products(product_id); 2. å°è¡¨é©±åŠ¨å¤§è¡¨ 1 2 3 -- æ¨èï¼šå°è¡¨åœ¨å‰ FROM small_table s JOIN large_table l ON s.id = l.small_id 3. é¿å…æ— æ•ˆè¿æ¥ 1 2 3 4 5 6 7 8 9 -- âŒ ä¸æ¨èï¼šåœ¨ WHERE ä¸­è¿‡æ»¤ FROM orders o JOIN customers c ON o.customer_id = c.customer_id WHERE c.active = 1 -- âœ… æ¨èï¼šåœ¨ JOIN å‰è¿‡æ»¤ FROM orders o JOIN (SELECT * FROM customers WHERE active = 1) c ON o.customer_id = c.customer_id 4. é€‰æ‹©æ€§åŸåˆ™ ä¼˜å…ˆçº§ è¿æ¥ç±»å‹ åŸå›  1 INNER JOIN ç»“æœé›†æœ€å° 2 LEFT/RIGHT JOIN å•ä¾§ä¿ç•™ 3 CROSS JOIN ç»“æœé›†æœ€å¤§ å¸¸è§é—®é¢˜æ’æŸ¥ é—®é¢˜ 1ï¼šè¿æ¥ç»“æœä¸ç¬¦åˆé¢„æœŸ 1 2 3 -- æ£€æŸ¥è¿æ¥æ¡ä»¶æ˜¯å¦æ­£ç¡® -- æ£€æŸ¥æ˜¯å¦æœ‰ NULL å€¼å½±å“è¿æ¥ SELECT COUNT(*) FROM table WHERE join_column IS NULL; é—®é¢˜ 2ï¼šæ€§èƒ½æ…¢ 1 2 3 4 5 -- ä½¿ç”¨ EXPLAIN åˆ†ææ‰§è¡Œè®¡åˆ’ EXPLAIN SELECT * FROM table1 JOIN table2 ON ...; -- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼• SHOW INDEX FROM table_name; é—®é¢˜ 3ï¼šåˆ—åå†²çª 1 2 3 4 5 6 7 8 -- ä½¿ç”¨è¡¨åˆ«åæˆ–å®Œæ•´åˆ—å SELECT o.order_id, c.order_id -- âŒ æ­§ä¹‰ FROM orders o JOIN customers c ON ... SELECT o.order_id, c.customer_id -- âœ… æ˜ç¡® FROM orders o JOIN customers c ON ... æ€»ç»“ è¿æ¥ç±»å‹å†³ç­–æ ‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 éœ€è¦ç»„åˆå¤šè¡¨æ•°æ®ï¼Ÿ â”‚ â”œâ”€ éœ€è¦æ‰€æœ‰åŒ¹é…è¡Œï¼Ÿ â”‚ â””â”€ ä½¿ç”¨ INNER JOIN â”‚ â”œâ”€ éœ€è¦ä¿ç•™æŸä¸ªè¡¨å…¨éƒ¨è¡Œï¼Ÿ â”‚ â”œâ”€ å·¦è¡¨ â†’ LEFT JOIN â”‚ â””â”€ å³è¡¨ â†’ RIGHT JOIN â”‚ â”œâ”€ è¡¨ä¸è‡ªèº«å…³è”ï¼Ÿ â”‚ â””â”€ ä½¿ç”¨ SELF JOINï¼ˆè¡¨åˆ«åï¼‰ â”‚ â”œâ”€ éœ€è¦æ‰€æœ‰ç»„åˆï¼Ÿ â”‚ â””â”€ ä½¿ç”¨ CROSS JOINï¼ˆè°¨æ…ï¼ï¼‰ â”‚ â””â”€ éœ€è¦åˆå¹¶ç»“æœé›†ï¼Ÿ â””â”€ ä½¿ç”¨ UNION / UNION ALL å¿«é€Ÿå‚è€ƒè¡¨ è¿æ¥ç±»å‹ å…³é”®å­— è¡Œä¸º å†…è¿æ¥ INNER JOIN åªè¿”å›åŒ¹é… å·¦è¿æ¥ LEFT JOIN å·¦è¡¨å…¨ + åŒ¹é…å³è¡¨ å³è¿æ¥ RIGHT JOIN å³è¡¨å…¨ + åŒ¹é…å·¦è¡¨ äº¤å‰è¿æ¥ CROSS JOIN ç¬›å¡å°”ç§¯ è‡ªè¿æ¥ è¡¨åˆ«å è¡¨è‡ªèº«è¿æ¥ è‡ªç„¶è¿æ¥ NATURAL JOIN è‡ªåŠ¨åŒ¹é…åŒååˆ— è”åˆ UNION åˆå¹¶ç»“æœé›† ä¸‹ä¸€æ­¥å­¦ä¹  SQL01-åŸºç¡€æŸ¥è¯¢ SQL03-èšåˆå‡½æ•° SQL04-å­æŸ¥è¯¢ ğŸ’¬ æœ‰ç–‘é—®ï¼Ÿ æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼Œæˆ–æäº¤ Issue åé¦ˆé—®é¢˜ã€‚\n","date":"2026-03-01T00:09:09+08:00","permalink":"https://impself.github.io/p/sql02-join/","title":"SQL02-è¿æ¥å…¨è§£ï¼šä»åŸºç¡€åˆ°å®æˆ˜"},{"content":"æ™ºèƒ½ä½“è®°å¿†ç³»ç»Ÿä¸RAGç³»ç»Ÿ - é—®é¢˜è¯¦è§£ ç›®å½• æƒ…æ™¯è®°å¿† vs è¯­ä¹‰è®°å¿†è¯„åˆ†æœºåˆ¶å¯¹æ¯” ä¸ªäººå¥åº·ç®¡ç†åŠ©æ‰‹çš„è®°å¿†è®¾è®¡ å·¥ä½œè®°å¿†æ•´åˆæœºåˆ¶è®¾è®¡ åŸºäºè¯­ä¹‰è¾¹ç•Œçš„åˆ†å—ç®—æ³• MQE vs HyDE æ£€ç´¢ç­–ç•¥å¯¹æ¯” åµŒå…¥æ–¹æ¡ˆé€‰å‹å¯¹æ¯” æ™ºèƒ½é—å¿˜ç­–ç•¥å®ç° è®°å¿†å½’æ¡£æœºåˆ¶è®¾è®¡ éšç§æ•°æ®å½»åº•æ¸…é™¤æ–¹æ¡ˆ RAG vs Memory æ™ºèƒ½è·¯ç”± æ™ºèƒ½å­¦ä¹ æŠ¥å‘Šç”Ÿæˆå™¨è®¾è®¡ å¤šç”¨æˆ·æ•°æ®éš”ç¦»æ–¹æ¡ˆ çŸ¥è¯†å›¾è°±è´¨é‡è¯„ä¼° å›¾æ£€ç´¢ vs å‘é‡æ£€ç´¢å¯¹æ¯” 1. æƒ…æ™¯è®°å¿† vs è¯­ä¹‰è®°å¿†è¯„åˆ†æœºåˆ¶å¯¹æ¯” è¯„åˆ†å…¬å¼å¯¹æ¯” æƒ…æ™¯è®°å¿†è¯„åˆ†å…¬å¼ï¼š\n1 score = 0.4 Ã— recency + 0.3 Ã— importance + 0.2 Ã— access + 0.1 Ã— embedding è¯­ä¹‰è®°å¿†è¯„åˆ†å…¬å¼ï¼š\n1 score = 0.3 Ã— graph_retrieval + 0.25 Ã— embedding + 0.25 Ã— access + 0.2 Ã— importance è®¾è®¡åŸå› åˆ†æ ç»´åº¦ æƒ…æ™¯è®°å¿† è¯­ä¹‰è®°å¿† è®¾è®¡åŸå›  æ—¶é—´æƒé‡ (recency) 0.4 0.0 æƒ…æ™¯è®°å¿†è®°å½•\u0026quot;æˆ‘åœ¨ä½•æ—¶ä½•åœ°åšäº†ä»€ä¹ˆ\u0026quot;ï¼Œæ–°é²œåº¦è‡³å…³é‡è¦ï¼›è¯­ä¹‰è®°å¿†æ˜¯æŒä¹…çŸ¥è¯†ï¼Œä¸æ—¶é—´æ— å…³ å›¾æ£€ç´¢æƒé‡ (graph_retrieval) 0.0 0.3 è¯­ä¹‰è®°å¿†åŸºäºçŸ¥è¯†å›¾è°±ï¼Œæ¦‚å¿µé—´çš„å…³ç³»æ¨ç†æ˜¯æ ¸å¿ƒä¼˜åŠ¿ åµŒå…¥æƒé‡ (embedding) 0.1 0.25 è¯­ä¹‰è®°å¿†æ›´æ³¨é‡è¯­ä¹‰ç›¸ä¼¼æ€§åŒ¹é… é‡è¦æ€§æƒé‡ (importance) 0.3 0.2 æƒ…æ™¯è®°å¿†ä¸­æŸäº›äº‹ä»¶å¯èƒ½ç‰¹åˆ«é‡è¦ï¼ˆå¦‚é‡Œç¨‹ç¢‘äº‹ä»¶ï¼‰ è®¿é—®æƒé‡ (access) 0.2 0.25 ä¸¤è€…éƒ½è€ƒè™‘è®¿é—®é¢‘ç‡ï¼Œä½†è¯­ä¹‰è®°å¿†æ›´é‡è§†çŸ¥è¯†çš„å¤ç”¨ æ ¸å¿ƒè®¾è®¡ç†å¿µ æƒ…æ™¯è®°å¿† = \u0026ldquo;æ—¶é—´çº¿ä¸Šçš„æ•…äº‹\u0026rdquo;\nå¼ºè°ƒæ—¶é—´è¿‘å› æ€§ï¼šæœ€è¿‘å‘ç”Ÿçš„äº‹æƒ…æ›´ç›¸å…³ ç±»æ¯”äººç±»çš„çŸ­æœŸäº‹ä»¶è®°å¿† é€‚ç”¨äºï¼š\u0026ldquo;æˆ‘æ˜¨å¤©çœ‹äº†ä»€ä¹ˆç”µå½±ï¼Ÿ\u0026ldquo;è¿™ç±»æŸ¥è¯¢ è¯­ä¹‰è®°å¿† = \u0026ldquo;çŸ¥è¯†ç½‘ç»œä¸­çš„æ¦‚å¿µ\u0026rdquo;\nå¼ºè°ƒå…³ç³»æ¨ç†ï¼šé€šè¿‡å›¾ç»“æ„å‘ç°å…³è” ç±»æ¯”äººç±»çš„çŸ¥è¯†ä½“ç³» é€‚ç”¨äºï¼š\u0026ldquo;ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Ÿ\u0026ldquo;è¿™ç±»æ¦‚å¿µæŸ¥è¯¢ 2. ä¸ªäººå¥åº·ç®¡ç†åŠ©æ‰‹çš„è®°å¿†è®¾è®¡ æ•´ä½“æ¶æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ ä¸ªäººå¥åº·ç®¡ç†åŠ©æ‰‹ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ å·¥ä½œè®°å¿† æƒ…æ™¯è®°å¿† è¯­ä¹‰è®°å¿† â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚å½“å‰å¯¹è¯â”‚ â”‚é¥®é£Ÿè®°å½• â”‚ â”‚è¥å…»çŸ¥è¯† â”‚ â”‚ â”‚ â”‚è¾“å…¥çŠ¶æ€ â”‚ â”‚è¿åŠ¨æ—¥å¿— â”‚ â”‚åŒ»å­¦æ¦‚å¿µ â”‚ â”‚ â”‚ â”‚æš‚å­˜æ•°æ® â”‚ â”‚ç¡çœ æ•°æ® â”‚ â”‚å¥åº·å›¾è°± â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â†“ â†“ â”‚ â”‚ TTL=5åˆ†é’Ÿ é‡è¦æ€§è¡°å‡ çŸ¥è¯†æ¨ç† â”‚ â”‚ â†‘ â”‚ â”‚ æ„ŸçŸ¥è®°å¿† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚è®¾å¤‡æ•°æ® â”‚ å®æ—¶åŒæ­¥ï¼šå¿ƒç‡ã€æ­¥æ•°ã€è¡€æ°§ã€ä½“æ¸© â”‚ â”‚ â”‚ç¯å¢ƒæ•°æ® â”‚ å®šæœŸé‡‡æ ·ï¼šå¤©æ°”ã€ç©ºæ°”è´¨é‡ã€å­£èŠ‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å…·ä½“åº”ç”¨åœºæ™¯ è®°å¿†ç±»å‹ åº”ç”¨åœºæ™¯ æ•°æ®ç¤ºä¾‹ æ£€ç´¢ç¤ºä¾‹ å·¥ä½œè®°å¿† å¯¹è¯çŠ¶æ€ç®¡ç† ç”¨æˆ·å½“å‰è¾“å…¥çš„é¥®é£Ÿå†…å®¹ \u0026ldquo;æˆ‘åˆšæ‰è¯´ä»Šå¤©æ—©é¤åƒäº†ä»€ä¹ˆï¼Ÿ\u0026rdquo; æƒ…æ™¯è®°å¿† å¥åº·è¡Œä¸ºè¿½è¸ª \u0026ldquo;2024-01-15æ—©é¤ï¼šç‡•éº¦ç‰›å¥¶\u0026rdquo; \u0026ldquo;ä¸Šå‘¨ä¸‰çš„è·‘æ­¥è®°å½•æ˜¯ä»€ä¹ˆï¼Ÿ\u0026rdquo; è¯­ä¹‰è®°å¿† å¥åº·çŸ¥è¯†æ¨ç† \u0026ldquo;ç¼ºä¹ç»´ç”Ÿç´ D â†’ éœ€è¦æ™’å¤ªé˜³\u0026rdquo; \u0026ldquo;ç´ é£Ÿè€…å®¹æ˜“ç¼ºä¹ä»€ä¹ˆè¥å…»ç´ ï¼Ÿ\u0026rdquo; æ„ŸçŸ¥è®°å¿† å®æ—¶æ•°æ®æµ æ‰‹ç¯å¿ƒç‡ï¼š85 bpm \u0026ldquo;æˆ‘å½“å‰å¿ƒç‡æ˜¯å¤šå°‘ï¼Ÿ\u0026rdquo; æ•°æ®æµå‘ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 ç”¨æˆ·è¯´ï¼š\u0026#34;æˆ‘ä»Šå¤©è·‘æ­¥äº†5å…¬é‡Œ\u0026#34; â†“ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ å·¥ä½œè®°å¿†ï¼ˆæš‚å­˜ï¼‰ â”‚ â† å­˜å‚¨åŸå§‹è¾“å…¥ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â†“ (5åˆ†é’ŸåæœªæåŠ) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ æ•´åˆåˆ°æƒ…æ™¯è®°å¿† â”‚ â† \u0026#34;2024-01-20 è·‘æ­¥5å…¬é‡Œï¼Œè€—æ—¶30åˆ†é’Ÿ\u0026#34; â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â†“ (ä¸å†å²æ•°æ®å…³è”) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ æ›´æ–°è¯­ä¹‰è®°å¿† â”‚ â† \u0026#34;ç”¨æˆ·æ¯å‘¨è¿åŠ¨3æ¬¡ï¼Œå±äºæ´»è·ƒç”¨æˆ·\u0026#34; â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 3. å·¥ä½œè®°å¿†æ•´åˆæœºåˆ¶è®¾è®¡ æ•´åˆå†³ç­–çŸ©é˜µ 1 2 3 4 5 6 7 8 9 10 11 12 13 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ å·¥ä½œè®°å¿† â†’ é•¿æœŸè®°å¿† æ•´åˆè§¦å‘æ¡ä»¶ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ è§¦å‘ä¿¡å· â”‚ æ•´åˆç›®æ ‡ â”‚ å»¶è¿Ÿ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€ â”‚ â”‚ ç”¨æˆ·æ˜ç¡®è¦æ±‚è®°ä½ â”‚ â†’ æƒ…æ™¯è®°å¿† â”‚ ç«‹å³ â”‚ â”‚ å¯¹è¯ä¸­åå¤æåŠ(â‰¥3æ¬¡) â”‚ â†’ è¯­ä¹‰è®°å¿† â”‚ ç¬¬3æ¬¡è§¦å‘ â”‚ â”‚ ä¸ç°æœ‰çŸ¥è¯†å…³è” â”‚ â†’ è¯­ä¹‰è®°å¿†(å…³è”) â”‚ åŒ¹é…æ—¶ â”‚ â”‚ æƒ…æ„Ÿæ ‡è®°(é‡è¦/ç´§æ€¥) â”‚ â†’ æƒ…æ™¯è®°å¿†(é«˜é‡è¦æ€§)â”‚ æ£€æµ‹æ—¶ â”‚ â”‚ æ—¶é—´çª—å£æŒç»­(\u0026gt;1å°æ—¶) â”‚ â†’ æ¨¡å¼è¯†åˆ« â”‚ åˆ°æœŸè§¦å‘ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ è‡ªåŠ¨æ•´åˆç®—æ³•å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 class MemoryConsolidation: \u0026#34;\u0026#34;\u0026#34;å·¥ä½œè®°å¿†æ•´åˆæœºåˆ¶\u0026#34;\u0026#34;\u0026#34; def should_consolidate(self, work_item, context): \u0026#34;\u0026#34;\u0026#34;åˆ¤æ–­å·¥ä½œè®°å¿†æ˜¯å¦éœ€è¦æ•´åˆ\u0026#34;\u0026#34;\u0026#34; score = 0 reasons = [] # 1. ç”¨æˆ·æ˜ç¡®æŒ‡ç¤º (æœ€é«˜ä¼˜å…ˆçº§) if work_item.get(\u0026#34;explicit_remember\u0026#34;): return {\u0026#34;action\u0026#34;: \u0026#34;immediate\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;episodic\u0026#34;} # 2. æåŠé¢‘ç‡æ£€æµ‹ mention_count = work_item.get(\u0026#34;mention_count\u0026#34;, 0) if mention_count \u0026gt;= 3: score += 0.4 reasons.append(\u0026#34;é¢‘ç¹æåŠ\u0026#34;) return {\u0026#34;action\u0026#34;: \u0026#34;consolidate\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;semantic\u0026#34;} # 3. çŸ¥è¯†å…³è”æ£€æµ‹ if self._has_related_knowledge(work_item, context): score += 0.3 reasons.append(\u0026#34;å­˜åœ¨å…³è”çŸ¥è¯†\u0026#34;) # 4. æƒ…æ„Ÿé‡è¦æ€§æ£€æµ‹ sentiment = work_item.get(\u0026#34;sentiment\u0026#34;) if sentiment in [\u0026#34;urgent\u0026#34;, \u0026#34;important\u0026#34;, \u0026#34;emotional\u0026#34;]: score += 0.5 reasons.append(\u0026#34;æƒ…æ„Ÿæ ‡è®°\u0026#34;) return {\u0026#34;action\u0026#34;: \u0026#34;immediate\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;episodic\u0026#34;} # 5. æ—¶é—´é˜ˆå€¼æ£€æµ‹ age_seconds = time.time() - work_item.get(\u0026#34;created_at\u0026#34;, time.time()) if age_seconds \u0026gt; 3600: # 1å°æ—¶ score += 0.2 reasons.append(\u0026#34;æ—¶é—´é˜ˆå€¼\u0026#34;) # ç»¼åˆåˆ¤æ–­ if score \u0026gt;= 0.5: return { \u0026#34;action\u0026#34;: \u0026#34;consolidate\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;semantic\u0026#34; if score \u0026gt; 0.6 else \u0026#34;episodic\u0026#34;, \u0026#34;reasons\u0026#34;: reasons } return {\u0026#34;action\u0026#34;: \u0026#34;keep\u0026#34;, \u0026#34;score\u0026#34;: score} def _has_related_knowledge(self, item, context): \u0026#34;\u0026#34;\u0026#34;æ£€æµ‹æ˜¯å¦ä¸ç°æœ‰çŸ¥è¯†å…³è”\u0026#34;\u0026#34;\u0026#34; # æ£€æŸ¥å®ä½“é‡å  item_entities = set(item.get(\u0026#34;entities\u0026#34;, [])) context_entities = set(context.get(\u0026#34;recent_entities\u0026#34;, [])) overlap = item_entities \u0026amp; context_entities return len(overlap) \u0026gt; 0 4. åŸºäºè¯­ä¹‰è¾¹ç•Œçš„åˆ†å—ç®—æ³• é—®é¢˜èƒŒæ™¯ å¯¹äºæ²¡æœ‰æ˜ç¡®æ ‡é¢˜ç»“æ„çš„æ–‡æ¡£ï¼ˆå¦‚å°è¯´ã€æ³•å¾‹æ¡æ–‡ï¼‰ï¼Œä¼ ç»Ÿçš„åŸºäºMarkdownæ ‡é¢˜çš„åˆ†å—ç­–ç•¥å¤±æ•ˆï¼Œéœ€è¦åŸºäºè¯­ä¹‰è¾¹ç•Œè¿›è¡Œæ™ºèƒ½åˆ†å—ã€‚\nè¯­ä¹‰è¾¹ç•Œæ£€æµ‹ç®—æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 import numpy as np from sentence_transformers import SentenceTransformer class SemanticChunker: \u0026#34;\u0026#34;\u0026#34;åŸºäºè¯­ä¹‰è¾¹ç•Œçš„æ™ºèƒ½åˆ†å—\u0026#34;\u0026#34;\u0026#34; def __init__(self, model_name=\u0026#34;paraphrase-multilingual-MiniLM\u0026#34;): self.encoder = SentenceTransformer(model_name) def chunk(self, text, max_chunk_size=1000, min_chunk_size=200): \u0026#34;\u0026#34;\u0026#34; ä¸»åˆ†å—æ–¹æ³• Args: text: è¾“å…¥æ–‡æœ¬ max_chunk_size: æœ€å¤§å—å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰ min_chunk_size: æœ€å°å—å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰ \u0026#34;\u0026#34;\u0026#34; # 1. æŒ‰å¥å­åˆ†å‰² sentences = self._split_sentences(text) # 2. è®¡ç®—å¥å­åµŒå…¥ embeddings = self.encoder.encode(sentences) # 3. æ£€æµ‹è¯­ä¹‰è¾¹ç•Œ boundaries = self._detect_boundaries(embeddings) # 4. åœ¨è¾¹ç•Œå¤„åˆ›å»ºchunks chunks = self._create_chunks( sentences, boundaries, max_chunk_size, min_chunk_size ) return chunks def _detect_boundaries(self, embeddings, window_size=3, threshold=0.5): \u0026#34;\u0026#34;\u0026#34; æ£€æµ‹è¯­ä¹‰è¾¹ç•Œ æ ¸å¿ƒæ€æƒ³ï¼šå¦‚æœç›¸é‚»ä¸¤ä¸ªçª—å£å†…çš„è¯­ä¹‰ç›¸ä¼¼åº¦éƒ½æ˜¾è‘—é«˜äºè·¨è¾¹ç•Œçš„ç›¸ä¼¼åº¦ï¼Œ åˆ™è®¤ä¸ºæ­¤å¤„å­˜åœ¨è¯­ä¹‰è¾¹ç•Œã€‚ \u0026#34;\u0026#34;\u0026#34; boundaries = [0] # ç¬¬ä¸€ä¸ªå¥å­æ€»æ˜¯è¾¹ç•Œ for i in range(window_size, len(embeddings) - window_size): # è®¡ç®—å‰çª—å£å†…çš„å¹³å‡ç›¸ä¼¼åº¦ before_window = embeddings[i-window_size:i] before_similarity = self._avg_similarity(before_window) # è®¡ç®—åçª—å£å†…çš„å¹³å‡ç›¸ä¼¼åº¦ after_window = embeddings[i:i+window_size] after_similarity = self._avg_similarity(after_window) # è®¡ç®—è·¨è¾¹ç•Œçš„ç›¸ä¼¼åº¦ cross_similarity = self._cosine_sim( before_window[-1], after_window[0] ) # åˆ¤æ–­æ˜¯å¦ä¸ºè¾¹ç•Œï¼šè·¨è¾¹ç•Œç›¸ä¼¼åº¦æ˜¾è‘—ä½äºçª—å£å†…ç›¸ä¼¼åº¦ avg_window_sim = (before_similarity + after_similarity) / 2 if cross_similarity \u0026lt; threshold * avg_window_sim: boundaries.append(i) boundaries.append(len(embeddings)) return boundaries def _avg_similarity(self, embeddings): \u0026#34;\u0026#34;\u0026#34;è®¡ç®—åµŒå…¥åºåˆ—å†…çš„å¹³å‡ç›¸ä¼¼åº¦\u0026#34;\u0026#34;\u0026#34; if len(embeddings) \u0026lt; 2: return 1.0 similarities = [ self._cosine_sim(embeddings[i], embeddings[i+1]) for i in range(len(embeddings) - 1) ] return np.mean(similarities) def _cosine_sim(self, a, b): \u0026#34;\u0026#34;\u0026#34;è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦\u0026#34;\u0026#34;\u0026#34; return np.dot(a, b) / (np.linalg.norm(a) * np.linalg.norm(b)) ä¸åŒæ–‡æ¡£ç±»å‹çš„åˆ†å—ç­–ç•¥ æ–‡æ¡£ç±»å‹ åˆ†å—ç­–ç•¥ å®ç°è¦ç‚¹ å°è¯´ ç« èŠ‚è¾¹ç•Œ + åœºæ™¯è½¬æ¢ æ£€æµ‹\u0026quot;ç¬¬Xç« \u0026quot;æ¨¡å¼ + å¯¹è¯/å™è¿°äº¤æ›¿ æ³•å¾‹æ¡æ–‡ æ¡æ¬¾è¾¹ç•Œ + å±‚çº§ç»“æ„ æ£€æµ‹\u0026quot;ç¬¬Xæ¡\u0026quot;æ¨¡å¼ + ç¼©è¿›å±‚çº§ å­¦æœ¯è®ºæ–‡ ç« èŠ‚ç»“æ„ + æ®µè½å®Œæ•´æ€§ Markdownæ ‡é¢˜ + æ®µè½è¾¹ç•Œ æŠ€æœ¯æ–‡æ¡£ ä»£ç å—ç‹¬ç«‹ + APIåˆ†ç»„ è¯†åˆ«ä»£ç å— + æŒ‰åŠŸèƒ½åˆ†ç»„ æ–°é—»æ–‡ç«  æ®µè½è¯­ä¹‰è¿è´¯æ€§ è¯­ä¹‰è¾¹ç•Œæ£€æµ‹ 5. MQE vs HyDE æ£€ç´¢ç­–ç•¥å¯¹æ¯” æ£€ç´¢æ–¹æ³•å¯¹æ¯” æ£€ç´¢æ–¹æ³• åŸç† æŸ¥è¯¢ç¤ºä¾‹ ä¼˜ç¼ºç‚¹ åŸºç¡€æ£€ç´¢ ç›´æ¥æŸ¥è¯¢embedding \u0026ldquo;å¦‚ä½•é…ç½®APIå¯†é’¥ï¼Ÿ\u0026rdquo; âœ… ç®€å•å¿«é€Ÿ âŒ å¬å›ç‡ä½ MQE å¤šæŸ¥è¯¢æ‰©å±• â†’ [\u0026ldquo;å¦‚ä½•é…ç½®APIå¯†é’¥ï¼Ÿ\u0026rdquo;, \u0026ldquo;å¦‚ä½•è®¾ç½®å¯†é’¥ï¼Ÿ\u0026rdquo;, \u0026ldquo;åœ¨å“ªé‡Œé…ç½®å‡­è¯ï¼Ÿ\u0026rdquo;] âœ… å¬å›ç‡é«˜ âš ï¸ èåˆå¤æ‚ HyDE å‡è®¾æ–‡æ¡£åµŒå…¥ â†’ ç”Ÿæˆå‡è®¾æ–‡æ¡£ï¼Œç”¨å‡è®¾æ–‡æ¡£embeddingæ£€ç´¢ âœ… ç²¾ç¡®åº¦é«˜ âŒ ä¾èµ–ç”Ÿæˆè´¨é‡ åœºæ™¯é€‰æ‹©çŸ©é˜µ 1 2 3 4 5 6 7 8 9 10 11 12 13 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ æ£€ç´¢ç­–ç•¥é€‰å‹æŒ‡å— â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ æŸ¥è¯¢ç±»å‹ â”‚ æœ€ä½³ç­–ç•¥ â”‚ åŸå›  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€ â”‚ â”‚ ç²¾ç¡®æœ¯è¯­æŸ¥è¯¢ â”‚ åŸºç¡€æ£€ç´¢ â”‚ æœ¯è¯­æ˜ç¡®ï¼Œæ— éœ€æ‰©å±•â”‚ â”‚ æ¨¡ç³Š/å£è¯­åŒ–æŸ¥è¯¢ â”‚ MQE â”‚ å¤šæ ·åŒ–è¡¨è¾¾æé«˜å¬å›â”‚ â”‚ å¤æ‚æ¦‚å¿µæŸ¥è¯¢ â”‚ HyDE â”‚ å‡è®¾æ–‡æ¡£æ•è·è¯­ä¹‰ â”‚ â”‚ å¤šæ­¥éª¤é—®é¢˜ â”‚ MQE + HyDE â”‚ ç»„åˆæ‹³æ•ˆæœæœ€å¥½ â”‚ â”‚ é¢†åŸŸä¸“ä¸šæŸ¥è¯¢ â”‚ åŸºç¡€ + é‡æ’åº â”‚ å‡å°‘å¹»è§‰é£é™© â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å®é™…åœºæ™¯æ•ˆæœå¯¹æ¯” åœºæ™¯ï¼šæŠ€æœ¯æ–‡æ¡£é—®ç­”\næŸ¥è¯¢ï¼š\u0026ldquo;å¦‚ä½•é…ç½®APIå¯†é’¥ï¼Ÿ\u0026rdquo;\næ£€ç´¢æ–¹æ³• å¬å›ç»“æœ æ•ˆæœè¯„ä¼° åŸºç¡€æ£€ç´¢ æ‰¾åˆ°3ä¸ªç›¸å…³ç‰‡æ®µ é—æ¼äº†ä½¿ç”¨\u0026quot;è®¾ç½®\u0026rdquo;ã€\u0026ldquo;å‡­è¯\u0026quot;ç­‰åŒä¹‰è¯çš„æ–‡æ¡£ MQE æ‰¾åˆ°8ä¸ªç›¸å…³ç‰‡æ®µ âœ… å¬å›ç‡æå‡çº¦150% HyDE æ‰¾åˆ°5ä¸ªç›¸å…³ç‰‡æ®µ ç²¾ç¡®åº¦æ›´é«˜ï¼ŒåŒ¹é…åˆ°é…ç½®æ­¥éª¤è¯¦è§£ 6. åµŒå…¥æ–¹æ¡ˆé€‰å‹å¯¹æ¯” ä¸‰ç§æ–¹æ¡ˆå…¨é¢å¯¹æ¯” ç»´åº¦ ç™¾ç‚¼API æœ¬åœ°Transformer TF-IDF å‡†ç¡®æ€§ â­â­â­â­â­ â­â­â­â­ â­â­ é€Ÿåº¦ â­â­â­ (ç½‘ç»œå»¶è¿Ÿ50-200ms) â­â­â­â­ (GPUåŠ é€Ÿï¼Œ\u0026lt;50ms) â­â­â­â­â­ (\u0026lt;10ms) æˆæœ¬ æŒ‰è°ƒç”¨ä»˜è´¹ ç¡¬ä»¶+ç”µè´¹ å…è´¹ ç¦»çº¿éƒ¨ç½² âŒ âœ… âœ… è¯­è¨€æ”¯æŒ ä¸­è‹±åŒè¯­ä¼˜ç§€ éœ€é€‰æ‹©åˆé€‚æ¨¡å‹ ç»Ÿè®¡æ–¹æ³•ï¼Œæ— è¯­ä¹‰ç†è§£ ç»´æŠ¤å¤æ‚åº¦ ä½ ä¸­(æ¨¡å‹æ›´æ–°) ä½ å¯å®šåˆ¶æ€§ ä½ é«˜ ä¸­ è§„æ¨¡åŒ–æˆæœ¬ éšè°ƒç”¨é‡çº¿æ€§å¢é•¿ å›ºå®šæˆæœ¬ å‡ ä¹æ— æˆæœ¬ é€‰å‹å†³ç­–æ ‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 æ˜¯å¦éœ€è¦ç¦»çº¿éƒ¨ç½²ï¼Ÿ â”‚ â”œâ”€â”€ æ˜¯ â†’ æ˜¯å¦æœ‰GPUèµ„æºï¼Ÿ â”‚ â”‚ â”‚ â”œâ”€â”€ æ˜¯ â†’ æœ¬åœ°Transformer (æ¨è) â”‚ â””â”€â”€ å¦ â†’ TF-IDF (å¤‡ç”¨æ–¹æ¡ˆ) â”‚ â””â”€â”€ å¦ â†’ æ˜¯å¦æœ‰é¢„ç®—ï¼Ÿ â”‚ â”œâ”€â”€ æ˜¯ â†’ ç™¾ç‚¼API (æ¨èï¼Œå‡†ç¡®æ€§æœ€é«˜) â”‚ â””â”€â”€ å¦ â†’ è€ƒè™‘æ··åˆæ–¹æ¡ˆï¼š â€¢ çƒ­æ•°æ®ç”¨API (ä¿è¯è´¨é‡) â€¢ å†·æ•°æ®ç”¨æœ¬åœ° (é™ä½æˆæœ¬) æ··åˆæ–¹æ¡ˆå»ºè®® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class HybridEmbedding: \u0026#34;\u0026#34;\u0026#34;æ··åˆåµŒå…¥æ–¹æ¡ˆï¼šAPI + æœ¬åœ°å…œåº•\u0026#34;\u0026#34;\u0026#34; def __init__(self): self.api_client = BailianEmbedding() # ä¸»åŠ› self.local_model = LocalModel() # å¤‡ç”¨ def encode(self, texts): \u0026#34;\u0026#34;\u0026#34;æ™ºèƒ½è·¯ç”±ç¼–ç è¯·æ±‚\u0026#34;\u0026#34;\u0026#34; try: # æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨API return self.api_client.encode(texts) except Exception as e: # APIå¤±è´¥æ—¶é™çº§åˆ°æœ¬åœ°æ¨¡å‹ logger.warning(f\u0026#34;API failed, using local: {e}\u0026#34;) return self.local_model.encode(texts) 7. æ™ºèƒ½é—å¿˜ç­–ç•¥å®ç° å¤šå› ç´ åŠ æƒé—å¿˜ç®—æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 class IntelligentForgetting: \u0026#34;\u0026#34;\u0026#34;æ™ºèƒ½é—å¿˜ç­–ç•¥ï¼šç»¼åˆå¤šå› ç´ çš„é—å¿˜å†³ç­–\u0026#34;\u0026#34;\u0026#34; def __init__(self, weights=None): self.weights = weights or { \u0026#39;importance\u0026#39;: 0.30, # é‡è¦æ€§æƒé‡ \u0026#39;frequency\u0026#39;: 0.25, # è®¿é—®é¢‘ç‡æƒé‡ \u0026#39;recency\u0026#39;: 0.25, # æ—¶é—´æƒé‡ \u0026#39;connectivity\u0026#39;: 0.20 # è¿æ¥æ€§æƒé‡ } def calculate_forgetting_score(self, memory): \u0026#34;\u0026#34;\u0026#34; è®¡ç®—é—å¿˜åˆ†æ•°ï¼šåˆ†æ•°è¶Šé«˜è¶Šåº”è¯¥é—å¿˜ è¿”å›: (forgetting_score, detail_scores) \u0026#34;\u0026#34;\u0026#34; scores = { \u0026#39;importance\u0026#39;: self._importance_score(memory), \u0026#39;frequency\u0026#39;: self._frequency_score(memory), \u0026#39;recency\u0026#39;: self._recency_score(memory), \u0026#39;connectivity\u0026#39;: self._connectivity_score(memory) } # åŠ æƒç»¼åˆ forgetting_score = sum( scores[k] * self.weights[k] for k in scores ) return forgetting_score, scores def _importance_score(self, memory): \u0026#34;\u0026#34;\u0026#34; é‡è¦æ€§è½¬æ¢ä¸ºé—å¿˜å€¾å‘ï¼ˆåå‘ï¼‰ é‡è¦æ€§è¶Šé«˜ â†’ é—å¿˜å€¾å‘è¶Šä½ \u0026#34;\u0026#34;\u0026#34; original = memory.get(\u0026#39;importance\u0026#39;, 0.5) return 1 - original def _frequency_score(self, memory): \u0026#34;\u0026#34;\u0026#34; è®¿é—®é¢‘ç‡è½¬æ¢ä¸ºé—å¿˜å€¾å‘ï¼ˆåå‘ï¼‰ è®¿é—®è¶Šå¤š + è·ç¦»ä¸Šæ¬¡è®¿é—®è¶ŠçŸ­ â†’ é—å¿˜å€¾å‘è¶Šä½ \u0026#34;\u0026#34;\u0026#34; access_count = memory.get(\u0026#39;access_count\u0026#39;, 0) days_since_last = memory.get(\u0026#39;days_since_last_access\u0026#39;, 0) # è®¿é—®è¶Šå¤š â†’ é—å¿˜å€¾å‘è¶Šä½ frequency_factor = 1 / (1 + access_count * 0.1) # è·ä¸Šæ¬¡è®¿é—®è¶Šä¹… â†’ é—å¿˜å€¾å‘è¶Šé«˜ recency_penalty = min(days_since_last * 0.02, 0.5) return frequency_factor + recency_penalty def _recency_score(self, memory): \u0026#34;\u0026#34;\u0026#34; æ—¶é—´è¡°å‡ï¼šè¶Šæ—§è¶Šå®¹æ˜“é—å¿˜ ä½¿ç”¨Sæ›²çº¿ï¼šåˆšå¼€å§‹é—å¿˜æ…¢ï¼Œä¸­é—´åŠ é€Ÿï¼ŒåæœŸè¶‹ç¼“ \u0026#34;\u0026#34;\u0026#34; age_days = memory.get(\u0026#39;age_days\u0026#39;, 0) # Sigmoidå‡½æ•° return 1 / (1 + np.exp(-0.05 * (age_days - 60))) def _connectivity_score(self, memory): \u0026#34;\u0026#34;\u0026#34; è¿æ¥æ€§ï¼šä¸å…¶ä»–è®°å¿†å…³è”å°‘ â†’ æ›´å®¹æ˜“é—å¿˜ åœ¨å›¾æ•°æ®åº“ä¸­æŸ¥è¯¢ç›¸å…³èŠ‚ç‚¹æ•°é‡ \u0026#34;\u0026#34;\u0026#34; related_count = self._get_related_memory_count(memory[\u0026#39;id\u0026#39;]) return 1 / (1 + related_count * 0.2) é—å¿˜å†³ç­–é˜ˆå€¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # é—å¿˜é˜ˆå€¼è®¾å®š FORGETTING_THRESHOLDS = { \u0026#39;immediate\u0026#39;: 0.8, # ç«‹å³é—å¿˜ \u0026#39;gradual\u0026#39;: 0.6, # é€æ¸é™ä½ä¼˜å…ˆçº§ \u0026#39;archive\u0026#39;: 0.4, # å½’æ¡£ \u0026#39;keep\u0026#39;: 0.4 # ä¿ç•™ } def decide_forget_action(memory): \u0026#34;\u0026#34;\u0026#34;æ ¹æ®é—å¿˜åˆ†æ•°å†³å®šæ“ä½œ\u0026#34;\u0026#34;\u0026#34; score, _ = forgetting.calculate_forgetting_score(memory) if score \u0026gt;= FORGETTING_THRESHOLDS[\u0026#39;immediate\u0026#39;]: return \u0026#39;delete\u0026#39; elif score \u0026gt;= FORGETTING_THRESHOLDS[\u0026#39;gradual\u0026#39;]: return \u0026#39;deprioritize\u0026#39; elif score \u0026gt;= FORGETTING_THRESHOLDS[\u0026#39;archive\u0026#39;]: return \u0026#39;archive\u0026#39; else: return \u0026#39;keep\u0026#39; 8. è®°å¿†å½’æ¡£æœºåˆ¶è®¾è®¡ è®°å¿†ç”Ÿå‘½å‘¨æœŸç®¡ç† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ è®°å¿†ç”Ÿå‘½å‘¨æœŸç®¡ç† â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” è¿ç§»æ¡ä»¶ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” è¿ç§»æ¡ä»¶ â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚ â”‚ æ´»è·ƒè®°å¿† â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u0026gt; â”‚ æ¸©è®°å¿† â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\u0026gt; â”‚ å†·å­˜å‚¨ â”‚â”‚ â”‚ â”‚ Hot â”‚ â”‚ Warm â”‚ â”‚ Cold â”‚â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚ â”‚ â”‚ ç‰¹å¾ï¼š ç‰¹å¾ï¼š ç‰¹å¾ï¼š â”‚ â”‚ â€¢ é¢‘ç¹è®¿é—® â€¢ å¶å°”è®¿é—® â€¢ é•¿æœŸæœªè®¿é—®â”‚ â”‚ â€¢ é«˜é‡è¦æ€§ â€¢ ä¸­é‡è¦æ€§ â€¢ å¯èƒ½æœ‰ä»·å€¼â”‚ â”‚ â€¢ æœ€è¿‘åˆ›å»º â€¢ ä¸­ç­‰æ—¶é—´ â€¢ å†å²è®°å½• â”‚ â”‚ â”‚ â”‚ è¿ç§»ç­–ç•¥ï¼š â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ æ´»è·ƒ â†’ æ¸©ï¼š 7å¤©æ— è®¿é—® + é‡è¦æ€§\u0026lt;0.7 â”‚ â”‚ â”‚ â”‚ æ¸© â†’ å†·ï¼š 30å¤©æ— è®¿é—® + ç´¯è®¡è®¿é—®\u0026lt;3æ¬¡ â”‚ â”‚ â”‚ â”‚ å†· â†’ åˆ é™¤ï¼š 90å¤©æ— è®¿é—® + é‡è¦æ€§\u0026lt;0.3 â”‚ â”‚ â”‚ â”‚ å†· â†’ æ´»è·ƒï¼š è¢«å…³è”æŸ¥è¯¢è§¦å‘ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ å­˜å‚¨ä¼˜åŒ–ï¼š â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ æ´»è·ƒï¼š Qdrant/Neo4j (çƒ­ç´¢å¼•ï¼Œæ¯«ç§’çº§å“åº”) â”‚ â”‚ â”‚ â”‚ æ¸©ï¼š å‹ç¼©å­˜å‚¨ + å®šæœŸé‡å»ºç´¢å¼• â”‚ â”‚ â”‚ â”‚ å†·ï¼š å¯¹è±¡å­˜å‚¨(S3) + å…ƒæ•°æ®ç´¢å¼• â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å½’æ¡£å®ç°ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 class MemoryArchiver: \u0026#34;\u0026#34;\u0026#34;è®°å¿†å½’æ¡£ç®¡ç†å™¨\u0026#34;\u0026#34;\u0026#34; def __init__(self): self.storage = { \u0026#39;hot\u0026#39;: HotStorage(), # Qdrant + Neo4j \u0026#39;warm\u0026#39;: WarmStorage(), # å‹ç¼©æ ¼å¼ \u0026#39;cold\u0026#39;: ColdStorage() # S3 + å…ƒæ•°æ® } def evaluate_and_archive(self, memories): \u0026#34;\u0026#34;\u0026#34;è¯„ä¼°å¹¶æ‰§è¡Œå½’æ¡£\u0026#34;\u0026#34;\u0026#34; for memory in memories: tier = self._evaluate_tier(memory) current_tier = memory.get(\u0026#39;storage_tier\u0026#39;, \u0026#39;hot\u0026#39;) if tier != current_tier: self._move_memory(memory, current_tier, tier) def _evaluate_tier(self, memory): \u0026#34;\u0026#34;\u0026#34;è¯„ä¼°è®°å¿†åº”å¤„äºçš„å­˜å‚¨å±‚çº§\u0026#34;\u0026#34;\u0026#34; # è®¡ç®—è®¿é—®çƒ­åº¦ access_score = self._calculate_access_score(memory) # è®¡ç®—é‡è¦æ€§ importance = memory.get(\u0026#39;importance\u0026#39;, 0.5) if access_score \u0026gt; 0.7 and importance \u0026gt; 0.7: return \u0026#39;hot\u0026#39; elif access_score \u0026gt; 0.3 or importance \u0026gt; 0.5: return \u0026#39;warm\u0026#39; else: return \u0026#39;cold\u0026#39; def _calculate_access_score(self, memory): \u0026#34;\u0026#34;\u0026#34;è®¡ç®—è®¿é—®çƒ­åº¦åˆ†æ•°\u0026#34;\u0026#34;\u0026#34; # æœ€è¿‘è®¿é—®æƒé‡é«˜ now = time.time() last_access = memory.get(\u0026#39;last_access\u0026#39;, 0) days_since = (now - last_access) / 86400 # æŒ‡æ•°è¡°å‡ time_factor = np.exp(-days_since / 7) # 7å¤©åŠè¡°æœŸ # è®¿é—®æ¬¡æ•° count_factor = min(memory.get(\u0026#39;access_count\u0026#39;, 0) / 10, 1) return (time_factor * 0.7 + count_factor * 0.3) 9. éšç§æ•°æ®å½»åº•æ¸…é™¤æ–¹æ¡ˆ å¤šå±‚éªŒè¯æ¸…é™¤æœºåˆ¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ éšç§æ•°æ®æ¸…é™¤çš„å¤šå±‚éªŒè¯æœºåˆ¶ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ ç¬¬1å±‚ï¼šåº”ç”¨å±‚åˆ é™¤ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ DELETE FROM memories â”‚ â”‚ â”‚ â”‚ WHERE id = ? AND user_id = ? â”‚ â”‚ â”‚ â”‚ åŒæ—¶æ ‡è®°ç›¸å…³å¼•ç”¨ä¸º\u0026#34;å¾…åˆ é™¤\u0026#34; â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â”‚ â”‚ ç¬¬2å±‚ï¼šå‘é‡æ•°æ®åº“æ¸…é™¤ (Qdrant) â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ qdrant_client.delete( â”‚ â”‚ â”‚ â”‚ collection_name=f\u0026#34;user_{user_id}\u0026#34;, â”‚ â”‚ â”‚ â”‚ points_selector=[memory_id] â”‚ â”‚ â”‚ â”‚ ) â”‚ â”‚ â”‚ â”‚ éªŒè¯ï¼šretrieve(memory_id) åº”è¿”å›ç©º â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â”‚ â”‚ ç¬¬3å±‚ï¼šå›¾æ•°æ®åº“æ¸…é™¤ (Neo4j) â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ MATCH (m:Memory {id: $id}) â”‚ â”‚ â”‚ â”‚ DETACH DELETE m, m-[r]-() â”‚ â”‚ â”‚ â”‚ å¤„ç†å­¤ç«‹èŠ‚ç‚¹ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â”‚ â”‚ ç¬¬4å±‚ï¼šå¤‡ä»½åŒºæ¸…é™¤ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ ä»å½’æ¡£å­˜å‚¨åˆ é™¤ â”‚ â”‚ â”‚ â”‚ æ¸…é™¤æ—¥å¿—ä¸­çš„æ•æ„Ÿä¿¡æ¯ â”‚ â”‚ â”‚ â”‚ æ¸…é™¤ç¼“å­˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â”‚ â”‚ ç¬¬5å±‚ï¼šéªŒè¯ç¡®è®¤ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ å…¨åŸŸæœç´¢éªŒè¯ â”‚ â”‚ â”‚ â”‚ ç”Ÿæˆæ¸…é™¤æŠ¥å‘Šä¾›å®¡è®¡ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å®ç°ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 class PrivacyCleaner: \u0026#34;\u0026#34;\u0026#34;éšç§æ•°æ®å½»åº•æ¸…é™¤\u0026#34;\u0026#34;\u0026#34; def __init__(self, qdrant_client, neo4j_driver, storage): self.qdrant = qdrant_client self.neo4j = neo4j_driver self.storage = storage def delete_memory(self, user_id, memory_id): \u0026#34;\u0026#34;\u0026#34;å½»åº•åˆ é™¤è®°å¿†\u0026#34;\u0026#34;\u0026#34; deletion_report = { \u0026#39;memory_id\u0026#39;: memory_id, \u0026#39;steps\u0026#39;: [], \u0026#39;success\u0026#39;: True } # ç¬¬1æ­¥ï¼šåº”ç”¨å±‚åˆ é™¤ deletion_report[\u0026#39;steps\u0026#39;].append(self._delete_from_app(memory_id)) # ç¬¬2æ­¥ï¼šå‘é‡æ•°æ®åº“åˆ é™¤ deletion_report[\u0026#39;steps\u0026#39;].append( self._delete_from_qdrant(user_id, memory_id) ) # ç¬¬3æ­¥ï¼šå›¾æ•°æ®åº“åˆ é™¤ deletion_report[\u0026#39;steps\u0026#39;].append( self._delete_from_neo4j(memory_id) ) # ç¬¬4æ­¥ï¼šå­˜å‚¨åˆ é™¤ deletion_report[\u0026#39;steps\u0026#39;].append( self._delete_from_storage(memory_id) ) # ç¬¬5æ­¥ï¼šéªŒè¯ deletion_report[\u0026#39;steps\u0026#39;].append( self._verify_deletion(memory_id) ) return deletion_report def _delete_from_qdrant(self, user_id, memory_id): \u0026#34;\u0026#34;\u0026#34;ä»Qdrantåˆ é™¤å‘é‡\u0026#34;\u0026#34;\u0026#34; collection = f\u0026#34;user_{user_id}_vectors\u0026#34; # åˆ é™¤å‘é‡ç‚¹ self.qdrant.delete( collection_name=collection, points_selector=[memory_id] ) # éªŒè¯åˆ é™¤ result = self.qdrant.retrieve( collection_name=collection, ids=[memory_id] ) if len(result) == 0: return {\u0026#39;step\u0026#39;: \u0026#39;qdrant\u0026#39;, \u0026#39;status\u0026#39;: \u0026#39;success\u0026#39;} else: return {\u0026#39;step\u0026#39;: \u0026#39;qdrant\u0026#39;, \u0026#39;status\u0026#39;: \u0026#39;failed\u0026#39;, \u0026#39;remains\u0026#39;: len(result)} 10. RAG vs Memory æ™ºèƒ½è·¯ç”± æ™ºèƒ½è·¯ç”±æœºåˆ¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 class RetrievalRouter: \u0026#34;\u0026#34;\u0026#34;æ™ºèƒ½è·¯ç”±ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ£€ç´¢æ–¹å¼\u0026#34;\u0026#34;\u0026#34; def route(self, query, context): \u0026#34;\u0026#34;\u0026#34;æ ¹æ®æŸ¥è¯¢ç‰¹å¾å†³å®šæ£€ç´¢ç­–ç•¥\u0026#34;\u0026#34;\u0026#34; # 1. åˆ†ææŸ¥è¯¢ç±»å‹ query_type = self._classify_query(query) # 2. è¯„ä¼°ä¸Šä¸‹æ–‡ context_score = self._evaluate_context(context) # 3. è·¯ç”±å†³ç­– strategy = self._decide(query_type, context_score) return strategy def _classify_query(self, query): \u0026#34;\u0026#34;\u0026#34;æŸ¥è¯¢åˆ†ç±»\u0026#34;\u0026#34;\u0026#34; features = { \u0026#39;has_entity\u0026#39;: self._has_named_entity(query), \u0026#39;is_personal\u0026#39;: self._is_personal_reference(query), \u0026#39;is_factual\u0026#39;: self._is_factual_query(query), \u0026#39;temporal\u0026#39;: self._has_temporal_aspect(query) } # å†³ç­–æ ‘ if features[\u0026#39;is_personal\u0026#39;]: return \u0026#39;memory_primary\u0026#39; elif features[\u0026#39;has_entity\u0026#39;] and features[\u0026#39;is_factual\u0026#39;]: return \u0026#39;rag_primary\u0026#39; elif features[\u0026#39;temporal\u0026#39;]: return \u0026#39;memory_primary\u0026#39; else: return \u0026#39;hybrid\u0026#39; def _decide(self, query_type, context_score): \u0026#34;\u0026#34;\u0026#34;è·¯ç”±å†³ç­–è¡¨\u0026#34;\u0026#34;\u0026#34; decision_matrix = { (\u0026#39;memory_primary\u0026#39;, \u0026#39;high\u0026#39;): [\u0026#39;memory\u0026#39;, \u0026#39;rag\u0026#39;], (\u0026#39;memory_primary\u0026#39;, \u0026#39;low\u0026#39;): [\u0026#39;memory\u0026#39;], (\u0026#39;rag_primary\u0026#39;, \u0026#39;any\u0026#39;): [\u0026#39;rag\u0026#39;], (\u0026#39;hybrid\u0026#39;, \u0026#39;high\u0026#39;): [\u0026#39;rag\u0026#39;, \u0026#39;memory\u0026#39;, \u0026#39;merge\u0026#39;], (\u0026#39;hybrid\u0026#39;, \u0026#39;low\u0026#39;): [\u0026#39;rag\u0026#39;, \u0026#39;memory\u0026#39;] } return decision_matrix.get((query_type, context_score), [\u0026#39;rag\u0026#39;]) è·¯ç”±å†³ç­–è¡¨ æŸ¥è¯¢ç±»å‹ ä¸Šä¸‹æ–‡ä¸°å¯Œåº¦ æ¨èç­–ç•¥ ç†ç”± \u0026ldquo;æˆ‘ä¹‹å‰è¯´è¿‡\u0026hellip;\u0026rdquo; é«˜ Memory â†’ RAG ä¼˜å…ˆæ£€ç´¢ä¸ªäººè®°å¿† \u0026ldquo;ä»€ä¹ˆæ˜¯Transformer?\u0026rdquo; ä»»æ„ RAG äº‹å®æ€§æŸ¥è¯¢ \u0026ldquo;ä¸Šå‘¨è®¨è®ºäº†ä»€ä¹ˆ?\u0026rdquo; é«˜ Memory æ—¶é—´èŒƒå›´æŸ¥è¯¢ \u0026ldquo;æ·±åº¦å­¦ä¹ åŸç†æ˜¯ä»€ä¹ˆ?\u0026rdquo; é«˜ RAG + Memory ç»“åˆçŸ¥è¯†å’Œè®°å¿† 11. æ™ºèƒ½å­¦ä¹ æŠ¥å‘Šç”Ÿæˆå™¨è®¾è®¡ æŠ¥å‘Šç”Ÿæˆå™¨æ¶æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ æ™ºèƒ½å­¦ä¹ æŠ¥å‘Šç”Ÿæˆå™¨æ¶æ„ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ è¾“å…¥ï¼šç”¨æˆ·å­¦ä¹ å†å²ï¼ˆé—®ç­”è®°å½•ã€ç¬”è®°ã€è¡Œä¸ºæ•°æ®ï¼‰ â”‚ â”‚ â†“ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ åˆ†æå¼•æ“æ¨¡å— â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ 1. å­¦ä¹ è½¨è¿¹åˆ†æ (æƒ…æ™¯è®°å¿† + æ—¶é—´åºåˆ—) â”‚ â”‚ â”‚ â”‚ 2. çŸ¥è¯†å›¾è°±æ„å»º (è¯­ä¹‰è®°å¿† + å›¾æ¨ç†) â”‚ â”‚ â”‚ â”‚ 3. å…´è¶£åå¥½è¯†åˆ« (è®¿é—®é¢‘ç‡ + åœç•™æ—¶é—´) â”‚ â”‚ â”‚ â”‚ 4. å­¦ä¹ é£æ ¼æ£€æµ‹ (é—®é¢˜ç±»å‹ + ç¬”è®°æ¨¡å¼) â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ çŸ¥è¯†ç›²ç‚¹è¯†åˆ« â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â€¢ æœªè¦†ç›–çš„çŸ¥è¯†é¢†åŸŸ (æ–‡æ¡£è¦†ç›– vs å­¦ä¹ è¦†ç›–) â”‚ â”‚ â”‚ â”‚ â€¢ æµ…åº¦å­¦ä¹ çš„å†…å®¹ (å•æ¬¡è®¿é—® vs æ·±åº¦äº¤äº’) â”‚ â”‚ â”‚ â”‚ â€¢ é—å¿˜çš„çŸ¥è¯†ç‚¹ (å­¦ä¹ åæœªå¤ä¹ ) â”‚ â”‚ â”‚ â”‚ â€¢ è¯¯è§£çš„æ¦‚å¿µ (çŸ›ç›¾é—®ç­”è®°å½•) â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ æ¨èå¼•æ“ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â€¢ å¤ä¹ ä¼˜å…ˆçº§æ’åº (é—å¿˜æ›²çº¿ + é‡è¦æ€§) â”‚ â”‚ â”‚ â”‚ â€¢ æ‰©å±•å­¦ä¹ å»ºè®® (çŸ¥è¯†å›¾è°±å…³è”) â”‚ â”‚ â”‚ â”‚ â€¢ ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ (å­¦ä¹ é£æ ¼åŒ¹é…) â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â†“ â”‚ â”‚ è¾“å‡ºï¼šç»“æ„åŒ–å­¦ä¹ æŠ¥å‘Š + å¯è§†åŒ–å›¾è¡¨ + è¡ŒåŠ¨å»ºè®® â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ æŠ¥å‘Šç»“æ„ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 { \u0026#34;report_id\u0026#34;: \u0026#34;report_20240120_user123\u0026#34;, \u0026#34;generated_at\u0026#34;: \u0026#34;2024-01-20T10:30:00Z\u0026#34;, \u0026#34;summary\u0026#34;: { \u0026#34;total_study_time\u0026#34;: \u0026#34;5.2å°æ—¶\u0026#34;, \u0026#34;documents_studied\u0026#34;: 3, \u0026#34;questions_asked\u0026#34;: 15, \u0026#34;notes_created\u0026#34;: 8 }, \u0026#34;learning_analysis\u0026#34;: { \u0026#34;strengths\u0026#34;: [\u0026#34;æ·±åº¦å­¦ä¹ åŸºç¡€\u0026#34;, \u0026#34;Transformeræ¶æ„\u0026#34;], \u0026#34;weaknesses\u0026#34;: [\u0026#34;æ³¨æ„åŠ›æœºåˆ¶ç»†èŠ‚\u0026#34;, \u0026#34;è®­ç»ƒæŠ€å·§\u0026#34;], \u0026#34;knowledge_graph\u0026#34;: { \u0026#34;nodes\u0026#34;: 25, \u0026#34;edges\u0026#34;: 38, \u0026#34;central_concepts\u0026#34;: [\u0026#34;ç¥ç»ç½‘ç»œ\u0026#34;, \u0026#34;åå‘ä¼ æ’­\u0026#34;] } }, \u0026#34;knowledge_gaps\u0026#34;: [ { \u0026#34;topic\u0026#34;: \u0026#34;æ³¨æ„åŠ›æœºåˆ¶\u0026#34;, \u0026#34;reason\u0026#34;: \u0026#34;ä»æœªæé—®è¿‡ç›¸å…³é—®é¢˜\u0026#34;, \u0026#34;priority\u0026#34;: \u0026#34;high\u0026#34;, \u0026#34;recommendation\u0026#34;: \u0026#34;å»ºè®®å­¦ä¹ ï¼šSelf-Attentionã€Multi-Head Attention\u0026#34; } ], \u0026#34;review_suggestions\u0026#34;: [ { \u0026#34;topic\u0026#34;: \u0026#34;Transformeræ¶æ„\u0026#34;, \u0026#34;reason\u0026#34;: \u0026#34;3å¤©å‰å­¦ä¹ ï¼Œæœªå¤ä¹ \u0026#34;, \u0026#34;urgency\u0026#34;: \u0026#34;medium\u0026#34; } ], \u0026#34;next_steps\u0026#34;: [ \u0026#34;æ·±å…¥ç†è§£æ³¨æ„åŠ›æœºåˆ¶\u0026#34;, \u0026#34;å­¦ä¹ BERTå’ŒGPTçš„åŒºåˆ«\u0026#34;, \u0026#34;å®è·µï¼šå®ç°ä¸€ä¸ªç®€å•çš„Transformer\u0026#34; ] } 12. å¤šç”¨æˆ·æ•°æ®éš”ç¦»æ–¹æ¡ˆ Qdrant éš”ç¦»æ–¹æ¡ˆ æ–¹æ¡ˆ1ï¼šç‹¬ç«‹Collectionï¼ˆæ¨èï¼‰\n1 2 3 4 5 6 7 8 9 10 # æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹çš„collection collection_name = f\u0026#34;user_{user_id}_vectors\u0026#34; # ä¼˜ç‚¹ï¼š # - å®Œå…¨éš”ç¦»ï¼Œå®‰å…¨ # - å¯ç‹¬ç«‹åˆ é™¤ # - æ€§èƒ½äº’ä¸å½±å“ # ç¼ºç‚¹ï¼š # - Collectionæ•°é‡å¤šæ—¶ç®¡ç†å¤æ‚ æ–¹æ¡ˆ2ï¼šå…±äº«Collection + Payloadè¿‡æ»¤\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # å…±äº«collectionï¼Œé€šè¿‡payloadè¿‡æ»¤ collection_name = \u0026#34;global_vectors\u0026#34; # æ’å…¥æ—¶æ·»åŠ ç”¨æˆ·æ ‡è¯† point = { \u0026#34;id\u0026#34;: f\u0026#34;{user_id}_{doc_id}\u0026#34;, \u0026#34;vector\u0026#34;: embedding, \u0026#34;payload\u0026#34;: { \u0026#34;user_id\u0026#34;: user_id, \u0026#34;document\u0026#34;: doc_name } } # æŸ¥è¯¢æ—¶è¿‡æ»¤ search_result = qdrant.search( collection_name=\u0026#34;global_vectors\u0026#34;, query_vector=embedding, query_filter={ \u0026#34;must\u0026#34;: [ {\u0026#34;key\u0026#34;: \u0026#34;user_id\u0026#34;, \u0026#34;match\u0026#34;: {\u0026#34;value\u0026#34;: user_id}} ] } ) Neo4j éš”ç¦»æ–¹æ¡ˆ 1 2 3 4 5 6 7 8 9 10 11 -- æ–¹æ¡ˆ1ï¼šç”¨æˆ·æ ¹èŠ‚ç‚¹ï¼ˆæ¨èï¼‰ MATCH (u:User {id: $user_id})-[:HAS_MEMORY]-\u0026gt;(m:Memory) RETURN m -- æ–¹æ¡ˆ2ï¼šèŠ‚ç‚¹å±æ€§è¿‡æ»¤ MATCH (m:Memory {user_id: $user_id}) RETURN m -- æ–¹æ¡ˆ3ï¼šæ ‡ç­¾éš”ç¦» MATCH (m:Memory:User_123) RETURN m æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ ç­–ç•¥ å®ç°æ–¹å¼ æ•ˆæœ ç´¢å¼•ä¼˜åŒ– CREATE INDEX ON :Memory(user_id) æŸ¥è¯¢é€Ÿåº¦æå‡10x åˆ†ç‰‡ç­–ç•¥ æŒ‰user_idå“ˆå¸Œåˆ†ç‰‡ è´Ÿè½½å‡è¡¡ è¿æ¥æ±  é™åˆ¶æ¯ç”¨æˆ·å¹¶å‘æ•° é˜²æ­¢èµ„æºè€—å°½ ç¼“å­˜å±‚ Redisç¼“å­˜çƒ­ç‚¹ç”¨æˆ·session å‡å°‘æ•°æ®åº“å‹åŠ› 13. çŸ¥è¯†å›¾è°±è´¨é‡è¯„ä¼° è´¨é‡è¯„ä¼°ç»´åº¦ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 class KnowledgeGraphQuality: \u0026#34;\u0026#34;\u0026#34;çŸ¥è¯†å›¾è°±è´¨é‡è¯„ä¼°å™¨\u0026#34;\u0026#34;\u0026#34; def evaluate(self, graph): \u0026#34;\u0026#34;\u0026#34;ç»¼åˆè´¨é‡è¯„åˆ†\u0026#34;\u0026#34;\u0026#34; return { \u0026#39;completeness\u0026#39;: self._check_completeness(graph), \u0026#39;accuracy\u0026#39;: self._check_accuracy(graph), \u0026#39;consistency\u0026#39;: self._check_consistency(graph), \u0026#39;coverage\u0026#39;: self._check_coverage(graph), \u0026#39;overall\u0026#39;: self._calculate_overall(graph) } def _check_completeness(self, graph): \u0026#34;\u0026#34;\u0026#34;å®Œæ•´æ€§æ£€æŸ¥\u0026#34;\u0026#34;\u0026#34; total_nodes = graph.count_nodes() isolated_nodes = graph.count_isolated_nodes() total_relationships = graph.count_relationships() # å®Œæ•´æ€§æŒ‡æ ‡ isolation_ratio = isolated_nodes / total_nodes if total_nodes \u0026gt; 0 else 0 relationship_density = total_relationships / max(total_nodes * (total_nodes - 1) / 2, 1) return { \u0026#39;isolation_ratio\u0026#39;: isolation_ratio, # è¶Šä½è¶Šå¥½ \u0026#39;density\u0026#39;: relationship_density, # é€‚åº¦æœ€ä½³ \u0026#39;score\u0026#39;: 1 - isolation_ratio * 0.5 # è½¬æ¢ä¸ºåˆ†æ•° } def _check_accuracy(self, graph): \u0026#34;\u0026#34;\u0026#34;å‡†ç¡®æ€§æ£€æŸ¥ï¼ˆéœ€è¦æ ·æœ¬éªŒè¯ï¼‰\u0026#34;\u0026#34;\u0026#34; # å®ä½“ç±»å‹ä¸€è‡´æ€§ entities = graph.get_all_entities() type_conflicts = 0 for entity in entities: if self._has_type_conflict(entity): type_conflicts += 1 # å…³ç³»åˆç†æ€§ relationships = graph.get_all_relationships() invalid_rels = 0 for rel in relationships: if not self._is_valid_relation(rel): invalid_rels += 1 return { \u0026#39;entity_consistency\u0026#39;: 1 - type_conflicts / len(entities), \u0026#39;relation_validity\u0026#39;: 1 - invalid_rels / len(relationships) } å¸¸è§é”™è¯¯ç±»å‹ é”™è¯¯ç±»å‹ æ£€æµ‹æ–¹æ³• ä¿®æ­£ç­–ç•¥ å®ä½“è¾¹ç•Œé”™è¯¯ ç»Ÿè®¡å…±ç°é¢‘ç‡ é‡æ–°åˆ†è¯ å…³ç³»æ–¹å‘é”™è¯¯ ä¼ é€’æ€§æ£€æŸ¥ åè½¬å…³ç³» ç±»å‹å†²çª ç±»å‹ä¸€è‡´æ€§éªŒè¯ å¤šç±»å‹æ ‡ç­¾ å†—ä½™å…³ç³» é‡å¤æ£€æµ‹ å…³ç³»åˆå¹¶ è™šå‡å…³è” ç½®ä¿¡åº¦é˜ˆå€¼ è¿‡æ»¤ä½ç½®ä¿¡åº¦ 14. å›¾æ£€ç´¢ vs å‘é‡æ£€ç´¢å¯¹æ¯” æŸ¥è¯¢ç±»å‹å¯¹æ¯”è¡¨ æŸ¥è¯¢ç±»å‹ å‘é‡æ£€ç´¢ å›¾æ£€ç´¢ æ¨èæ–¹æ¡ˆ \u0026ldquo;æœºå™¨å­¦ä¹ çš„å®šä¹‰\u0026rdquo; âœ… è¯­ä¹‰ç›¸ä¼¼ âŒ æ— ä¼˜åŠ¿ å‘é‡ \u0026ldquo;ä¸Transformerç›¸å…³çš„æ‰€æœ‰æŠ€æœ¯\u0026rdquo; âš ï¸ å¬å›æœ‰é™ âœ… å¤šè·³å…³è” å›¾ \u0026ldquo;Aå¦‚ä½•å½±å“B\u0026rdquo; âŒ æ— æ³•åˆ¤æ–­ âœ… è·¯å¾„æŸ¥æ‰¾ å›¾ \u0026ldquo;ä¸Xç±»ä¼¼çš„æ¦‚å¿µ\u0026rdquo; âœ… è¯­ä¹‰ç›¸ä¼¼ âš ï¸ éœ€è¦åŒç±»å‹ å‘é‡ \u0026ldquo;Xåœ¨çŸ¥è¯†ä½“ç³»ä¸­çš„ä½ç½®\u0026rdquo; âŒ æ— ç»“æ„ä¿¡æ¯ âœ… å±‚çº§ç»“æ„ å›¾ \u0026ldquo;æˆ‘å­¦è¿‡å“ªäº›ç›¸å…³å†…å®¹\u0026rdquo; âš ï¸ è¯­ä¹‰åŒ¹é… âœ… å…³è”éå† å›¾ æ··åˆæ£€ç´¢ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 // æŸ¥è¯¢ï¼šæ‰¾å‡ºæ‰€æœ‰ä¸\u0026#34;Transformer\u0026#34;ç›¸å…³çš„æŠ€æœ¯ï¼Œå¹¶æŒ‰å…³è”å¼ºåº¦æ’åº MATCH path = (t:Concept {name: \u0026#34;Transformer\u0026#34;})-[:RELATED_TO*1..3]-(related:Concept) WHERE related.category = \u0026#34;æŠ€æœ¯\u0026#34; // åŒæ—¶è€ƒè™‘å‘é‡ç›¸ä¼¼åº¦ï¼ˆé€šè¿‡é¢„è®¡ç®—ï¼‰ WITH related, apoc.cypher.run( \u0026#39;CALL db.index.vector.queryNodes(\u0026#34;embedding_index\u0026#34;, 10, $embedding) YIELD node, score RETURN node.name AS name, score\u0026#39;, {embedding: $query_embedding} ) AS vector_result // åˆå¹¶å›¾æ£€ç´¢å’Œå‘é‡æ£€ç´¢åˆ†æ•° MATCH (related) WHERE related.name IN vector_result.name RETURN related.name, sum(r.weight) as graph_score, vector_result.score as vector_score, (graph_score * 0.6 + vector_score * 0.4) as combined_score ORDER BY combined_score DESC LIMIT 10 å›¾æ£€ç´¢ä¼˜åŠ¿åœºæ™¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ å›¾æ£€ç´¢ä¼˜åŠ¿åœºæ™¯ç¤ºä¾‹ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ åœºæ™¯1ï¼šå…³ç³»æ¨ç† â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ é—®é¢˜ï¼š\u0026#34;Aå¦‚ä½•å½±å“Bï¼Ÿ\u0026#34; â”‚ â”‚ â”‚ â”‚ å›¾æ£€ç´¢ï¼šFIND PATH A-\u0026gt;...-\u0026gt;B â”‚ â”‚ â”‚ â”‚ å‘é‡æ£€ç´¢ï¼šæ— æ³•ç†è§£\u0026#34;å½±å“\u0026#34;å…³ç³» â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ åœºæ™¯2ï¼šå±‚çº§éå† â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ é—®é¢˜ï¼š\u0026#34;åˆ—å‡ºæ‰€æœ‰æœºå™¨å­¦ä¹ çš„å­é¢†åŸŸ\u0026#34; â”‚ â”‚ â”‚ â”‚ å›¾æ£€ç´¢ï¼šMATCH (p:Concept)-[:SUBTYPE*]-\u0026gt;(c) â”‚ â”‚ â”‚ â”‚ å‘é‡æ£€ç´¢ï¼šåªèƒ½æ‰¾åˆ°è¯­ä¹‰ç›¸ä¼¼çš„æ¦‚å¿µ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ åœºæ™¯3ï¼šç¤¾åŒºå‘ç° â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ é—®é¢˜ï¼š\u0026#34;æ‰¾å‡ºæ‰€æœ‰ç›¸äº’å…³è”çš„æ¦‚å¿µç¾¤\u0026#34; â”‚ â”‚ â”‚ â”‚ å›¾æ£€ç´¢ï¼šç¤¾åŒºæ£€æµ‹ç®—æ³• â”‚ â”‚ â”‚ â”‚ å‘é‡æ£€ç´¢ï¼šéœ€è¦å…ˆèšç±»å†åˆ†æ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ æ€»ç»“ æœ¬è§£ç­”æ¶µç›–äº†æ™ºèƒ½ä½“è®°å¿†ç³»ç»Ÿå’ŒRAGç³»ç»Ÿçš„æ ¸å¿ƒè®¾è®¡ç†å¿µï¼š\nè®°å¿†ç±»å‹è®¾è®¡éœ€è¦ç†è§£æ¯ç§è®°å¿†çš„æœ¬è´¨ç‰¹å¾ RAGç³»ç»Ÿä¼˜åŒ–éœ€è¦åœ¨å¬å›ç‡ã€ç²¾ç¡®åº¦ã€æ•ˆç‡ä¹‹é—´æƒè¡¡ å·¥ç¨‹å®è·µéœ€è¦è€ƒè™‘éšç§ã€æ€§èƒ½ã€å¯æ‰©å±•æ€§ å¤šç”¨æˆ·åœºæ™¯éœ€è¦ä»”ç»†è®¾è®¡æ•°æ®éš”ç¦»æ–¹æ¡ˆ è´¨é‡ä¿è¯éœ€è¦å»ºç«‹è¯„ä¼°å’ŒéªŒè¯æœºåˆ¶ è¿™äº›è®¾è®¡åŸåˆ™ä¸ä»…é€‚ç”¨äºå­¦ä¹ åŠ©æ‰‹ï¼Œä¹Ÿé€‚ç”¨äºå…¶ä»–æ™ºèƒ½ä½“åº”ç”¨åœºæ™¯ï¼Œå¦‚ä¸ªäººåŠ©æ‰‹ã€çŸ¥è¯†ç®¡ç†ã€æ•™è‚²åŸ¹è®­ç­‰ã€‚\n","date":"2026-02-26T21:42:09+08:00","permalink":"https://impself.github.io/p/agent-08-memory-and-retrieval/","title":"Agent 08-è®°å¿†ä¸æ£€ç´¢"},{"content":"å½“å‰ï¼Œæ™ºèƒ½ä½“ä¸ LLM åº”ç”¨çš„ä½ä»£ç å¹³å°å¸‚åœºå‘ˆç°å‡ºç™¾èŠ±é½æ”¾çš„æ€åŠ¿ï¼Œæ¯ä¸ªå¹³å°éƒ½æœ‰å…¶ç‹¬ç‰¹çš„å®šä½å’Œä¼˜åŠ¿ã€‚é€‰æ‹©å“ªä¸ªå¹³å°ï¼Œå¾€å¾€å–å†³äºä½ çš„æ ¸å¿ƒéœ€æ±‚ã€æŠ€æœ¯èƒŒæ™¯ä»¥åŠé¡¹ç›®çš„æœ€ç»ˆç›®æ ‡ã€‚åœ¨æœ¬ç« çš„åç»­å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å¹¶å®æ“ä¸‰ä¸ªå„å…·ä»£è¡¨æ€§çš„å¹³å°ï¼šCozeã€Difyå’Œ n8nã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¯¹å®ƒä»¬è¿›è¡Œä¸€ä¸ªæ¦‚è¦æ€§çš„ä»‹ç»ã€‚\nCoze\næ ¸å¿ƒå®šä½ï¼šç”±å­—èŠ‚è·³åŠ¨æ¨å‡ºçš„ Coze[1]ï¼Œä¸»æ‰“é›¶ä»£ç /ä½ä»£ç çš„ Agent çš„æ„å»ºä½“éªŒï¼Œè®©ä¸å…·å¤‡ç¼–ç¨‹èƒŒæ™¯çš„ç”¨æˆ·ä¹Ÿèƒ½è½»æ¾åˆ›é€ ã€‚ ç‰¹ç‚¹åˆ†æï¼šCoze æ‹¥æœ‰æå…¶å‹å¥½çš„å¯è§†åŒ–ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥åƒæ­å»ºä¹é«˜ç§¯æœ¨ä¸€æ ·ï¼Œé€šè¿‡æ‹–æ‹½æ’ä»¶ã€é…ç½®çŸ¥è¯†åº“å’Œè®¾å®šå·¥ä½œæµæ¥åˆ›å»ºæ™ºèƒ½ä½“ã€‚å…¶å†…ç½®äº†æä¸ºä¸°å¯Œçš„æ’ä»¶åº“ï¼Œå¹¶æ”¯æŒä¸€é”®å‘å¸ƒåˆ°æŠ–éŸ³ã€é£ä¹¦ã€å¾®ä¿¡å…¬ä¼—å·ç­‰å¤šä¸ªä¸»æµå¹³å°ï¼Œæå¤§åœ°ç®€åŒ–äº†åˆ†å‘æµç¨‹ã€‚ é€‚ç”¨äººç¾¤ï¼šAI åº”ç”¨çš„å…¥é—¨ç”¨æˆ·ã€äº§å“ç»ç†ã€è¿è¥äººå‘˜ï¼Œä»¥åŠå¸Œæœ›å¿«é€Ÿå°†åˆ›æ„å˜ä¸ºå¯äº¤äº’äº§å“çš„ä¸ªäººåˆ›ä½œè€…ã€‚ Dify\næ ¸å¿ƒå®šä½ï¼šDify æ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŠŸèƒ½å…¨é¢çš„ LLM åº”ç”¨å¼€å‘ä¸è¿è¥å¹³å°[2]ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä»åŸå‹æ„å»ºåˆ°ç”Ÿäº§éƒ¨ç½²çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚ ç‰¹ç‚¹åˆ†æï¼šå®ƒèåˆäº†åç«¯æœåŠ¡å’Œæ¨¡å‹è¿è¥çš„ç†å¿µï¼Œæ”¯æŒ Agent å·¥ä½œæµã€RAG Pipelineã€æ•°æ®æ ‡æ³¨ä¸å¾®è°ƒç­‰å¤šç§èƒ½åŠ›ã€‚å¯¹äºè¿½æ±‚ä¸“ä¸šã€ç¨³å®šã€å¯æ‰©å±•çš„ä¼ä¸šçº§åº”ç”¨è€Œè¨€ï¼ŒDify æä¾›äº†åšå®çš„åŸºç¡€ã€‚ é€‚ç”¨äººç¾¤ï¼šæœ‰ä¸€å®šæŠ€æœ¯èƒŒæ™¯çš„å¼€å‘è€…ã€éœ€è¦æ„å»ºå¯æ‰©å±•çš„ä¼ä¸šçº§ AI åº”ç”¨çš„å›¢é˜Ÿã€‚ n8n\næ ¸å¿ƒå®šä½ï¼šn8n æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·[3]ï¼Œè€Œéçº¯ç²¹çš„ LLM å¹³å°ã€‚è¿‘å¹´æ¥ï¼Œå®ƒç§¯æé›†æˆäº† AI èƒ½åŠ›ã€‚\nç‰¹ç‚¹åˆ†æï¼šn8n çš„å¼ºé¡¹åœ¨äºâ€œè¿æ¥â€ã€‚å®ƒæ‹¥æœ‰æ•°ç™¾ä¸ªé¢„ç½®çš„èŠ‚ç‚¹ï¼Œå¯ä»¥è½»æ¾åœ°å°†å„ç±» SaaS æœåŠ¡ã€æ•°æ®åº“ã€API è¿æ¥æˆå¤æ‚çš„è‡ªåŠ¨åŒ–ä¸šåŠ¡æµç¨‹ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªæµç¨‹ä¸­åµŒå…¥ LLM èŠ‚ç‚¹ï¼Œä½¿å…¶æˆä¸ºæ•´ä¸ªè‡ªåŠ¨åŒ–é“¾è·¯ä¸­çš„ä¸€ç¯ã€‚è™½ç„¶åœ¨ LLM åŠŸèƒ½çš„ä¸“ä¸€åº¦ä¸Šä¸å¦‚å‰ä¸¤è€…ï¼Œä½†å…¶é€šç”¨è‡ªåŠ¨åŒ–èƒ½åŠ›æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ä¸è¿‡ï¼Œå…¶å­¦ä¹ æ›²çº¿ä¹Ÿç›¸å¯¹é™¡å³­ã€‚\né€‚ç”¨äººç¾¤ï¼šéœ€è¦å°† AI èƒ½åŠ›æ·±åº¦æ•´åˆè¿›ç°æœ‰ä¸šåŠ¡æµç¨‹ã€å®ç°é«˜åº¦å®šåˆ¶åŒ–è‡ªåŠ¨åŒ–çš„å¼€å‘è€…å’Œä¼ä¸š 1ï¼šCoze å·¥ä½œæµï¼š å…³å¡é€šå…³è·¯çº¿å›¾ å¯¹è¯æµï¼šNPC å¯¹è¯é€šå…³ æ’ä»¶ï¼šè§’è‰²æŠ€èƒ½å¡ çŸ¥è¯†åº“ï¼šæ¸¸æˆç™¾ç§‘å…¨ä¹¦ å¡ç‰‡ï¼šå¿«æ·é“å…·æ  æç¤ºè¯ï¼šè§’è‰²çš„ç§»åŠ¨é”® æ•°æ®åº“ï¼šâ€œäº‘å­˜æ¡£â€ å‘å¸ƒç®¡ç†ï¼šå…³å¡å®¡æ ¸å‘˜ æ¨¡å‹ç®¡ç†ï¼šæ¸¸æˆè§’è‰²åº“æˆ–è€…å«æè„¸ç³»ç»Ÿ æ•ˆæœè¯„æµ‹ï¼šé—¯å…³è¯„åˆ†ç³»ç»Ÿ\nCoze çš„ä¼˜åŠ¿ä¸å±€é™æ€§åˆ†æ ä¼˜åŠ¿:\nå¼ºå¤§çš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ: Coze å¹³å°çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶ä¸°å¯Œçš„æ’ä»¶åº“ï¼Œè¿™ä½¿å¾—æ™ºèƒ½ä½“èƒ½å¤Ÿè½»æ¾æ¥å…¥å¤–éƒ¨æœåŠ¡ä¸æ•°æ®æºï¼Œä»è€Œå®ç°åŠŸèƒ½çš„é«˜åº¦æ‰©å±•æ€§ã€‚ ç›´è§‚çš„å¯è§†åŒ–ç¼–æ’: å¹³å°æä¾›äº†ä¸€ä¸ªä½é—¨æ§›çš„å¯è§†åŒ–å·¥ä½œæµç¼–æ’ç•Œé¢ï¼Œç”¨æˆ·æ— éœ€æ·±åšçš„ç¼–ç¨‹çŸ¥è¯†ï¼Œå³å¯é€šè¿‡â€œæ‹–æ‹½â€æ–¹å¼æ„å»ºå¤æ‚çš„å·¥ä½œæµï¼Œå¤§å¤§é™ä½äº†å¼€å‘éš¾åº¦ã€‚ çµæ´»çš„æç¤ºè¯æ§åˆ¶: é€šè¿‡ç²¾ç¡®çš„è§’è‰²è®¾å®šä¸æç¤ºè¯ç¼–å†™ï¼Œç”¨æˆ·å¯ä»¥å¯¹æ™ºèƒ½ä½“çš„è¡Œä¸ºå’Œå†…å®¹ç”Ÿæˆè¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå®ç°é«˜åº¦å®šåˆ¶åŒ–çš„è¾“å‡ºã€‚è€Œä¸”è¿˜æ”¯æŒæç¤ºè¯ç®¡ç†å’Œæ¨¡æ¿ï¼Œæå¤§çš„æ–¹ä¾¿å¼€å‘è€…è¿›è¡Œæ™ºèƒ½ä½“çš„å¼€å‘ã€‚ ä¾¿æ·çš„å¤šå¹³å°éƒ¨ç½²: æ”¯æŒå°†åŒä¸€æ™ºèƒ½ä½“å‘å¸ƒåˆ°ä¸åŒçš„åº”ç”¨å¹³å°ï¼Œå®ç°äº†è·¨å¹³å°çš„æ— ç¼é›†æˆä¸åº”ç”¨ã€‚è€Œä¸”æ‰£å­è¿˜åœ¨ä¸æ–­çš„æ•´åˆæ–°å¹³å°åŠ å…¥ä»–çš„ç”Ÿæ€åœˆï¼Œè¶Šæ¥è¶Šå¤šçš„æ‰‹æœºå‚å•†å’Œç¡¬ä»¶å‚å•†éƒ½åœ¨é™†ç»­æ”¯æŒæ‰£å­æ™ºèƒ½ä½“çš„å‘å¸ƒã€‚ å±€é™æ€§:\nä¸æ”¯æŒMCP: æˆ‘è§‰å¾—è¿™æ˜¯æœ€è‡´å‘½çš„ï¼Œå°½ç®¡æ‰£å­çš„æ’ä»¶å¸‚åœºæå…¶ä¸°å¯Œï¼Œä¹Ÿæå…¶æœ‰å¸å¼•åŠ›ã€‚ä½†æ˜¯ä¸æ”¯æŒmcpå¯èƒ½ä¼šæˆä¸ºé™åˆ¶å…¶å‘å±•çš„æ·é”ï¼Œå¦‚æœæ”¾å¼€é‚£å°†æ˜¯åˆä¸€æ€æ‰‹é”ã€‚ éƒ¨åˆ†æ’ä»¶é…ç½®çš„å¤æ‚åº¦é«˜: å¯¹äºéœ€è¦ API Key æˆ–å…¶ä»–é«˜çº§å‚æ•°çš„æ’ä»¶ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦å…·å¤‡ä¸€å®šçš„æŠ€æœ¯èƒŒæ™¯æ‰èƒ½å®Œæˆæ­£ç¡®çš„é…ç½®ã€‚å¤æ‚çš„å·¥ä½œæµç¼–æ’ä¹Ÿä¸ä»…ä»…æ˜¯é›¶åŸºç¡€å°±å¯ä»¥æŒæ¡çš„ï¼Œéœ€è¦ä¸€å®šçš„jsæˆ–è€…pythonçš„åŸºç¡€ã€‚ æ— æ³•å¯¼å…¥ç¼–æ’jsonæ–‡ä»¶: ä¹‹å‰æ‰£å­æ˜¯æ²¡æœ‰å¯¼å‡ºå¯¼å…¥åŠŸèƒ½çš„ï¼Œä½†æ˜¯ç°åœ¨ä»˜è´¹ç‰ˆæ˜¯å¯ä»¥å¯¼å‡ºå¯¼å…¥çš„ï¼Œä½†æ˜¯å¯¼å‡ºå¯¼å…¥çš„ä¸æ˜¯åƒdify,n8nä¸€æ ·çš„jsonæ–‡ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªzipã€‚ä¹Ÿå°±æ˜¯è¯´ä½ åªèƒ½åœ¨æ‰£å­å¯¼å‡ºç„¶åæ‰£å­å¯¼å…¥è¿™ä¸ªzipã€‚ä¸è¿‡ä½ å–å·§çš„è¯ä¹Ÿå¯ä»¥é€‰æ‹©å¤åˆ¶ç¼–æ’ï¼Œåœ¨ç¼–æ’ç•Œé¢ctrl+aé€‰ä¸­å…¨éƒ¨ctrl+cå¤åˆ¶ç¼–æ’ï¼Œç„¶ååˆ°å¦ä¸€ä¸ªç©ºç™½çš„å·¥ä½œæµæˆ–è€…å…¶ä»–å·¥ä½œæµç²˜è´´ç¼–æ’ã€‚\nå¹³å°äºŒï¼šDify 5.3.3 Dify çš„ä¼˜åŠ¿ä¸å±€é™æ€§åˆ†æ Dify ä½œä¸ºä¸€æ¬¾é¢†å…ˆçš„ AI åº”ç”¨å¼€å‘å¹³å°ï¼Œåœ¨å¤šä¸ªæ–¹é¢å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ï¼šâ€‹\næ ¸å¿ƒä¼˜åŠ¿â€‹ å…¨æ ˆå¼å¼€å‘ä½“éªŒï¼šDify å°† RAG ç®¡é“ã€AI å·¥ä½œæµã€æ¨¡å‹ç®¡ç†ç­‰åŠŸèƒ½æ•´åˆåˆ°ä¸€ä¸ªå¹³å°ä¸­ï¼Œæä¾›ä¸€ç«™å¼çš„å¼€å‘ä½“éªŒâ€‹ ä½ä»£ç ä¸é«˜æ‰©å±•æ€§çš„å¹³è¡¡ï¼šDify åœ¨ä½ä»£ç å¼€å‘çš„ä¾¿åˆ©æ€§å’Œä¸“ä¸šå¼€å‘çš„çµæ´»æ€§ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡â€‹â€‹ ä¼ä¸šçº§å®‰å…¨ä¸åˆè§„ï¼šDify æä¾› AES-256 åŠ å¯†ã€RBAC æƒé™æ§åˆ¶å’Œå®¡è®¡æ—¥å¿—ç­‰åŠŸèƒ½ï¼Œæ»¡è¶³ä¸¥æ ¼çš„å®‰å…¨å’Œåˆè§„è¦æ±‚â€‹â€‹ ä¸°å¯Œçš„å·¥å…·é›†æˆèƒ½åŠ›ï¼šDify æ”¯æŒ 9000 + å·¥å…·å’Œ API æ‰©å±•ï¼Œæä¾›äº†å¹¿æ³›çš„åŠŸèƒ½æ‰©å±•æ€§â€‹ æ´»è·ƒçš„å¼€æºç¤¾åŒºï¼šDify æ‹¥æœ‰æ´»è·ƒçš„å¼€æºç¤¾åŒºï¼Œæä¾›äº†ä¸°å¯Œçš„å­¦ä¹ èµ„æºå’Œæ”¯æŒâ€‹ ä¸»è¦å±€é™â€‹ å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼šå¯¹äºå®Œå…¨æ²¡æœ‰æŠ€æœ¯èƒŒæ™¯çš„ç”¨æˆ·ï¼Œä»ç„¶å­˜åœ¨ä¸€å®šçš„å­¦ä¹ æ›²çº¿â€‹â€‹ æ€§èƒ½ç“¶é¢ˆï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½é¢ä¸´æ€§èƒ½æŒ‘æˆ˜ï¼Œéœ€è¦è¿›è¡Œé€‚å½“çš„ä¼˜åŒ–â€‹ã€‚Dify ç³»ç»Ÿçš„æ ¸å¿ƒæœåŠ¡ç«¯ç»„ä»¶ç”± Python è¯­è¨€å®ç°ï¼Œä¸ C++ã€Golangã€Rust ç­‰è¯­è¨€ç›¸æ¯”ï¼Œæ€§èƒ½è¡¨ç°ç›¸å¯¹è¾ƒå·®â€‹ å¤šæ¨¡æ€æ”¯æŒä¸è¶³ï¼šå½“å‰ä¸»è¦ä»¥æ–‡æœ¬å¤„ç†ä¸ºä¸»ï¼Œå¯¹å›¾åƒã€è§†é¢‘ã€HTMLç­‰çš„æ”¯æŒæœ‰é™â€‹â€‹ ä¼ä¸šç‰ˆæˆæœ¬è¾ƒé«˜ï¼šDify çš„ä¼ä¸šç‰ˆå®šä»·ç›¸å¯¹è¾ƒé«˜ï¼Œå¯èƒ½è¶…å‡ºå°å‹å›¢é˜Ÿçš„é¢„ç®—â€‹â€‹ API å…¼å®¹æ€§é—®é¢˜ï¼šDify çš„ API æ ¼å¼ä¸å…¼å®¹ OpenAIï¼Œå¯èƒ½é™åˆ¶ä¸æŸäº›ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„é›†æˆâ€‹\n","date":"2026-02-18T16:05:09+08:00","permalink":"https://impself.github.io/p/agent-05-low-code-agent/","title":"Agent 05-åŸºäºä½ä»£ç å¹³å°æ„å»ºæ™ºèƒ½ä½“"},{"content":"å¼•è¨€ åœ¨å‰ä¸‰ç« çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†å…³äºå¤§è¯­è¨€æ¨¡å‹çš„åŸºç¡€çŸ¥è¯†ã€‚æœ¬ç« å°†è¿›å…¥å®è·µç¯èŠ‚ï¼Œé€šè¿‡\u0026quot;äº²æ‰‹é€ è½®å­\u0026quot;çš„æ–¹å¼ï¼Œä»é›¶å¼€å§‹ç¼–ç å®ç°ä¸‰ç§ä¸šç•Œç»å…¸çš„æ™ºèƒ½ä½“æ„å»ºèŒƒå¼ï¼š\nReAct â€” æ¨ç†ä¸è¡ŒåŠ¨ç»“åˆ Plan-and-Solve â€” è§„åˆ’ä¸æ‰§è¡Œåˆ†ç¦» Reflection â€” è‡ªæˆ‘åæ€ä¸è¿­ä»£ä¼˜åŒ– æˆ‘ä»¬å°†æ·±å…¥æ¢ç´¢å®ƒä»¬çš„æ ¸å¿ƒå·¥ä½œåŸç†ï¼Œå¹¶é€šè¿‡å…·ä½“çš„å®æˆ˜æ¡ˆä¾‹ï¼Œåˆ†æå„è‡ªçš„ä¼˜åŠ¿ã€å±€é™ä¸é€‚ç”¨åœºæ™¯ã€‚\næ ¸å¿ƒçŸ¥è¯†ç‚¹æ¦‚è§ˆ 1. ReActï¼šæ€è€ƒ-è¡ŒåŠ¨çš„åŠ¨æ€å¾ªç¯ ReAct èŒƒå¼æ„å»ºäº†ä¸€ä¸ªèƒ½ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„æ™ºèƒ½ä½“ã€‚å…¶æ ¸å¿ƒæœºåˆ¶æ˜¯ \u0026ldquo;æ€è€ƒ(Thought) â†’ è¡ŒåŠ¨(Action) â†’ è§‚å¯Ÿ(Observation)\u0026rdquo; çš„åŠ¨æ€å¾ªç¯ã€‚\næ ¸å¿ƒä¼˜åŠ¿ï¼š\nç¯å¢ƒé€‚åº”æ€§å¼ºï¼Œèƒ½å¤Ÿåˆ©ç”¨å¤–éƒ¨å·¥å…· å…·å¤‡åŠ¨æ€çº é”™èƒ½åŠ› é€‚åˆå¤„ç†æ¢ç´¢æ€§ã€éœ€è¦å®æ—¶ä¿¡æ¯çš„ä»»åŠ¡ å…¸å‹åº”ç”¨åœºæ™¯ï¼š\néœ€è¦æœç´¢å¼•æ“è¾…åŠ©çš„é—®ç­” å®æ—¶æ•°æ®æŸ¥è¯¢ API è°ƒç”¨ä¸äº¤äº’å¼ä»»åŠ¡ 2. Plan-and-Solveï¼šå…ˆè§„åˆ’ï¼Œåæ‰§è¡Œ Plan-and-Solve èŒƒå¼å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºæ¸…æ™°çš„æ­¥éª¤ï¼Œç„¶åé€ä¸€æ‰§è¡Œã€‚\næ‰§è¡Œæµç¨‹ï¼š\n1 è¾“å…¥é—®é¢˜ â†’ è§„åˆ’é˜¶æ®µï¼ˆç”Ÿæˆæ­¥éª¤åˆ—è¡¨ï¼‰ â†’ æ‰§è¡Œé˜¶æ®µï¼ˆé€æ­¥å®Œæˆï¼‰ æ ¸å¿ƒä¼˜åŠ¿ï¼š\nç»“æ„æ€§å¼ºï¼Œé€»è¾‘æ¸…æ™° ç¨³å®šæ€§é«˜ï¼Œæ¨ç†è·¯å¾„ç¡®å®š é€‚åˆé€»è¾‘è·¯å¾„å›ºå®šã€å†…éƒ¨æ¨ç†å¯†é›†çš„ä»»åŠ¡ å…¸å‹åº”ç”¨åœºæ™¯ï¼š\nå¤šæ­¥æ•°å­¦æ¨ç† å¤æ‚é—®é¢˜åˆ†è§£ æµç¨‹åŒ–ä»»åŠ¡å¤„ç† 3. Reflectionï¼šæ‰§è¡Œ-åæ€-ä¼˜åŒ– Reflection èŒƒå¼å¼•å…¥äº†è‡ªæˆ‘ä¼˜åŒ–èƒ½åŠ›ï¼Œé€šè¿‡ \u0026ldquo;æ‰§è¡Œ â†’ åæ€ â†’ ä¼˜åŒ–\u0026rdquo; çš„è¿­ä»£å¾ªç¯æå‡è§£å†³æ–¹æ¡ˆè´¨é‡ã€‚\nè¿­ä»£æµç¨‹ï¼š\n1 åˆå§‹æ–¹æ¡ˆ â†’ æ‰§è¡Œä¸è¯„ä¼° â†’ åæ€åé¦ˆ â†’ ä¼˜åŒ–æ”¹è¿› â†’ (å¾ªç¯) â†’ æœ€ç»ˆæ–¹æ¡ˆ æ ¸å¿ƒä»·å€¼ï¼š\næ˜¾è‘—æå‡è¾“å‡ºè´¨é‡ è‡ªåŠ¨å‘ç°å¹¶ä¿®æ­£é”™è¯¯ é€‚ç”¨äºå¯¹å‡†ç¡®æ€§å’Œå¯é æ€§è¦æ±‚æé«˜çš„åœºæ™¯ å…¸å‹åº”ç”¨åœºæ™¯ï¼š\nä»£ç ç”Ÿæˆä¸ä¼˜åŒ– å­¦æœ¯å†™ä½œè¾…åŠ© å†³ç­–æ”¯æŒç³»ç»Ÿ ä¸‰ç§èŒƒå¼çš„å¯¹æ¯”åˆ†æ æœ¬ç« æ¢è®¨çš„ä¸‰ç§èŒƒå¼ï¼Œä»£è¡¨äº†æ™ºèƒ½ä½“è§£å†³é—®é¢˜çš„ä¸‰ç§ä¸åŒç­–ç•¥ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\nèŒƒå¼ æ€è€ƒæ¨¡å¼ æ ¸å¿ƒä¼˜åŠ¿ é€‚ç”¨åœºæ™¯ ReAct æ€è€ƒ-è¡ŒåŠ¨ä¸€ä½“ï¼ŒåŠ¨æ€å¾ªç¯ ç¯å¢ƒé€‚åº”ã€åŠ¨æ€çº é”™ æ¢ç´¢æ€§ä»»åŠ¡ã€å·¥å…·è°ƒç”¨ Plan-and-Solve å…ˆè§„åˆ’ï¼Œåæ‰§è¡Œ ç»“æ„ç¨³å®šã€é€»è¾‘æ¸…æ™° å¤šæ­¥æ¨ç†ã€æµç¨‹åŒ–ä»»åŠ¡ Reflection æ‰§è¡Œ-åæ€-ä¼˜åŒ–è¿­ä»£ è´¨é‡æå‡ã€è‡ªæˆ‘ä¿®æ­£ é«˜ç²¾åº¦è¦æ±‚ã€å¤æ‚è¾“å‡º ğŸ’¡ é€‰æ‹©å»ºè®®ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©å“ªç§èŒƒå¼å–å†³äºä»»åŠ¡çš„æ ¸å¿ƒéœ€æ±‚ã€‚æŸäº›å¤æ‚åœºæ™¯ä¸‹ï¼Œä¹Ÿå¯ä»¥å°†å¤šç§èŒƒå¼ç»„åˆä½¿ç”¨ã€‚\næ¶æ„ç»„åˆç¤ºä¾‹ å½“é¢ä¸´å¤æ‚ä»»åŠ¡æ—¶ï¼Œå¯ä»¥è€ƒè™‘ æ··åˆèŒƒå¼æ¶æ„ï¼š\nPlan-and-Solve è¿›è¡Œé«˜å±‚æ¬¡ä»»åŠ¡è§„åˆ’ ReAct åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¤„ç†å…·ä½“çš„æ“ä½œå’Œç¯å¢ƒäº¤äº’ Reflection å¯¹æ•´ä¸ªè¿‡ç¨‹è¿›è¡Œè‡ªæˆ‘ä¼˜åŒ–å’Œæ”¹è¿› é€‚ç”¨åœºæ™¯ï¼š æ™ºèƒ½å®¢æœç³»ç»Ÿã€è‡ªåŠ¨é©¾é©¶ã€å¤æ‚å·¥ä½œæµè‡ªåŠ¨åŒ–ç­‰ã€‚\nå°ç»“ä¸å±•æœ› è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†æ„å»ºå•ä¸ªæ™ºèƒ½ä½“çš„æ ¸å¿ƒæŠ€æœ¯ä½“ç³»ï¼š\nâœ… ç†è§£äº† ReAct çš„åŠ¨æ€äº¤äº’æœºåˆ¶ âœ… æŒæ¡äº† Plan-and-Solve çš„ç»“æ„åŒ–è§„åˆ’æ–¹æ³• âœ… å­¦ä¼šäº† Reflection çš„è‡ªæˆ‘ä¼˜åŒ–æŠ€å·§ ä¸‹ä¸€ç«™é¢„å‘Šï¼š ä¸ºäº†æ›´å¥½åœ°å°†ç†è®ºä»˜è¯¸å®è·µï¼Œä¸‹ä¸€ç« æˆ‘ä»¬å°†æ¢ç´¢ä¸åŒä½ä»£ç å¹³å°çš„ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠè½»ä»£ç æ„å»º Agentçš„å®æˆ˜æ–¹æ¡ˆã€‚\næ€è€ƒä¸ç»ƒä¹  âš ï¸ æç¤ºï¼šéƒ¨åˆ†ä¹ é¢˜æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œé‡ç‚¹åœ¨äºåŸ¹å…»å¯¹æ™ºèƒ½ä½“èŒƒå¼è®¾è®¡çš„ç»¼åˆç†è§£å’Œå®è·µèƒ½åŠ›ã€‚\nç»ƒä¹ ä¸€ï¼šèŒƒå¼ç†è§£ä¸é€‰æ‹© é—®é¢˜ 1.1ï¼šReActã€Plan-and-Solve å’Œ Reflection è¿™ä¸‰ç§èŒƒå¼åœ¨\u0026quot;æ€è€ƒ\u0026quot;ä¸\u0026quot;è¡ŒåŠ¨\u0026quot;çš„ç»„ç»‡æ–¹å¼ä¸Šæœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ èŒƒå¼ ç»„ç»‡æ–¹å¼ ReAct æ€è€ƒ-è¡ŒåŠ¨ä¸€ä½“ï¼ŒåŠ¨æ€å¾ªç¯ï¼›æ€è€ƒæŒ‡å¯¼è¡ŒåŠ¨ï¼Œè¡ŒåŠ¨ç»“æœåå“ºæ€è€ƒ Plan-and-Solve å…ˆè§„åˆ’ï¼Œåæ‰§è¡Œï¼›åˆ†é˜¶æ®µå¤„ç†ï¼Œä¸€æ¬¡è§„åˆ’å¤šæ­¥æ‰§è¡Œ Reflection æ‰§è¡Œ-åæ€-ä¼˜åŒ–ï¼›é€šè¿‡è¿­ä»£å¾ªç¯æŒç»­æå‡è´¨é‡ é—®é¢˜ 1.2ï¼šå¦‚æœè¦è®¾è®¡ä¸€ä¸ª\u0026quot;æ™ºèƒ½å®¶å±…æ§åˆ¶åŠ©æ‰‹\u0026quot;ï¼ˆéœ€è¦æ§åˆ¶ç¯å…‰ã€ç©ºè°ƒã€çª—å¸˜ç­‰å¤šä¸ªè®¾å¤‡ï¼Œå¹¶æ ¹æ®ç”¨æˆ·ä¹ æƒ¯è‡ªåŠ¨è°ƒèŠ‚ï¼‰ï¼Œä½ ä¼šé€‰æ‹©å“ªç§èŒƒå¼ä½œä¸ºåŸºç¡€æ¶æ„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æ¨èé€‰æ‹©ï¼šReAct\nç†ç”±ï¼š\næ™ºèƒ½å®¶å±…æ§åˆ¶éœ€è¦å®æ—¶å“åº”ç”¨æˆ·æŒ‡ä»¤å’Œç¯å¢ƒå˜åŒ– ReAct çš„åŠ¨æ€å¾ªç¯èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”è¿™ç§éœ€æ±‚ å…¶ç¯å¢ƒé€‚åº”æ€§å’ŒåŠ¨æ€çº é”™èƒ½åŠ›éå¸¸é€‚åˆå¤„ç†å„ç§çªå‘æƒ…å†µ é—®é¢˜ 1.3ï¼šæ˜¯å¦å¯ä»¥å°†è¿™ä¸‰ç§èŒƒå¼è¿›è¡Œç»„åˆä½¿ç”¨ï¼Ÿè¯·è®¾è®¡ä¸€ä¸ªæ··åˆèŒƒå¼çš„æ™ºèƒ½ä½“æ¶æ„ã€‚\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æ··åˆæ¶æ„è®¾è®¡ï¼š\n1 2 3 4 5 6 7 8 9 è¾“å…¥ä»»åŠ¡ â†“ [Plan-and-Solve] é«˜å±‚æ¬¡ä»»åŠ¡è§„åˆ’ â†“ [ReAct] åŠ¨æ€æ‰§è¡Œä¸ç¯å¢ƒäº¤äº’ï¼ˆæ¯ä¸€æ­¥éª¤ï¼‰ â†“ [Reflection] å…¨è¿‡ç¨‹è‡ªæˆ‘ä¼˜åŒ–ä¸æ”¹è¿› â†“ è¾“å‡ºç»“æœ é€‚ç”¨åœºæ™¯ï¼š æ™ºèƒ½å®¢æœç³»ç»Ÿã€è‡ªåŠ¨é©¾é©¶ã€å¤æ‚é¡¹ç›®ç®¡ç†ç­‰éœ€è¦åŒæ—¶å…·å¤‡è§„åˆ’èƒ½åŠ›ã€å®æ—¶äº¤äº’å’ŒæŒç»­ä¼˜åŒ–çš„åœºæ™¯ã€‚\nç»ƒä¹ äºŒï¼šè¾“å‡ºè§£æçš„é²æ£’æ€§ é—®é¢˜ 2.1ï¼šåœ¨ ReAct å®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æå¤§è¯­è¨€æ¨¡å‹çš„è¾“å‡ºã€‚å½“å‰çš„è§£ææ–¹æ³•å­˜åœ¨å“ªäº›æ½œåœ¨è„†å¼±æ€§ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æ½œåœ¨é—®é¢˜ï¼š\næ ¼å¼ä¾èµ–æ€§å¼ºï¼šå¦‚æœæ¨¡å‹è¾“å‡ºæ ¼å¼å˜åŒ–ï¼ˆå¦‚æ ‡ç­¾è¢«æ›¿æ¢æˆ–çœç•¥ï¼‰ï¼Œè§£æä¼šå¤±è´¥ é¢å¤–æ–‡æœ¬å¹²æ‰°ï¼šè¾“å‡ºä¸­åŒ…å«é¢å¤–æ–‡æœ¬æ—¶å¯èƒ½å¯¼è‡´åŒ¹é…é”™è¯¯ è¾¹ç•Œæƒ…å†µå¤„ç†ï¼šç‰¹æ®Šå­—ç¬¦ã€å¤šè¡Œè¾“å‡ºç­‰è¾¹ç•Œæƒ…å†µå®¹æ˜“å¼•å‘é—®é¢˜ é—®é¢˜ 2.2ï¼šé™¤äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿˜æœ‰å“ªäº›æ›´é²æ£’çš„è¾“å‡ºè§£ææ–¹æ¡ˆï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æ”¹è¿›æ–¹æ¡ˆï¼š\nç»“æ„åŒ–è¾“å‡ºï¼šä½¿ç”¨ JSONã€XML ç­‰æ ¼å¼è§„èŒƒæ¨¡å‹è¾“å‡º è‡ªç„¶è¯­è¨€ç†è§£ï¼šä½¿ç”¨ NLU æŠ€æœ¯è¯†åˆ«æ„å›¾å’Œå®ä½“ ä¸“ç”¨è§£æå™¨ï¼šé’ˆå¯¹ç‰¹å®šæ ¼å¼è®¾è®¡ä¸“ç”¨è§£æé€»è¾‘ æ¨¡å‹çº¦æŸï¼šä½¿ç”¨æ”¯æŒç»“æ„åŒ–è¾“å‡ºçš„æ¨¡å‹ï¼ˆå¦‚ Function Callingï¼‰ ç»ƒä¹ ä¸‰ï¼šå·¥å…·è°ƒç”¨ä¸æ‰©å±• é—®é¢˜ 3.1ï¼šä¸º ReAct æ™ºèƒ½ä½“æ·»åŠ ä¸€ä¸ª\u0026quot;è®¡ç®—å™¨\u0026quot;å·¥å…·ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†å¤æ‚çš„æ•°å­¦è®¡ç®—é—®é¢˜ã€‚\nç‚¹å‡»æŸ¥çœ‹ä»£ç ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 def calculator(expression: str) -\u0026gt; float: \u0026#34;\u0026#34;\u0026#34;å®‰å…¨åœ°è®¡ç®—æ•°å­¦è¡¨è¾¾å¼\u0026#34;\u0026#34;\u0026#34; import ast import operator as op operators = { ast.Add: op.add, ast.Sub: op.sub, ast.Mult: op.mul, ast.Div: op.truediv, } def eval_node(node): if isinstance(node, ast.Num): return node.n elif isinstance(node, ast.BinOp): left = eval_node(node.left) right = eval_node(node.right) return operators[type(node.op)](left, right) raise ValueError(f\u0026#34;ä¸æ”¯æŒçš„èŠ‚ç‚¹ç±»å‹: {type(node)}\u0026#34;) try: return eval_node(ast.parse(expression, mode=\u0026#39;eval\u0026#39;).body) except Exception as e: return f\u0026#34;è®¡ç®—é”™è¯¯: {e}\u0026#34; # æ³¨å†Œå·¥å…· tools.register(\u0026#34;calculator\u0026#34;, calculator, \u0026#34;è®¡ç®—æ•°å­¦è¡¨è¾¾å¼ï¼Œå¦‚ \u0026#39;(123 + 456) * 789 / 12\u0026#39;\u0026#34;) é—®é¢˜ 3.2ï¼šå½“å¯è°ƒç”¨å·¥å…·æ•°é‡å¢åŠ åˆ° 50-100 ä¸ªæ—¶ï¼Œå¦‚ä½•ä¼˜åŒ–å·¥å…·çš„ç»„ç»‡å’Œæ£€ç´¢æœºåˆ¶ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ ä¼˜åŒ–ç­–ç•¥ï¼š\né—®é¢˜ è§£å†³æ–¹æ¡ˆ ä¸Šä¸‹æ–‡å ç”¨å¤§ åˆ†å±‚ç»„ç»‡ï¼ŒæŒ‰éœ€åŠ è½½å·¥å…·æè¿° ç›¸ä¼¼å·¥å…·å¹²æ‰° å·¥å…·èšç±» + è¯­ä¹‰æ£€ç´¢ é€‰æ‹©é”™è¯¯ç‡é«˜ çº¦æŸæ‰§è¡Œ + ç½®ä¿¡åº¦è¿‡æ»¤ å·¥ç¨‹å®ç°ï¼š\nåˆ†å±‚ç´¢å¼•ï¼šå»ºç«‹å·¥å…·åˆ†ç±»ç›®å½•ï¼ˆç±»ç›® â†’ å­ç±» â†’ å·¥å…·ï¼‰ è¯­ä¹‰æ£€ç´¢ï¼šç”¨å‘é‡ç›¸ä¼¼åº¦æ‰¾åˆ°å€™é€‰å·¥å…·å­é›† å·¥å…·è·¯ç”±ï¼šè®­ç»ƒè½»é‡çº§è·¯ç”±æ¨¡å‹ï¼Œç›´æ¥æ˜ å°„åˆ°ç›®æ ‡å·¥å…· ç¼“å­˜ä¼˜åŒ–ï¼šç¼“å­˜å¸¸ç”¨å·¥å…·çš„è°ƒç”¨ç»“æœ ç»ƒä¹ å››ï¼šåŠ¨æ€è§„åˆ’æœºåˆ¶ é—®é¢˜ 4.1ï¼šPlan-and-Solve çš„è®¡åˆ’æ˜¯\u0026quot;é™æ€\u0026quot;çš„ï¼Œå¦‚ä½•è®¾è®¡ä¸€ä¸ª\u0026quot;åŠ¨æ€é‡è§„åˆ’\u0026quot;æœºåˆ¶ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ åŠ¨æ€é‡è§„åˆ’æœºåˆ¶è®¾è®¡ï¼š\ngraph TD A[æ‰§è¡Œæ­¥éª¤] --\u0026gt; B{ç»“æœæ ¡éªŒ} B --\u0026gt;|æˆåŠŸ| C[ç»§ç»­ä¸‹ä¸€æ­¥] B --\u0026gt;|å¤±è´¥| D{é‡è¯•æ¬¡æ•° \u0026lt; é˜ˆå€¼?} D --\u0026gt;|æ˜¯| E[å±€éƒ¨é‡è§„åˆ’] D --\u0026gt;|å¦| F[å…¨å±€é‡è§„åˆ’] E --\u0026gt; A F --\u0026gt; A å…³é”®ç»„ä»¶ï¼š\nç»“æœæ ¡éªŒæ¨¡å—ï¼šåˆ¤æ–­æ˜¯å¦æ»¡è¶³æˆåŠŸæ ‡å‡† å±€éƒ¨é‡è§„åˆ’ï¼šæ›´æ¢å·¥å…·/è°ƒæ•´å‚æ•°/æ’å…¥è¡¥å……æ­¥éª¤ å…¨å±€é‡è§„åˆ’ï¼šé‡æ–°ç”Ÿæˆåç»­æ­¥éª¤ å®‰å…¨é€€å‡ºï¼šè®¾ç½®é‡è¯•å’Œé‡è§„åˆ’æ¬¡æ•°ä¸Šé™ é—®é¢˜ 4.2ï¼šå¯¹æ¯” Plan-and-Solve ä¸ ReActï¼Œåœ¨å¤„ç†\u0026quot;é¢„è®¢å•†åŠ¡æ—…è¡Œ\u0026quot;ä»»åŠ¡æ—¶å“ªç§æ›´åˆé€‚ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ åœºæ™¯åˆ†æï¼š\n| èŒƒå¼ | ä¼˜åŠ¿ | åŠ£åŠ¿ | |:\u0026mdash;|:\u0026mdash;| | Plan-and-Solve | é€‚åˆå¤„ç†æœ‰å…³è”çš„å¤šæ­¥éª¤é¢„è®¢ | éš¾ä»¥åº”å¯¹å®æ—¶å˜åŒ–ï¼ˆå¦‚å”®ç½„ã€ä»·æ ¼è·³å˜ï¼‰ | | ReAct | èƒ½æ ¹æ®å®æ—¶ç»“æœçµæ´»è°ƒæ•´ | å¯èƒ½ç¼ºä¹æ•´ä½“è§„åˆ’ |\næœ€ä½³æ–¹æ¡ˆï¼š ç»„åˆä½¿ç”¨\nç”¨ Plan-and-Solve åšé«˜å±‚æ¬¡è§„åˆ’ï¼ˆç¡®å®šé¢„è®¢é¡ºåºå’Œçº¦æŸï¼‰ ç”¨ ReAct å¤„ç†æ¯ä¸ªå­æ­¥éª¤çš„æ‰§è¡Œä¸çº é”™ï¼ˆå¦‚æ¢æ—¥æœŸã€æ¢æœºåœºï¼‰ é—®é¢˜ 4.3ï¼šè®¾è®¡ä¸€ä¸ª\u0026quot;åˆ†å±‚è§„åˆ’\u0026quot;ç³»ç»ŸåŠå…¶ä¼˜åŠ¿ã€‚\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ åˆ†å±‚è§„åˆ’æ¶æ„ï¼š\n1 2 3 4 5 6 é«˜å±‚æŠ½è±¡è®¡åˆ’ (3-8 ä¸ªé‡Œç¨‹ç¢‘) â”œâ”€â”€ é˜¶æ®µ 1 â”‚ â””â”€â”€ ç»†åŒ–å­è®¡åˆ’ (å…·ä½“å·¥å…·ã€å‚æ•°ã€æ£€æŸ¥ç‚¹) â”œâ”€â”€ é˜¶æ®µ 2 â”‚ â””â”€â”€ ç»†åŒ–å­è®¡åˆ’ â””â”€â”€ ... æ ¸å¿ƒä¼˜åŠ¿ï¼š\nä¼˜åŠ¿ è¯´æ˜ å¯æ‰©å±• é«˜å±‚è®¡åˆ’ç¨³å®šï¼Œç»†èŠ‚æŒ‰éœ€ç”Ÿæˆ æ›´ç¨³å¥ å±€éƒ¨å¤±è´¥åªéœ€é‡è§„åˆ’å­è®¡åˆ’ å·¥å…·é€‰æ‹© æ˜ç¡®çš„æ„å›¾æ”¶çª„å€™é€‰å·¥å…·èŒƒå›´ å¯è§‚æµ‹æ€§ é«˜å±‚é‡Œç¨‹ç¢‘ä¾¿äºå®¡è®¡å’Œç›‘æ§ å¯å¤ç”¨ é«˜å±‚æ¨¡æ¿å¯è·¨ä»»åŠ¡å¤ç”¨ ç»ƒä¹ äº”ï¼šReflection æœºåˆ¶æ·±å…¥ é—®é¢˜ 5.1ï¼šä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æ¨¡å‹ï¼ˆä¸€ä¸ªæ›´å¼ºå¤§åšåæ€ï¼Œä¸€ä¸ªæ›´å¿«åšæ‰§è¡Œï¼‰ä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ åŒæ¨¡å‹æ¶æ„åˆ†æï¼š\næ”¶ç›Š ä»£ä»· ç”¨\u0026quot;é«˜æ¨ç†èƒ½åŠ›\u0026quot;æå‡æ­£ç¡®æ€§ å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ ç”¨\u0026quot;é«˜ååä½æˆæœ¬\u0026quot;æ‰¿æ‹…é‡å¤åŠ³åŠ¨ éœ€è¦æ¨¡å‹å¯¹é½ä¸è°ƒè¯• æˆæœ¬æ•ˆç›Šæ›´ä¼˜ å¢åŠ è°ƒç”¨é“¾è·¯å»¶è¿Ÿ ç»“è®ºï¼š å¯¹äºå·¥ç¨‹åŒ–é•¿æœŸè¿è¡Œçš„ç³»ç»Ÿï¼ˆå¦‚è‡ªåŠ¨ä»£ç ä»£ç†ï¼‰ï¼ŒåŒæ¨¡å‹æ¶æ„é€šå¸¸æ¯”å•æ¨¡å‹æ›´ç¨³å®šã€æ›´ç»æµã€‚\né—®é¢˜ 5.2ï¼šå¦‚ä½•è®¾è®¡æ›´æ™ºèƒ½çš„ Reflection ç»ˆæ­¢æ¡ä»¶ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æ”¹è¿›çš„ç»ˆæ­¢æ¡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 def should_terminate(iteration, history): # 1. è´¨é‡è¯„åˆ†é˜ˆå€¼ if latest_score \u0026gt;= 0.95: return True, \u0026#34;è´¨é‡è¾¾æ ‡\u0026#34; # 2. æ”¹è¿›å¹…åº¦æ£€æµ‹ if abs(latest_score - previous_score) \u0026lt; 0.01: return True, \u0026#34;æ”¹è¿›é¥±å’Œ\u0026#34; # 3. å¤–éƒ¨è¯„ä¼°é€šè¿‡ if all_tests_passed(): return True, \u0026#34;æµ‹è¯•é€šè¿‡\u0026#34; # 4. è¿­ä»£æ¬¡æ•°ä¸Šé™ if iteration \u0026gt;= max_iterations: return True, \u0026#34;è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°\u0026#34; return False, \u0026#34;ç»§ç»­ä¼˜åŒ–\u0026#34; å¤šç»´åº¦åˆ¤æ–­ï¼š è´¨é‡è¯„åˆ†ã€æ”¹è¿›å¹…åº¦ã€å¤–éƒ¨æµ‹è¯•ã€è®¡ç®—é¢„ç®—\né—®é¢˜ 5.3ï¼šè®¾è®¡ä¸€ä¸ª\u0026quot;å­¦æœ¯è®ºæ–‡å†™ä½œåŠ©æ‰‹\u0026quot;çš„å¤šç»´åº¦ Reflection æœºåˆ¶ã€‚\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ å¤šç»´åº¦è¯„ä¼°ä½“ç³»ï¼š\ngraph TD A[è®ºæ–‡åˆç¨¿] --\u0026gt; B[æ®µè½é€»è¾‘æ€§è¯„ä¼°] A --\u0026gt; C[æ–¹æ³•åˆ›æ–°æ€§è¯„ä¼°] A --\u0026gt; D[è¯­è¨€è¡¨è¾¾è¯„ä¼°] A --\u0026gt; E[å¼•ç”¨è§„èŒƒè¯„ä¼°] B --\u0026gt; F[ç»¼åˆåé¦ˆæŠ¥å‘Š] C --\u0026gt; F D --\u0026gt; F E --\u0026gt; F F --\u0026gt; G[é’ˆå¯¹æ€§ä¼˜åŒ–] G --\u0026gt; H{ç»ˆæ­¢æ¡ä»¶æ»¡è¶³?} H --\u0026gt;|å¦| A H --\u0026gt;|æ˜¯| I[æœ€ç»ˆè®ºæ–‡] è¯„ä¼°ç»´åº¦ï¼š\næ®µè½é€»è¾‘æ€§ï¼šè¿è´¯æ€§ä¸ç»“æ„åˆç†æ€§ æ–¹æ³•åˆ›æ–°æ€§ï¼šç§‘å­¦è´¡çŒ®ä¸æŠ€æœ¯äº®ç‚¹ è¯­è¨€è¡¨è¾¾ï¼šè¯­æ³•ã€ç”¨è¯ã€æµç•…åº¦ å¼•ç”¨è§„èŒƒï¼šæ ¼å¼æ­£ç¡®æ€§ä¸å¼•ç”¨å®Œæ•´æ€§ ç»ƒä¹ å…­ï¼šæç¤ºè¯å·¥ç¨‹ é—®é¢˜ 6.1ï¼šReAct å’Œ Plan-and-Solve çš„æç¤ºè¯ç»“æ„è®¾è®¡æœ‰ä½•ä¸åŒï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ èŒƒå¼ æç¤ºè¯è®¾è®¡é‡ç‚¹ ReAct å¼ºè°ƒ\u0026quot;Thought-Action-Observation\u0026quot;å¾ªç¯ï¼Œæ˜ç¡®ä¸‰è€…è§’è‰²å®šä¹‰ Plan-and-Solve å¼ºè°ƒåˆ†é˜¶æ®µå¤„ç†ï¼Œæ˜ç¡®è§„åˆ’é˜¶æ®µå’Œæ‰§è¡Œé˜¶æ®µçš„è¾¹ç•Œ æ ¸å¿ƒå·®å¼‚ï¼šæç¤ºè¯ç»“æ„è®¾è®¡ç›´æ¥æœåŠ¡äºå„è‡ªèŒƒå¼çš„æ‰§è¡Œé€»è¾‘ã€‚\né—®é¢˜ 6.2ï¼šè§’è‰²è®¾å®šå¯¹æ™ºèƒ½ä½“è¡Œä¸ºçš„å½±å“ã€‚\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ è§’è‰²è®¾å®šå¯¹æ¯”ï¼š\nè§’è‰² è¾“å‡ºå€¾å‘ \u0026ldquo;ä¸¥æ ¼çš„ä»£ç è¯„å®¡ä¸“å®¶\u0026rdquo; å…³æ³¨æ­£ç¡®æ€§ã€æ€§èƒ½ã€å®‰å…¨æ€§ \u0026ldquo;æ³¨é‡å¯è¯»æ€§çš„å¼€æºç»´æŠ¤è€…\u0026rdquo; å…³æ³¨æ¸…æ™°åº¦ã€æ³¨é‡Šã€ç»“æ„ \u0026ldquo;æ³¨é‡æ•ˆç‡çš„å·¥ç¨‹ç»ç†\u0026rdquo; å…³æ³¨å¼€å‘é€Ÿåº¦ã€å¯ç»´æŠ¤æ€§ ç»“è®ºï¼š è§’è‰²è®¾å®šæ˜¯å¼•å¯¼æ¨¡å‹è¡Œä¸ºçš„é‡è¦æ‰‹æ®µï¼Œåº”æ ¹æ®ç›®æ ‡åœºæ™¯ç²¾å¿ƒè®¾è®¡ã€‚\né—®é¢˜ 6.3ï¼šFew-shot ç¤ºä¾‹çš„æ•ˆæœåˆ†æã€‚\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æ–¹æ¡ˆ ä¼˜ç‚¹ ç¼ºç‚¹ é€‚ç”¨åœºæ™¯ æ—  Few-shot çµæ´»ã€èŠ‚çœ token æ ¼å¼ä¸ç¨³å®š åˆ›æ„æ€§ä»»åŠ¡ æœ‰ Few-shot ç¨³å®šæ€§é«˜ã€æ ¼å¼éµå¾ªå¥½ token æ¶ˆè€—å¤§ ç»“æ„åŒ–è¾“å‡ºä»»åŠ¡ å»ºè®®ï¼š å¯¹äºéœ€è¦ç»“æ„åŒ–è¾“å‡ºçš„æ™ºèƒ½ä½“ï¼ˆå¦‚ Reflectionã€Plannerï¼‰ï¼ŒFew-shot æ˜¯å¿…è¦è€Œéå¯é€‰çš„ä¼˜åŒ–ã€‚\nç»ƒä¹ ä¸ƒï¼šç»¼åˆå®æˆ˜ åœºæ™¯ï¼š æŸç”µå•†å…¬å¸å¸Œæœ›æ­å»º\u0026quot;å®¢æœæ™ºèƒ½ä½“\u0026quot;ï¼Œéœ€è¦ä»¥ä¸‹åŠŸèƒ½ï¼š\nç†è§£ç”¨æˆ·çš„é€€æ¬¾ç”³è¯·ç†ç”± æŸ¥è¯¢ç”¨æˆ·çš„è®¢å•ä¿¡æ¯å’Œç‰©æµçŠ¶æ€ æ ¹æ®å…¬å¸æ”¿ç­–æ™ºèƒ½åˆ¤æ–­æ˜¯å¦æ‰¹å‡†é€€æ¬¾ ç”Ÿæˆå¾—ä½“çš„å›å¤é‚®ä»¶å¹¶å‘é€ äº‰è®®æƒ…å†µä¸‹è¿›è¡Œè‡ªæˆ‘åæ€ é—®é¢˜ 7.1ï¼šé€‰æ‹©ä½•ç§èŒƒå¼ä½œä¸ºæ ¸å¿ƒæ¶æ„ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æ¨èæ¶æ„ï¼šReAct + Reflection\nç»„ä»¶ èŒè´£ ReAct åŠ¨æ€è°ƒç”¨å·¥å…·æŸ¥è¯¢è®¢å•ã€ç‰©æµï¼Œåšå‡ºåˆæ­¥åˆ¤æ–­ Reflection å¯¹äº‰è®®å†³ç­–è¿›è¡Œåæ€ï¼Œæä¾›æ›´å®¡æ…çš„å»ºè®® é—®é¢˜ 7.2ï¼šç³»ç»Ÿéœ€è¦å“ªäº›æ ¸å¿ƒå·¥å…·ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ å·¥å…· åŠŸèƒ½æè¿° è®¢å•æŸ¥è¯¢å·¥å…· æ ¹æ®ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢è®¢å•è¯¦æƒ…å’Œç‰©æµçŠ¶æ€ æ”¿ç­–åˆ¤æ–­å·¥å…· æ ¹æ®é€€æ¬¾æ”¿ç­–è¯„ä¼°ç”³è¯·æ˜¯å¦ç¬¦åˆæ¡ä»¶ é‚®ä»¶ç”Ÿæˆå·¥å…· ç”Ÿæˆå¾—ä½“å›å¤å¹¶å‘é€è‡³ç”¨æˆ·é‚®ç®± æƒ…æ„Ÿåˆ†æå·¥å…· åˆ†æç”¨æˆ·æƒ…ç»ªï¼Œè°ƒæ•´å›å¤è¯­æ°” é—®é¢˜ 7.3ï¼šå¦‚ä½•è®¾è®¡æç¤ºè¯ä»¥å¹³è¡¡å…¬å¸åˆ©ç›Šä¸ç”¨æˆ·ä½“éªŒï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ æç¤ºè¯è®¾è®¡ç­–ç•¥ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 # è§’è‰²è®¾å®š ä½ æ˜¯ä¸€ä½ä¸“ä¸šä¸”å‹å¥½çš„å®¢æœä»£è¡¨ï¼Œä»£è¡¨å…¬å¸å¤„ç†é€€æ¬¾ç”³è¯·ã€‚ # å†³ç­–åŸåˆ™ 1. ä¸¥æ ¼éµå®ˆå…¬å¸é€€æ¬¾æ”¿ç­– 2. åœ¨ä¿æŠ¤å…¬å¸åˆ©ç›Šçš„å‰æä¸‹ï¼Œå°½å¯èƒ½æ»¡è¶³ç”¨æˆ·éœ€æ±‚ 3. å¯¹ç”¨æˆ·è¡¨è¾¾ç†è§£å’Œå…³å¿ƒ # å›å¤è¦æ±‚ - è¯­æ°”å‹å¥½ã€ä¸“ä¸š - æ¸…æ™°è¯´æ˜å†³ç­–ç†ç”± - æä¾›æ›¿ä»£æ–¹æ¡ˆï¼ˆå¦‚é€‚ç”¨ï¼‰ é—®é¢˜ 7.4ï¼šäº§å“ä¸Šçº¿å¯èƒ½é¢ä¸´å“ªäº›é£é™©ï¼Ÿå¦‚ä½•é™ä½ï¼Ÿ\nç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ é£é™©ç±»å‹ é£é™©æè¿° ç¼“è§£æªæ–½ é”™è¯¯å†³ç­– è¯¯æ‰¹/è¯¯æ‹’é€€æ¬¾ç”³è¯· å¤šæ¨¡å‹è¯„ä¼° + äººå·¥å®¡æ ¸å…œåº• éšç§æ³„éœ² ç”¨æˆ·æ•°æ®æš´éœ² æ•°æ®åŠ å¯† + è®¿é—®æ§åˆ¶ + å®¡è®¡ ä½“éªŒä¸‹é™ å›å¤ä¸å½“å¯¼è‡´ç”¨æˆ·ä¸æ»¡ æŒç»­ä¼˜åŒ–æç¤ºè¯ + åé¦ˆæœºåˆ¶ ç³»ç»Ÿç¨³å®šæ€§ æœåŠ¡ä¸­æ–­å½±å“ç”¨æˆ· å†—ä½™æ¶æ„ + ç›‘æ§å‘Šè­¦ + å®šæœŸç»´æŠ¤ ç»“è¯­ æœ¬ç« é€šè¿‡ä¸‰ç§ç»å…¸èŒƒå¼çš„å®è·µï¼Œå»ºç«‹äº†æ„å»ºæ™ºèƒ½ä½“å®Œæ•´æŠ€æœ¯æ ˆçš„è®¤çŸ¥ã€‚ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†èµ°è¿›ä½ä»£ç å¹³å°çš„ä¸–ç•Œï¼Œæ¢ç´¢æ›´é«˜æ•ˆçš„ Agent æ„å»ºæ–¹å¼ã€‚\næ•¬è¯·æœŸå¾…ï¼\n","date":"2026-02-18T13:24:09+08:00","permalink":"https://impself.github.io/p/agent-04-agent-classic-paradigm/","title":"Agent 04-æ™ºèƒ½ä½“ç»å…¸èŒƒå¼æ„å»º"},{"content":"1.è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œè¯­è¨€æ¨¡å‹ç»å†äº†ä»ç»Ÿè®¡åˆ°ç¥ç»ç½‘ç»œçš„æ¨¡å‹æ¼”è¿›ã€‚\nè¯·ä½¿ç”¨æœ¬ç« æä¾›çš„è¿·ä½ è¯­æ–™åº“ï¼ˆdatawhale agent learns, datawhale agent worksï¼‰ï¼Œè®¡ç®—å¥å­ agent works åœ¨Bigramæ¨¡å‹ä¸‹çš„æ¦‚ç‡ N-gramæ¨¡å‹çš„æ ¸å¿ƒå‡è®¾æ˜¯é©¬å°”å¯å¤«å‡è®¾ã€‚è¯·è§£é‡Šè¿™ä¸ªå‡è®¾çš„å«ä¹‰ï¼Œä»¥åŠN-gramæ¨¡å‹å­˜åœ¨å“ªäº›æ ¹æœ¬æ€§å±€é™ï¼Ÿ ç¥ç»ç½‘ç»œè¯­è¨€æ¨¡å‹ï¼ˆRNN/LSTMï¼‰å’ŒTransformeråˆ†åˆ«æ˜¯å¦‚ä½•å…‹æœN-gramæ¨¡å‹å±€é™çš„ï¼Ÿå®ƒä»¬å„è‡ªçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ 2.Transformeræ¶æ„[4]æ˜¯ç°ä»£å¤§è¯­è¨€æ¨¡å‹çš„åŸºç¡€ã€‚å…¶ä¸­ï¼š\næç¤ºï¼šå¯ä»¥ç»“åˆæœ¬ç« 3.1.2èŠ‚çš„ä»£ç å®ç°æ¥è¾…åŠ©ç†è§£\nè‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆSelf-Attentionï¼‰çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ è‡ªæ³¨æ„åŠ› (Self-Attention) æœºåˆ¶å°±æ˜¯å¯¹è¿™ç§ç°è±¡çš„æ•°å­¦å»ºæ¨¡ã€‚å®ƒå…è®¸æ¨¡å‹åœ¨å¤„ç†åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¯æ—¶ï¼Œéƒ½èƒ½å…¼é¡¾å¥å­ä¸­çš„æ‰€æœ‰å…¶ä»–è¯ï¼Œå¹¶ä¸ºè¿™äº›è¯åˆ†é…ä¸åŒçš„â€œæ³¨æ„åŠ›æƒé‡â€ã€‚æƒé‡è¶Šé«˜çš„è¯ï¼Œä»£è¡¨å…¶ä¸å½“å‰è¯çš„å…³è”æ€§è¶Šå¼ºï¼Œå…¶ä¿¡æ¯ä¹Ÿåº”è¯¥åœ¨å½“å‰è¯çš„è¡¨ç¤ºä¸­å æ®æ›´å¤§çš„æ¯”é‡ã€‚\nä¸ºä»€ä¹ˆTransformerèƒ½å¤Ÿå¹¶è¡Œå¤„ç†åºåˆ—ï¼Œè€ŒRNNå¿…é¡»ä¸²è¡Œå¤„ç†ï¼Ÿä½ç½®ç¼–ç ï¼ˆPositional Encodingï¼‰åœ¨å…¶ä¸­èµ·ä»€ä¹ˆä½œç”¨ï¼Ÿ å®ƒå®Œå…¨æŠ›å¼ƒäº†å¾ªç¯ç»“æ„ï¼Œè½¬è€Œä½¿ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶æ¥æ•æ‰åºåˆ—ä¸­çš„ä¾èµ–å…³ç³»ã€‚è¿™ä½¿å¾—Transformerèƒ½å¤ŸåŒæ—¶å¤„ç†åºåˆ—ä¸­çš„æ‰€æœ‰ä½ç½®ï¼Œä»è€Œå®ç°å¹¶è¡Œè®¡ç®—ã€‚ä½ç½®ç¼–ç åˆ™ä¸ºæ¨¡å‹æä¾›äº†åºåˆ—ä¸­å„ä¸ªè¯çš„ä½ç½®ä¿¡æ¯ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿç†è§£è¯ä¸è¯ä¹‹é—´çš„é¡ºåºå…³ç³»ã€‚ RNNè¿™ç§å¾ªç¯çš„è®¡ç®—æ–¹å¼ä¹Ÿå¸¦æ¥äº†æ–°çš„ç“¶é¢ˆï¼šå®ƒå¿…é¡»æŒ‰é¡ºåºå¤„ç†æ•°æ®ã€‚ç¬¬ t ä¸ªæ—¶é—´æ­¥çš„è®¡ç®—ï¼Œå¿…é¡»ç­‰å¾…ç¬¬ tâˆ’1 ä¸ªæ—¶é—´æ­¥å®Œæˆåæ‰èƒ½å¼€å§‹ã€‚\nDecoder-Onlyæ¶æ„ä¸å®Œæ•´çš„Encoder-Decoderæ¶æ„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆç°åœ¨ä¸»æµçš„å¤§è¯­è¨€æ¨¡å‹éƒ½é‡‡ç”¨Decoder-Onlyæ¶æ„ï¼Ÿ ç¼–ç å™¨è´Ÿè´£æ·±å…¥ç†è§£è¾“å…¥çš„æ•´ä¸ªå¥å­ï¼Œå½¢æˆä¸€ä¸ªåŒ…å«å…¨å±€ä¿¡æ¯çš„ä¸Šä¸‹æ–‡è®°å¿†ï¼Œç„¶åè§£ç å™¨åŸºäºè¿™ä»½è®°å¿†æ¥ç”Ÿæˆç¿»è¯‘ å®ƒå®Œå…¨æŠ›å¼ƒäº†ç¼–ç å™¨ï¼Œåªä¿ç•™äº†è§£ç å™¨éƒ¨åˆ† è®­ç»ƒç›®æ ‡ç»Ÿä¸€ï¼šæ¨¡å‹çš„å”¯ä¸€ä»»åŠ¡å°±æ˜¯â€œé¢„æµ‹ä¸‹ä¸€ä¸ªè¯â€ï¼Œè¿™ä¸ªç®€å•çš„ç›®æ ‡éå¸¸é€‚åˆåœ¨æµ·é‡çš„æ— æ ‡æ³¨æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œé¢„è®­ç»ƒã€‚ ç»“æ„ç®€å•ï¼Œæ˜“äºæ‰©å±•ï¼šæ›´å°‘çš„ç»„ä»¶æ„å‘³ç€æ›´å®¹æ˜“è¿›è¡Œè§„æ¨¡åŒ–æ‰©å±•ã€‚ä»Šå¤©çš„ GPT-4ã€Llama ç­‰æ‹¥æœ‰æ•°åƒäº¿ç”šè‡³ä¸‡äº¿å‚æ•°çš„å·¨å‹æ¨¡å‹ï¼Œéƒ½æ˜¯åŸºäºè¿™ç§ç®€æ´çš„æ¶æ„ã€‚ å¤©ç„¶é€‚åˆç”Ÿæˆä»»åŠ¡ï¼šå…¶è‡ªå›å½’çš„å·¥ä½œæ¨¡å¼ä¸æ‰€æœ‰ç”Ÿæˆå¼ä»»åŠ¡ï¼ˆå¯¹è¯ã€å†™ä½œã€ä»£ç ç”Ÿæˆç­‰ï¼‰å®Œç¾å¥‘åˆï¼Œè¿™ä¹Ÿæ˜¯å®ƒèƒ½æˆä¸ºæ„å»ºé€šç”¨æ™ºèƒ½ä½“åŸºç¡€çš„æ ¸å¿ƒåŸå› ã€‚\n3.æ–‡æœ¬å­è¯åˆ†è¯ç®—æ³•æ˜¯å¤§è¯­è¨€æ¨¡å‹çš„ä¸€é¡¹å…³é”®æŠ€æœ¯ï¼Œè´Ÿè´£å°†æ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹å¯å¤„ç†çš„ token åºåˆ—ã€‚é‚£ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ä»¥\u0026quot;å­—ç¬¦\u0026quot;æˆ–\u0026quot;å•è¯\u0026quot;ä½œä¸ºæ¨¡å‹çš„è¾“å…¥å•å…ƒï¼ŸBPEï¼ˆByte Pair Encodingï¼‰ç®—æ³•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ ç»Ÿä¸€è¾“å…¥å•å…ƒï¼šå­—ç¬¦çº§æ¨¡å‹è¿‡äºç»†ç²’åº¦ï¼Œå¯¼è‡´åºåˆ—è¿‡é•¿ï¼›å•è¯çº§æ¨¡å‹åˆ™è¿‡äºç²—ç²’åº¦ï¼Œæ— æ³•å¤„ç†æœªç™»å½•è¯ï¼ˆOOVï¼‰ã€‚ BPEé€šè¿‡å­è¯åˆ†å‰²ï¼Œæä¾›äº†ä¸€ä¸ªå¹³è¡¡çš„è¾“å…¥å•å…ƒã€‚\n4.æœ¬ç« 3.2.3èŠ‚ä»‹ç»äº†å¦‚ä½•æœ¬åœ°éƒ¨ç½²å¼€æºå¤§è¯­è¨€æ¨¡å‹ã€‚è¯·å®Œæˆä»¥ä¸‹å®è·µå’Œåˆ†æï¼š\næç¤ºï¼šè¿™æ˜¯ä¸€é“åŠ¨æ‰‹å®è·µé¢˜ï¼Œå»ºè®®å®é™…æ“ä½œ\næŒ‰ç…§æœ¬ç« çš„æŒ‡å¯¼ï¼Œåœ¨æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªè½»é‡çº§çš„å¼€æºæ¨¡å‹ï¼ˆæ¨èQwen3-0.6Bï¼‰ï¼Œå¹¶å°è¯•è°ƒæ•´é‡‡æ ·å‚æ•°å¹¶è§‚å¯Ÿå…¶å¯¹è¾“å‡ºçš„å½±å“ é€‰æ‹©ä¸€ä¸ªå…·ä½“ä»»åŠ¡ï¼ˆå¦‚æ–‡æœ¬åˆ†ç±»ã€ä¿¡æ¯æŠ½å–ã€ä»£ç ç”Ÿæˆç­‰ï¼‰ï¼Œè®¾è®¡å¹¶å¯¹æ¯”ä»¥ä¸‹ä¸åŒçš„æç¤ºç­–ç•¥ï¼ˆå¦‚Zero-shotã€Few-shotã€Chain-of-Thoughtï¼‰å¯¹è¾“å‡ºç»“æœçš„æ•ˆæœå·®å¼‚ ä»æ€§èƒ½ã€æˆæœ¬ã€å¯æ§æ€§ã€éšç§ç­‰ç»´åº¦æ¯”è¾ƒé—­æºæ¨¡å‹å’Œå¼€æºæ¨¡å‹ å¦‚æœä½ è¦æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„å®¢æœæ™ºèƒ½ä½“ï¼Œä½ ä¼šé€‰æ‹©å“ªç§ç±»å‹çš„æ¨¡å‹ï¼Ÿéœ€è¦è€ƒè™‘å“ªäº›å› ç´ ï¼Ÿ 5.æ¨¡å‹å¹»è§‰ï¼ˆHallucinationï¼‰[11]æ˜¯å¤§è¯­è¨€æ¨¡å‹å½“å‰å­˜åœ¨çš„å…³é”®å±€é™æ€§ä¹‹ä¸€ã€‚æœ¬ç« ä»‹ç»äº†ç¼“è§£å¹»è§‰çš„æ–¹æ³•ï¼ˆå¦‚æ£€ç´¢å¢å¼ºç”Ÿæˆã€å¤šæ­¥æ¨ç†ã€å¤–éƒ¨å·¥å…·è°ƒç”¨ï¼‰\nè¯·é€‰æ‹©å…¶ä¸­ä¸€ç§ï¼Œè¯´æ˜å…¶å·¥ä½œåŸç†å’Œé€‚ç”¨åœºæ™¯ è°ƒç ”å‰æ²¿çš„ç ”ç©¶å’Œè®ºæ–‡ï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–çš„ç¼“è§£æ¨¡å‹å¹»è§‰çš„æ–¹æ³•ï¼Œä»–ä»¬åˆæœ‰å“ªäº›æ”¹è¿›å’Œä¼˜åŠ¿ï¼Ÿ 6.å‡è®¾ä½ è¦è®¾è®¡ä¸€ä¸ªè®ºæ–‡è¾…åŠ©é˜…è¯»æ™ºèƒ½ä½“ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©ç ”ç©¶äººå‘˜å¿«é€Ÿé˜…è¯»å¹¶ç†è§£å­¦æœ¯è®ºæ–‡ï¼ŒåŒ…æ‹¬ï¼šæ€»ç»“è®ºæ–‡ç ”ç©¶çš„æ ¸å¿ƒå†…å®¹ã€å›ç­”å…³äºè®ºæ–‡çš„é—®é¢˜ã€æå–å…³é”®ä¿¡æ¯ã€æ¯”è¾ƒå¤šç¯‡ä¸åŒè®ºæ–‡çš„è§‚ç‚¹ç­‰ã€‚è¯·å›ç­”ï¼š\nä½ ä¼šé€‰æ‹©å“ªä¸ªæ¨¡å‹ä½œä¸ºæ™ºèƒ½ä½“è®¾è®¡æ—¶çš„åŸºåº§æ¨¡å‹ï¼Ÿé€‰æ‹©æ—¶éœ€è¦è€ƒè™‘å“ªäº›å› ç´ ï¼Ÿ å¦‚ä½•è®¾è®¡æç¤ºè¯æ¥å¼•å¯¼æ¨¡å‹æ›´å¥½åœ°ç†è§£å­¦æœ¯è®ºæ–‡ï¼Ÿå­¦æœ¯è®ºæ–‡é€šå¸¸å¾ˆé•¿ï¼Œå¯èƒ½è¶…è¿‡æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼Œä½ ä¼šå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ å­¦æœ¯ç ”ç©¶æ˜¯ä¸¥è°¨çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ç¡®ä¿æ™ºèƒ½ä½“ç”Ÿæˆçš„ä¿¡æ¯æ˜¯å‡†ç¡®å®¢è§‚å¿ äºåŸæ–‡çš„ã€‚ä½ è®¤ä¸ºç³»ç»Ÿä¸­åŠ å…¥å“ªäº›è®¾è®¡èƒ½å¤Ÿæ›´å¥½çš„å®ç°è¿™ä¸€éœ€æ±‚ï¼Ÿ\n","date":"2026-02-15T18:37:25+08:00","permalink":"https://impself.github.io/p/agent-03-agent-language-basics/","title":"Agent 03-å¤§æ¨¡å‹è¯­è¨€åŸºç¡€"},{"content":"æœ¬æ–‡èšç„¦æ™ºèƒ½ä½“ä»ç¬¦å·ä¸»ä¹‰åˆ°å¤§æ¨¡å‹é©±åŠ¨èŒƒå¼çš„å…³é”®æ¼”è¿›è·¯å¾„ã€‚\n2.1 åŸºäºç¬¦å·ä¸é€»è¾‘çš„æ—©æœŸæ™ºèƒ½ä½“ ç‰©ç†ç¬¦å·ç³»ç»Ÿå‡è¯´ è®ºæ–­ å«ä¹‰ å……åˆ†æ€§ ä»»ä½•ç‰©ç†ç¬¦å·ç³»ç»Ÿéƒ½å…·å¤‡äº§ç”Ÿé€šç”¨æ™ºèƒ½è¡Œä¸ºçš„å……åˆ†æ‰‹æ®µ å¿…è¦æ€§ ä»»ä½•å±•ç°é€šç”¨æ™ºèƒ½è¡Œä¸ºçš„ç³»ç»Ÿï¼Œæœ¬è´¨å¿…ç„¶æ˜¯ç‰©ç†ç¬¦å·ç³»ç»Ÿ æ ¸å¿ƒæ€æƒ³ï¼šæ™ºèƒ½çš„æœ¬è´¨æ˜¯ç¬¦å·çš„è®¡ç®—ä¸å¤„ç†ã€‚\nä¸“å®¶ç³»ç»Ÿ ç”± çŸ¥è¯†åº“ï¼ˆIF-THENè§„åˆ™ï¼‰å’Œ æ¨ç†æœºï¼ˆæ­£å‘é“¾/åå‘é“¾ï¼‰ç»„æˆã€‚\nMYCINï¼šè¡€æ¶²æ„ŸæŸ“è¯Šæ–­ä¸“å®¶ç³»ç»Ÿï¼Œçº¦600æ¡è§„åˆ™ã€‚åˆ›æ–°ä¹‹å¤„æ˜¯å¼•å…¥ ç½®ä¿¡å› å­ï¼ˆCFï¼‰ å¤„ç†ä¸ç¡®å®šæ€§ã€‚\nç¬¦å·ä¸»ä¹‰çš„å±€é™ï¼š\nå¸¸è¯†çŸ¥è¯†ç“¶é¢ˆ æ¡†æ¶é—®é¢˜ä¸ç³»ç»Ÿè„†å¼±æ€§ SHRDLU SHRDLUæ˜¯ç§¯æœ¨ä¸–ç•Œä¸­çš„è‡ªç„¶è¯­è¨€äº¤äº’æ™ºèƒ½ä½“ï¼Œå…·å¤‡ï¼š\nè‡ªç„¶è¯­è¨€ç†è§£ï¼ˆè§£æå¤æ‚æŒ‡ä»¤ï¼‰ æŒ‡ä»£æ¶ˆè§£ï¼ˆç†è§£\u0026quot;ä½ æ‰‹ä¸­æ‹¿çš„\u0026quot;ï¼‰ ä¸Šä¸‹æ–‡è®°å¿† è§„åˆ’ä¸è¡ŒåŠ¨ï¼ˆè§„åˆ’åŠ¨ä½œåºåˆ—ï¼‰ è®°å¿†ä¸é—®ç­” 2.2 åŸºäºè§„åˆ™çš„èŠå¤©æœºå™¨äºº ELIZA çš„è®¾è®¡ æ ¸å¿ƒæœºåˆ¶ï¼šæ¨¡å¼åŒ¹é… + æ–‡æœ¬æ›¿æ¢\n1 2 3 4 5 6 def respond(user_input): # 1. å…³é”®è¯è¯†åˆ« # 2. åˆ†è§£ï¼ˆæ•è·é€šé…ç¬¦*åŒ¹é…çš„å†…å®¹ï¼‰ # 3. ä»£è¯è½¬æ¢ï¼ˆI â†” youï¼‰ # 4. é‡ç»„ç”Ÿæˆå›åº” pass å±€é™ï¼š\næ— è¯­ä¹‰ç†è§£ï¼ˆä¸ç†è§£å¦å®šè¯ï¼‰ æ— ä¸Šä¸‹æ–‡è®°å¿† è§„åˆ™æ‰©å±•å¯¼è‡´ç»„åˆçˆ†ç‚¸ 2.3 é©¬æ–‡Â·æ˜æ–¯åŸºçš„\u0026quot;å¿ƒæ™ºç¤¾ä¼š\u0026quot; æ ¸å¿ƒè§‚ç‚¹ï¼šæ™ºèƒ½æºäºå¤§é‡ç®€å•æ™ºèƒ½ä½“çš„åä½œï¼Œè€Œéå•ä¸€å®Œç¾ç³»ç»Ÿã€‚\næ¦‚å¿µ å«ä¹‰ æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ ç®€å•ã€ä¸“é—¨ã€æ— å¿ƒæ™º æœºæ„ï¼ˆAgencyï¼‰ åä½œçš„æ™ºèƒ½ä½“é›†åˆ å¯¹å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆMASï¼‰çš„å¯å‘ï¼š\nå»ä¸­å¿ƒåŒ–æ§åˆ¶ æ¶Œç°å¼è®¡ç®— æ™ºèƒ½ä½“ç¤¾ä¼šæ€§ 2.4 å­¦ä¹ èŒƒå¼çš„æ¼”è¿› ä»ç¬¦å·åˆ°è”ç»“ä¸»ä¹‰ èŒƒå¼ æ ¸å¿ƒæ€æƒ³ ç¬¦å·ä¸»ä¹‰ çŸ¥è¯†æ˜¾å¼ç¼–ç ä¸ºè§„åˆ™ è”ç»“ä¸»ä¹‰ çŸ¥è¯†ä»¥è¿æ¥æƒé‡åˆ†å¸ƒå¼å­˜å‚¨ å¼ºåŒ–å­¦ä¹ æ¡†æ¶ äº”å…ƒç»„ (S, A, P, R, Î³)\nç»„ä»¶ è¯´æ˜ Agent å­¦ä¹ è€…å’Œå†³ç­–è€… Environment æ™ºèƒ½ä½“å¤–éƒ¨çš„ä¸€åˆ‡ State (S) ç¯å¢ƒåœ¨æŸä¸€æ—¶åˆ»çš„æè¿° Action (A) æ™ºèƒ½ä½“å¯é‡‡å–çš„æ“ä½œ Reward (R) è¯„ä»·è¡ŒåŠ¨å¥½åçš„æ ‡é‡ä¿¡å· å­¦ä¹ å¾ªç¯ï¼šè§‚å¯Ÿ â†’ é€‰æ‹©è¡ŒåŠ¨ â†’ æ‰§è¡Œ â†’ è·å¾—å¥–åŠ± â†’ è°ƒæ•´ç­–ç•¥\né¢„è®­ç»ƒ-å¾®è°ƒèŒƒå¼ 1 2 3 æµ·é‡æ–‡æœ¬ â†’ è‡ªç›‘ç£å­¦ä¹  â†’ åŸºç¡€æ¨¡å‹ â†“ ç‰¹å®šä»»åŠ¡æ•°æ®å¾®è°ƒ â†’ ä¸‹æ¸¸ä»»åŠ¡ å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½ä½“ æ ¸å¿ƒç»„ä»¶ï¼š\n1 2 3 æ„ŸçŸ¥æ¨¡å— â†’ æ€è€ƒæ¨¡å—(Planning + LLM) â†’ æ‰§è¡Œæ¨¡å— â†’ å·¥å…·è°ƒç”¨ â†‘ â†“ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è§‚å¯Ÿä¸è®°å¿†æ›´æ–° â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ é˜¶æ®µ åŠŸèƒ½ æ„ŸçŸ¥ æ¥æ”¶ç”¨æˆ·æŒ‡ä»¤ã€ç¯å¢ƒçŠ¶æ€ æ€è€ƒ è§„åˆ’åˆ†è§£ã€æ¨ç†å†³ç­–ã€å·¥å…·è°ƒç”¨ è¡ŒåŠ¨ æ‰§è¡Œå·¥å…·ã€ä¸ç¯å¢ƒäº¤äº’ è§‚å¯Ÿ è·å–å·¥å…·ç»“æœã€æ›´æ–°è®°å¿† å‘å±•æ—¶é—´çº¿ æ—¶æœŸ ä»£è¡¨æŠ€æœ¯ 1950s-1980s ç¬¦å·ä¸»ä¹‰ï¼šä¸“å®¶ç³»ç»Ÿã€SHRDLU 1980s-2010s è”ç»“ä¸»ä¹‰ï¼šç¥ç»ç½‘ç»œå¤è‹ã€æ·±åº¦å­¦ä¹  2010s-è‡³ä»Š å¼ºåŒ–å­¦ä¹  + é¢„è®­ç»ƒ-å¾®è°ƒ + LLM Agent 2.5 ä¹ é¢˜è§£æ é¢˜ 1ï¼šç‰©ç†ç¬¦å·ç³»ç»Ÿå‡è¯´ Q1ï¼šå……åˆ†æ€§è®ºæ–­å’Œå¿…è¦æ€§è®ºæ–­åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\nè®ºæ–­ å«ä¹‰ å……åˆ†æ€§ ä»»ä½•ç‰©ç†ç¬¦å·ç³»ç»Ÿéƒ½å…·å¤‡äº§ç”Ÿé€šç”¨æ™ºèƒ½è¡Œä¸ºçš„å……åˆ†æ‰‹æ®µ å¿…è¦æ€§ ä»»ä½•å±•ç°é€šç”¨æ™ºèƒ½è¡Œä¸ºçš„ç³»ç»Ÿï¼Œæœ¬è´¨å¿…ç„¶æ˜¯ç‰©ç†ç¬¦å·ç³»ç»Ÿ Q2ï¼šç¬¦å·ä¸»ä¹‰å®è·µä¸­çš„å“ªäº›é—®é¢˜æŒ‘æˆ˜äº†\u0026quot;å……åˆ†æ€§\u0026quot;ï¼Ÿ\nå¸¸è¯†é—®é¢˜ï¼šä¾èµ–åºå¤§çš„èƒŒæ™¯çŸ¥è¯† æ¡†æ¶é—®é¢˜ï¼šè§„åˆ™é™æ€ï¼Œæ— æ³•é€‚åº”å˜åŒ– Q3ï¼šLLMé©±åŠ¨çš„æ™ºèƒ½ä½“æ˜¯å¦ç¬¦åˆè¯¥å‡è¯´ï¼Ÿ\nä¸å®Œå…¨ç¬¦åˆã€‚LLMé€šè¿‡åˆ†å¸ƒå¼æƒé‡éšå¼ç¼–ç çŸ¥è¯†ï¼Œè€Œéæ˜¾å¼ç¬¦å·è§„åˆ™ã€‚\né¢˜ 2ï¼šä¸“å®¶ç³»ç»ŸMYCIN Q1ï¼šä¸ºä½•MYCINæœªå¤§è§„æ¨¡åº”ç”¨äºä¸´åºŠï¼Ÿ\nç»´åº¦ åŸå›  æŠ€æœ¯ çŸ¥è¯†åº“éš¾ä»¥è¦†ç›–å…¨éƒ¨åŒ»å­¦çŸ¥è¯† ä¼¦ç† è¯Šæ–­é”™è¯¯è´£ä»»å½’å±ä¸æ˜ ç”¨æˆ·æ¥å—åº¦ åŒ»æ‚£å¯¹éäººç±»ç³»ç»Ÿç¼ºä¹ä¿¡ä»» Q2ï¼šç°ä»£åŒ»ç–—è¯Šæ–­æ™ºèƒ½ä½“å¦‚ä½•æ”¹è¿›ï¼Ÿ\nåŠ¨æ€çŸ¥è¯†æ›´æ–°ï¼ˆç»“åˆæœ€æ–°ç ”ç©¶ï¼‰ ä¸ªä½“åŒ–è¯Šæ–­ï¼ˆè€ƒè™‘æ‚£è€…å·®å¼‚ï¼‰ å¯è§£é‡Šæ€§ï¼ˆæ¸…æ™°å±•ç¤ºè¯Šæ–­ä¾æ®ï¼‰ Q3ï¼šå“ªäº›å‚ç›´é¢†åŸŸä»é€‚åˆåŸºäºè§„åˆ™çš„ç³»ç»Ÿï¼Ÿ\næ³•å¾‹å’¨è¯¢ï¼ˆè§„åˆ™æ˜ç¡®ï¼‰ å·¥ä¸šæ§åˆ¶ï¼ˆç¨³å®šå¯é¢„æµ‹ï¼‰ è¯ç‰©é…ç½®ï¼ˆé¿å…ç›¸äº’ä½œç”¨å†²çªï¼‰ é¢˜ 3ï¼šELIZA æ‰©å±•å®è·µ æ ¸å¿ƒæ‰©å±•ï¼šæ·»åŠ  ä¸Šä¸‹æ–‡è®°å¿† åŠŸèƒ½ï¼Œè®°ä½å§“åã€å¹´é¾„ã€èŒä¸šç­‰ä¿¡æ¯ã€‚\nä¸ChatGPTçš„æœ¬è´¨å·®å¼‚ï¼š\nç»´åº¦ ELIZA ChatGPT çŸ¥è¯†è¾¹ç•Œ å›ºå®šè§„åˆ™é›† é¢„è®­ç»ƒçŸ¥è¯†+æ¨ç† ä¸Šä¸‹æ–‡ æ— çŠ¶æ€ å¤šè½®å¯¹è¯è¿è´¯ å¼€æ”¾èƒ½åŠ› é¢„è®¾åœºæ™¯ å¼€æ”¾åŸŸå¤„ç† ç»„åˆçˆ†ç‚¸é—®é¢˜ï¼šå‡è®¾nä¸ªè§„åˆ™ã€æ¯ä¸ªè§„åˆ™åŒ¹é…mç§è¾“å…¥ï¼Œç»„åˆæ•°ä¸ºm^nï¼ˆæŒ‡æ•°çº§å¢é•¿ï¼‰ã€‚\né¢˜ 4ï¼š\u0026ldquo;å¿ƒæ™ºç¤¾ä¼š\u0026quot;ç†è®º Q1ï¼šGRASPæ™ºèƒ½ä½“å¤±æ•ˆä¼šæ€æ ·ï¼Ÿ\nç³»ç»Ÿå¤±å»æŠ“å–ç§¯æœ¨èƒ½åŠ›ï¼Œä½†å…¶ä»–æ™ºèƒ½ä½“å¯ç»§ç»­å·¥ä½œã€‚ä¼˜åŠ¿æ˜¯é²æ£’æ€§ï¼ŒåŠ£åŠ¿æ˜¯æ•´ä½“æ€§èƒ½ä¸‹é™ã€‚\nQ2ï¼šä¸ç°ä»£å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å…³è”ï¼Ÿ\nå…³è”ï¼šéƒ½ä½“ç°åä½œæ€æƒ³ã€å»ä¸­å¿ƒåŒ–æ§åˆ¶ ä¸åŒï¼šç°ä»£ç³»ç»Ÿæœ‰æ›´å…ˆè¿›çš„é€šä¿¡åè®®å’Œå­¦ä¹ ç®—æ³• Q3ï¼šLLMæ—¶ä»£\u0026quot;å¿ƒæ™ºç¤¾ä¼š\u0026quot;æ˜¯å¦ä»é€‚ç”¨ï¼Ÿ\né€‚ç”¨ã€‚æ™ºèƒ½çš„æ¶Œç°å’Œåä½œæ€æƒ³ä»æ˜¯ç†è§£å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„é‡è¦æ¡†æ¶ã€‚\né¢˜ 5ï¼šå¼ºåŒ–å­¦ä¹ ä¸ç›‘ç£å­¦ä¹  Q1ï¼šAlphaGoçš„\u0026quot;è¯•é”™å­¦ä¹ \u0026quot;æœºåˆ¶ï¼Ÿ\né€šè¿‡è‡ªæˆ‘å¯¹å¼ˆä¸æ–­å°è¯•ç­–ç•¥ï¼Œæ ¹æ®èƒœè´Ÿç»“æœè°ƒæ•´ï¼Œä¼˜åŒ–é•¿æœŸæ”¶ç›Šã€‚\nQ2ï¼šä¸ºä½•å¼ºåŒ–å­¦ä¹ é€‚åˆåºè´¯å†³ç­–ï¼Ÿ\nå¼ºåŒ–å­¦ä¹  ç›‘ç£å­¦ä¹  å…³æ³¨é•¿æœŸå¥–åŠ± å…³æ³¨å•æ¬¡é¢„æµ‹æ­£ç¡® ä¸ç¯å¢ƒäº¤äº’æ”¶é›†æ•°æ® éœ€è¦é¢„æ ‡æ³¨æ•°æ®é›† é€‚åˆåŠ¨æ€ç¯å¢ƒ é€‚åˆé™æ€æ¨¡å¼è¯†åˆ« Q3ï¼šRLHFåœ¨LLMè®­ç»ƒä¸­çš„ä½œç”¨ï¼Ÿ\né€šè¿‡äººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼Œä½¿æ¨¡å‹è¾“å‡ºæ›´ç¬¦åˆäººç±»æœŸæœ›å’Œåå¥½ã€‚\né¢˜ 6ï¼šé¢„è®­ç»ƒ-å¾®è°ƒèŒƒå¼ Q1ï¼šé¢„è®­ç»ƒå¦‚ä½•è§£å†³\u0026quot;çŸ¥è¯†è·å–ç“¶é¢ˆ\u0026rdquo;ï¼Ÿ\nç¬¦å·ä¸»ä¹‰ï¼šä¸“å®¶æ‰‹å·¥ç¼–ç è§„åˆ™ é¢„è®­ç»ƒï¼šä»æ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ ï¼Œåˆ†å¸ƒå¼è¡¨ç¤ºçŸ¥è¯† Q2ï¼šäº’è”ç½‘æ•°æ®å¸¦æ¥çš„é—®é¢˜åŠç¼“è§£ï¼Ÿ\né—®é¢˜ ç¼“è§£æªæ–½ é”™è¯¯ä¿¡æ¯ æ•°æ®æ¸…æ´— åè§ åè§æ£€æµ‹ä¸ä¿®æ­£ çŸ¥è¯†è¿‡æ—¶ æŒç»­æ›´æ–° é¢˜ 7ï¼šæ™ºèƒ½ä»£ç å®¡æŸ¥åŠ©æ‰‹ ä¸‰ä¸ªæ—¶ä»£çš„è®¾è®¡å¯¹æ¯”ï¼š\næ—¶ä»£ æ–¹æ¡ˆ å›°éš¾ ç¬¦å·ä¸»ä¹‰ æ‰‹å·¥ç¼–ç è§„åˆ™ çŸ¥è¯†è·å–ç“¶é¢ˆã€è„†å¼±æ€§ æ·±åº¦å­¦ä¹ (2015) ç‰¹å¾å·¥ç¨‹+åˆ†ç±»å™¨ ç‰¹å¾è®¾è®¡éš¾ã€æ³›åŒ–èƒ½åŠ›å¼± LLMæ—¶ä»£ æ„ŸçŸ¥+æ€è€ƒ+æ‰§è¡Œæ¨¡å— æ¶æ„å¤æ‚åº¦ æ¼”è¿›æ„ä¹‰ï¼šä»\u0026quot;å‡ ä¹ä¸å¯èƒ½\u0026quot;åˆ°\u0026quot;å¯è¡Œ\u0026quot;ï¼Œæ ¸å¿ƒæ˜¯ ç†è§£å’Œæ¨ç†èƒ½åŠ› çš„è´¨å˜ã€‚\nå°ç»“ æ™ºèƒ½ä½“å‘å±•å²æ˜¯ä¸€åœºå…³äº\u0026quot;å¦‚ä½•å®šä¹‰æ™ºèƒ½ã€è·å–çŸ¥è¯†ã€è¿›è¡Œå†³ç­–\u0026quot;çš„æ€æƒ³å˜é©ï¼š\nç¬¦å·ä¸»ä¹‰ï¼šæ˜¾å¼è§„åˆ™ â†’ çŸ¥è¯†è·å–ç“¶é¢ˆ è”ç»“ä¸»ä¹‰ï¼šåˆ†å¸ƒå¼è¡¨ç¤º â†’ æ„ŸçŸ¥èƒ½åŠ›çªç ´ å¼ºåŒ–å­¦ä¹ ï¼šè¯•é”™äº¤äº’ â†’ å†³ç­–èƒ½åŠ›çªç ´ LLM Agentï¼šæ„ŸçŸ¥-æ€è€ƒ-è¡ŒåŠ¨é—­ç¯ â†’ é€šç”¨æ™ºèƒ½é›å½¢ ","date":"2026-02-15T12:40:47+08:00","permalink":"https://impself.github.io/p/agent-02-agent-develop/","title":"Agent 02-æ™ºèƒ½ä½“å‘å±•å²"},{"content":"æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ä¸æ˜¯\u0026quot;ä¼šç®—å°±è¡Œ\u0026quot;çš„ç¨‹åºï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å¤Ÿåœ¨ç¯å¢ƒä¸­æ„ŸçŸ¥ã€å†³ç­–ã€è¡ŒåŠ¨å¹¶æŒç»­æ”¹è¿›çš„ä¸»ä½“ã€‚æœ¬æ–‡å…ˆæ¢³ç†æ ¸å¿ƒæ¦‚å¿µï¼Œå†ç»™å‡ºä¹ é¢˜çš„æ ‡å‡†åŒ–è§£æï¼Œç¡®ä¿å†…å®¹å¯é˜…è¯»ã€å¯å¤ç›˜ã€å¯ç”¨äºåç»­å®æˆ˜ã€‚\n1. æ™ºèƒ½ä½“åŸºç¡€æ¦‚å¿µ 1.1 å››ä¸ªæ ¸å¿ƒè¦ç´  ä¸€ä¸ªå®Œæ•´æ™ºèƒ½ä½“é€šå¸¸åŒ…å«ä»¥ä¸‹è¦ç´ ï¼š\nä¼ æ„Ÿå™¨ï¼ˆSensorsï¼‰ï¼šè·å–ç¯å¢ƒä¿¡æ¯ã€‚ ç¯å¢ƒï¼ˆEnvironmentï¼‰ï¼šæ™ºèƒ½ä½“æ‰€å¤„å¹¶äº¤äº’çš„å¤–éƒ¨ä¸–ç•Œã€‚ æ‰§è¡Œå™¨ï¼ˆActuatorsï¼‰ï¼šå¯¹ç¯å¢ƒæ–½åŠ å½±å“çš„æ‰‹æ®µã€‚ è¡ŒåŠ¨ï¼ˆActionï¼‰ï¼šåŸºäºå†³ç­–å®é™…æ‰§è¡Œçš„åŠ¨ä½œã€‚ 1.2 ä»ç®€å•åˆ°å¤æ‚çš„æ™ºèƒ½ä½“ç±»å‹ ç±»å‹ ç‰¹ç‚¹ å±€é™ ç®€å•åå°„æ™ºèƒ½ä½“ åªåŸºäºå½“å‰è§‚æµ‹åšè§„åˆ™åŒ¹é…ï¼Œä¸ä¿ç•™å†å² æ— æ³•åº”å¯¹éœ€è¦ç†è§£ä¸Šä¸‹æ–‡çš„å¤æ‚ä»»åŠ¡ åŸºäºæ¨¡å‹çš„åå°„æ™ºèƒ½ä½“ ç»´æŠ¤å†…éƒ¨çŠ¶æ€/ä¸–ç•Œæ¨¡å‹ï¼Œå¼¥è¡¥\u0026quot;çœ‹ä¸å…¨\u0026quot;çš„é—®é¢˜ æ¨¡å‹å¯èƒ½ä¸å‡†ç¡®ï¼Œéœ€è¦æŒç»­æ ¡å‡† åŸºäºç›®æ ‡çš„æ™ºèƒ½ä½“ ä»¥\u0026quot;è¾¾åˆ°ç›®æ ‡çŠ¶æ€\u0026quot;ä¸ºå¯¼å‘åšè§„åˆ’ è§„åˆ’å¼€é”€å¤§ï¼Œå®æ—¶æ€§è¾ƒå·® åŸºäºæ•ˆç”¨çš„æ™ºèƒ½ä½“ æ¯”è¾ƒä¸åŒç»“æœ\u0026quot;å¥½åˆ°ä»€ä¹ˆç¨‹åº¦\u0026quot;ï¼Œæœ€å¤§åŒ–æœŸæœ›æ•ˆç”¨ æ•ˆç”¨å‡½æ•°è®¾è®¡å›°éš¾ å­¦ä¹ å‹æ™ºèƒ½ä½“ é€šè¿‡åé¦ˆä¸æ–­æ›´æ–°ç­–ç•¥ éœ€è¦å¤§é‡è®­ç»ƒæ•°æ®å’Œåé¦ˆä¿¡å· å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learning, RLï¼‰æ˜¯å®ç°å­¦ä¹ å‹æ™ºèƒ½ä½“æœ€å…·ä»£è¡¨æ€§çš„è·¯å¾„ä¹‹ä¸€ã€‚ä¸€ä¸ªå­¦ä¹ å‹æ™ºèƒ½ä½“åŒ…å«ä¸€ä¸ªæ€§èƒ½å…ƒä»¶ï¼ˆæ‰§è¡Œå†³ç­–ï¼‰å’Œä¸€ä¸ªå­¦ä¹ å…ƒä»¶ï¼ˆé€šè¿‡è§‚å¯Ÿç»“æœä¸æ–­ä¿®æ­£ç­–ç•¥ï¼‰ã€‚\n1.3 å¸¸è§åˆ†ç±»ç»´åº¦ æŒ‰ååº”æ–¹å¼åˆ†ç±» ååº”å¼æ™ºèƒ½ä½“ï¼šæ¥æ”¶åˆ°ä¿¡æ¯åç«‹å³è¡ŒåŠ¨ï¼Œè¿½æ±‚é€Ÿåº¦ã€‚ è§„åˆ’å¼æ™ºèƒ½ä½“ï¼šç»è¿‡æ·±æ€ç†Ÿè™‘çš„è§„åˆ’å†è¡ŒåŠ¨ï¼Œè¿½æ±‚æœ€ä¼˜è§£ã€‚ æ··åˆå¼æ™ºèƒ½ä½“ï¼šç»“åˆè§„åˆ’ï¼ˆReasoningï¼‰ä¸ååº”ï¼ˆActing \u0026amp; Observingï¼‰ï¼Œåœ¨é€Ÿåº¦ä¸è´¨é‡ä¹‹é—´å–å¾—å¹³è¡¡ã€‚ æŒ‰çŸ¥è¯†è¡¨ç¤ºåˆ†ç±» ç±»å‹ ç‰¹ç‚¹ é€‚ç”¨åœºæ™¯ ç¬¦å·ä¸»ä¹‰ AI åŸºäºç¬¦å·å’Œè§„åˆ™ï¼Œå¼ºè°ƒé€»è¾‘æ¨ç†å’Œæ˜ç¡®çš„çŸ¥è¯†è¡¨ç¤º ç»“æ„åŒ–é—®é¢˜ äºšç¬¦å·ä¸»ä¹‰ AI åŸºäºè¿æ¥ä¸»ä¹‰å’Œåˆ†å¸ƒå¼è¡¨ç¤ºï¼ˆå¦‚ç¥ç»ç½‘ç»œï¼‰ å¤æ‚ã€éç»“æ„åŒ–æ•°æ® ç¥ç»ç¬¦å·ä¸»ä¹‰ AI ç»“åˆç¬¦å·æ¨ç†ä¸ç¥ç»ç½‘ç»œçš„å­¦ä¹ èƒ½åŠ› éœ€è¦åŒæ—¶å¤„ç†é€»è¾‘ä¸æ¨¡å¼è¯†åˆ« æŒ‰å­¦ä¹ èƒ½åŠ›åˆ†ç±» å›ºå®šç­–ç•¥æ™ºèƒ½ä½“ï¼šè¡Œä¸ºè§„åˆ™é¢„å…ˆè®¾å®šï¼Œä¸ä¼šéšç»éªŒæ”¹å˜ã€‚ å¯å­¦ä¹ ç­–ç•¥æ™ºèƒ½ä½“ï¼šèƒ½å¤Ÿä»åé¦ˆä¸­å­¦ä¹ ï¼ŒæŒç»­ä¼˜åŒ–å†³ç­–ã€‚ 1.4 ç³»ç»Ÿ 1 / ç³»ç»Ÿ 2 ä¸ç¥ç»ç¬¦å·ä¸»ä¹‰ç±»æ¯” å¡å°¼æ›¼çš„\u0026quot;åŒç³»ç»Ÿç†è®º\u0026quot;ä¸ºç†è§£ AI æ¶æ„æä¾›äº†å¾ˆå¥½çš„ç±»æ¯”ï¼š\nç³»ç»Ÿ 1ï¼šå¿«é€Ÿã€ç›´è§‰ã€å¹¶è¡Œã€æ¨¡å¼è¯†åˆ«é©±åŠ¨ï¼ˆæ›´æ¥è¿‘äºšç¬¦å·ä¸»ä¹‰æ–¹æ³•ï¼‰ã€‚ ç³»ç»Ÿ 2ï¼šç¼“æ…¢ã€å®¡æ…ã€åŸºäºé€»è¾‘ã€å¯è§£é‡Šæ¨ç†é©±åŠ¨ï¼ˆæ›´æ¥è¿‘ç¬¦å·ä¸»ä¹‰æ–¹æ³•ï¼‰ã€‚ å·¥ç¨‹ä¸Šå¸¸è§çš„æœ‰æ•ˆåšæ³•æ˜¯\u0026quot;ç³»ç»Ÿ 1 å¿«é€Ÿç­›æŸ¥ + ç³»ç»Ÿ 2 é‡ç‚¹å¤æ ¸\u0026quot;ï¼Œæ—¢ä¿è¯æ•ˆç‡ï¼Œåˆä¸å¤±å‡†ç¡®æ€§ã€‚\n2. æ™ºèƒ½ä½“ä»»åŠ¡ç¯å¢ƒå»ºæ¨¡ï¼šPEAS PEAS ç”¨äºç²¾ç¡®å®šä¹‰ä»»åŠ¡ç¯å¢ƒï¼Œæ˜¯è®¾è®¡æ™ºèƒ½ä½“çš„ç¬¬ä¸€æ­¥ï¼š\nç»´åº¦ é—®é¢˜ ç¤ºä¾‹ï¼ˆè‡ªåŠ¨é©¾é©¶ï¼‰ Pï¼ˆPerformanceï¼‰ å¦‚ä½•è¯„ä»·åšå¾—å¥½ä¸å¥½ å®‰å…¨æ€§ã€åˆ°è¾¾æ—¶é—´ã€ä¹˜è½¦èˆ’é€‚åº¦ Eï¼ˆEnvironmentï¼‰ æ™ºèƒ½ä½“é¢å¯¹ä»€ä¹ˆä¸–ç•Œ é“è·¯ã€å…¶ä»–è½¦è¾†ã€è¡Œäººã€äº¤é€šä¿¡å·ã€å¤©æ°” Aï¼ˆActuatorsï¼‰ å®ƒèƒ½åšä»€ä¹ˆåŠ¨ä½œ åŠ é€Ÿã€åˆ¹è½¦ã€è½¬å‘ã€è½¬å‘ç¯ã€é¸£ç¬› Sï¼ˆSensorsï¼‰ å®ƒèƒ½çœ‹åˆ°ä»€ä¹ˆä¿¡å· æ‘„åƒå¤´ã€é›·è¾¾ã€æ¿€å…‰é›·è¾¾ã€é€Ÿåº¦ä¼ æ„Ÿå™¨ã€GPS å¦‚æœ PEAS ä¸æ¸…æ™°ï¼Œåç»­ç®—æ³•ã€å·¥å…·é“¾å’Œè¯„ä¼°æ ‡å‡†éƒ½ä¼šå¤±ç„¦ã€‚\n3. ä¹ é¢˜å®Œæ•´è§£æ é¢˜ 1ï¼šåˆ¤æ–­ä¸»ä½“æ˜¯å¦ä¸ºæ™ºèƒ½ä½“åŠå…¶ç±»å‹ é¢˜ç›®ï¼šè¯·åˆ†æä»¥ä¸‹å››ä¸ª case ä¸­çš„ä¸»ä½“æ˜¯å¦å±äºæ™ºèƒ½ä½“ï¼Œå¦‚æœæ˜¯ï¼Œå±äºå“ªç§ç±»å‹çš„æ™ºèƒ½ä½“ï¼ˆå¯ä»¥ä»å¤šä¸ªåˆ†ç±»ç»´åº¦è¿›è¡Œåˆ†æï¼‰ï¼Œå¹¶è¯´æ˜ç†ç”±ã€‚\nCase Aï¼šè¶…çº§è®¡ç®—æœºï¼ˆ2 EFlopï¼‰ ç»“è®ºï¼šé€šå¸¸ä¸ç›´æ¥ç®—æ™ºèƒ½ä½“æœ¬ä½“ã€‚\nç†ç”±ï¼šä¸€å°ç¬¦åˆå†¯Â·è¯ºä¾æ›¼ç»“æ„çš„è¶…çº§è®¡ç®—æœºï¼Œæ— è®ºç®—åŠ›å¤šå¼ºï¼Œæœ¬è´¨ä¸Šä»æ˜¯é«˜æ€§èƒ½è®¡ç®—å¹³å°ã€‚å®ƒæœ¬èº«ä¸å…·å¤‡è‡ªä¸»ç›®æ ‡ã€æ„ŸçŸ¥-å†³ç­–-è¡ŒåŠ¨é—­ç¯ï¼›çœŸæ­£çš„æ™ºèƒ½ä½“æ˜¯å…¶ä¸Šè¿è¡Œçš„è½¯ä»¶ç³»ç»Ÿã€‚æ™ºèƒ½ä½“çš„å…³é”®åœ¨äº\u0026quot;è‡ªä¸»æ€§\u0026quot;å’Œ\u0026quot;ä¸ç¯å¢ƒçš„äº¤äº’\u0026quot;ï¼Œè€Œéè®¡ç®—èƒ½åŠ›ã€‚\nCase Bï¼šé«˜é€Ÿåœºæ™¯ä¸‹çš„è‡ªåŠ¨é©¾é©¶ç´§æ€¥å†³ç­– ç‰¹æ–¯æ‹‰è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿåœ¨é«˜é€Ÿå…¬è·¯ä¸Šè¡Œé©¶æ—¶ï¼Œçªç„¶æ£€æµ‹åˆ°å‰æ–¹æœ‰éšœç¢ç‰©ï¼Œéœ€è¦åœ¨æ¯«ç§’çº§åšå‡ºåˆ¹è½¦æˆ–å˜é“å†³ç­–ã€‚\nç»“è®ºï¼šæ˜¯æ™ºèƒ½ä½“ï¼Œæ ¸å¿ƒæ˜¯ååº”å¼ï¼ŒåŒæ—¶å…·å¤‡æ¨¡å‹ä¸ç›®æ ‡çº¦æŸã€‚\nç†ç”±ï¼š\næ¯«ç§’çº§é¿éšœå¼ºè°ƒå®æ—¶ååº”ï¼Œç¬¦åˆååº”å¼æ™ºèƒ½ä½“ç‰¹å¾ã€‚ ä½†è½¦é“ä¿æŒã€é€Ÿåº¦æ§åˆ¶ã€éšœç¢ç‰©è½¨è¿¹é¢„æµ‹ç­‰åˆä¾èµ–å†…éƒ¨çŠ¶æ€ä¼°è®¡ï¼ˆåŸºäºæ¨¡å‹çš„åå°„æ™ºèƒ½ä½“ï¼‰ã€‚ åŒæ—¶è¿˜æœ‰å¯¼èˆªç›®çš„åœ°è¿™ä¸€ç›®æ ‡çº¦æŸï¼ˆåŸºäºç›®æ ‡çš„æ™ºèƒ½ä½“ï¼‰ã€‚ å› æ­¤å®é™…æ˜¯æ··åˆå¼æ™ºèƒ½ä½“ï¼Œå…¼é¡¾å®æ—¶ååº”ä¸è§„åˆ’èƒ½åŠ›ã€‚ Case Cï¼šAlphaGo å¯¹å¼ˆ AlphaGoåœ¨ä¸äººç±»æ£‹æ‰‹å¯¹å¼ˆæ—¶ï¼Œéœ€è¦è¯„ä¼°å½“å‰å±€é¢å¹¶è§„åˆ’æœªæ¥æ•°åæ­¥çš„æœ€ä¼˜ç­–ç•¥ã€‚\nç»“è®ºï¼šæ˜¯æ™ºèƒ½ä½“ï¼Œå±äºè§„åˆ’å¼ + å­¦ä¹ å‹æ™ºèƒ½ä½“ã€‚\nç†ç”±ï¼š\né€šè¿‡è’™ç‰¹å¡æ´›æ ‘æœç´¢ä¸ä»·å€¼è¯„ä¼°è§„åˆ’åç»­å¤šæ­¥ï¼ˆè§„åˆ’å¼ï¼‰ã€‚ ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œç”±å¤§é‡å¯¹å¼ˆæ•°æ®è®­ç»ƒè€Œæˆï¼ˆå­¦ä¹ å‹ï¼‰ã€‚ é€šè¿‡è‡ªæˆ‘å¯¹å¼ˆæŒç»­æ”¹è¿›ç­–ç•¥ï¼ˆå¼ºåŒ–å­¦ä¹ ï¼‰ã€‚ Case Dï¼šChatGPT æ™ºèƒ½å®¢æœ ChatGPT æ‰®æ¼”çš„æ™ºèƒ½å®¢æœåœ¨å¤„ç†ç”¨æˆ·æŠ•è¯‰æ—¶ï¼Œéœ€è¦æŸ¥è¯¢è®¢å•ä¿¡æ¯ã€åˆ†æé—®é¢˜åŸå› ã€æä¾›è§£å†³æ–¹æ¡ˆå¹¶å®‰æŠšç”¨æˆ·æƒ…ç»ªã€‚\nç»“è®ºï¼šæ˜¯æ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆæˆ–å¯æ¼”åŒ–ä¸ºæ™ºèƒ½ä½“ç³»ç»Ÿï¼‰ï¼Œå±äºæ··åˆå¼ã€‚\nç†ç”±ï¼š\néœ€è¦å¤šæ­¥å·¥å…·è°ƒç”¨ï¼ˆæŸ¥è®¢å•ã€æ£€ç´¢æ”¿ç­–ã€æŸ¥è¯¢åº“å­˜ï¼‰ã€‚ éœ€è¦å¯¹è¯æ¨ç†èƒ½åŠ›ç†è§£ç”¨æˆ·æ„å›¾ã€‚ éœ€è¦æ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´ç­–ç•¥ï¼ˆå¦‚å®‰æŠšæƒ…ç»ªï¼‰ã€‚ å•çº¯çš„è¯­è¨€æ¨¡å‹ä¸æ˜¯å®Œæ•´æ™ºèƒ½ä½“ï¼Œä½†ç»“åˆå·¥å…·è°ƒç”¨åå¯è§†ä¸ºæ™ºèƒ½ä½“ç³»ç»Ÿã€‚ é¢˜ 2ï¼šæ™ºèƒ½å¥èº«æ•™ç»ƒçš„ PEAS ä¸ç¯å¢ƒç‰¹æ€§ é¢˜ç›®ï¼šå‡è®¾ä½ éœ€è¦ä¸ºä¸€ä¸ª\u0026quot;æ™ºèƒ½å¥èº«æ•™ç»ƒ\u0026quot;è®¾è®¡ä»»åŠ¡ç¯å¢ƒã€‚è¿™ä¸ªæ™ºèƒ½ä½“èƒ½å¤Ÿï¼š\né€šè¿‡å¯ç©¿æˆ´è®¾å¤‡ç›‘æµ‹ç”¨æˆ·çš„å¿ƒç‡ã€è¿åŠ¨å¼ºåº¦ç­‰ç”Ÿç†æ•°æ® æ ¹æ®ç”¨æˆ·çš„å¥èº«ç›®æ ‡ï¼ˆå‡è„‚/å¢è‚Œ/æå‡è€åŠ›ï¼‰åŠ¨æ€è°ƒæ•´è®­ç»ƒè®¡åˆ’ åœ¨ç”¨æˆ·è¿åŠ¨è¿‡ç¨‹ä¸­æä¾›å®æ—¶è¯­éŸ³æŒ‡å¯¼å’ŒåŠ¨ä½œçº æ­£ è¯„ä¼°è®­ç»ƒæ•ˆæœå¹¶ç»™å‡ºé¥®é£Ÿå»ºè®® è¯·ä½¿ç”¨ PEAS æ¨¡å‹å®Œæ•´æè¿°è¿™ä¸ªæ™ºèƒ½ä½“çš„ä»»åŠ¡ç¯å¢ƒï¼Œå¹¶åˆ†æè¯¥ç¯å¢ƒå…·æœ‰å“ªäº›ç‰¹æ€§ï¼ˆå¦‚éƒ¨åˆ†å¯è§‚å¯Ÿã€éšæœºæ€§ã€åŠ¨æ€æ€§ç­‰ï¼‰ã€‚\nPEAS æè¿° ç»´åº¦ å†…å®¹ Performanceï¼ˆæ€§èƒ½åº¦é‡ï¼‰ - è®­ç»ƒç›®æ ‡è¾¾æˆç‡ï¼ˆå‡è„‚/å¢è‚Œ/è€åŠ›æå‡ï¼‰\n- å®‰å…¨æ€§ï¼ˆå¼‚å¸¸å¿ƒç‡ã€åŠ¨ä½œé£é™©è§¦å‘ç‡ï¼‰\n- ç”¨æˆ·ä¾ä»æ€§ï¼ˆè®¡åˆ’å®Œæˆç‡ã€æŒç»­æ‰“å¡ç‡ï¼‰\n- ç”¨æˆ·ä½“éªŒï¼ˆæ»¡æ„åº¦ã€å»ºè®®é‡‡çº³ç‡ï¼‰ Environmentï¼ˆç¯å¢ƒï¼‰ - ç”¨æˆ·èº«ä½“çŠ¶æ€ï¼ˆç–²åŠ³åº¦ã€ä¼¤ç—…æƒ…å†µï¼‰\n- å®¶åº­/å¥èº«æˆ¿åœºæ™¯ã€å¯ç”¨å™¨æ¢°\n- æ—¶é—´æ®µã€å¤©æ°”ï¼ˆå½±å“æˆ·å¤–è¿åŠ¨ï¼‰\n- é¥®é£Ÿä¸ç¡çœ çŠ¶å†µ\n- ç½‘ç»œä¸è®¾å¤‡çŠ¶æ€ Actuatorsï¼ˆæ‰§è¡Œå™¨ï¼‰ - è¯­éŸ³æŒ‡å¯¼è¾“å‡º\n- åŠ¨ä½œçº æ­£æç¤ºæ¨é€\n- è®­ç»ƒè®¡åˆ’è°ƒæ•´æŒ‡ä»¤\n- æ¨é€æé†’\n- é¥®é£Ÿå»ºè®®ç”Ÿæˆ Sensorsï¼ˆä¼ æ„Ÿå™¨ï¼‰ - å¿ƒç‡å¸¦/æ‰‹è¡¨æ•°æ®\n- åŠ¨ä½œä¼ æ„Ÿå™¨ï¼ˆå¦‚åŠ é€Ÿåº¦è®¡ã€é™€èºä»ªï¼‰\n- æ‘„åƒå¤´å§¿æ€ä¼°è®¡\n- å†å²è®­ç»ƒæ—¥å¿—\n- ç”¨æˆ·ä¸»è§‚åé¦ˆï¼ˆå¦‚é—®å·ã€è¯­éŸ³ï¼‰ ç¯å¢ƒç‰¹æ€§åˆ†æ ç‰¹æ€§ è¯´æ˜ ç¤ºä¾‹ éƒ¨åˆ†å¯è§‚å¯Ÿ æ— æ³•ç›´æ¥è§‚æµ‹æŸäº›å…³é”®çŠ¶æ€ ç–²åŠ³ã€ç–¼ç—›ã€çœŸå®é¥®é£Ÿæ‰§è¡Œæƒ…å†µéš¾ä»¥ç›´æ¥æµ‹é‡ éšæœºæ€§ å­˜åœ¨ä¸å¯é¢„æµ‹çš„æ‰°åŠ¨ ç”Ÿç†çŠ¶æ€æ³¢åŠ¨ã€å¤–éƒ¨å¹²æ‰°ã€è®¾å¤‡å™ªå£° åŠ¨æ€æ€§ ç¯å¢ƒçŠ¶æ€éšæ—¶é—´å¿«é€Ÿå˜åŒ– è¿åŠ¨ä¸­å¿ƒç‡ã€é€Ÿåº¦ã€ä½“èƒ½çŠ¶æ€å®æ—¶å˜åŒ– è¿ç»­æ€§ çŠ¶æ€å˜é‡è¿ç»­å˜åŒ– å¿ƒç‡ã€é€Ÿåº¦ã€è´Ÿé‡ç­‰æ˜¯è¿ç»­é‡ å¤šç›®æ ‡çº¦æŸ éœ€è¦å¹³è¡¡å¤šä¸ªç›®æ ‡ æ•ˆæœã€å®‰å…¨ã€ä½“éªŒä¹‹é—´å­˜åœ¨æƒè¡¡ é¢˜ 3ï¼šWorkflow vs Agent åœ¨é€€æ¬¾å®¡æ ¸ä¸­çš„é€‰æ‹© é¢˜ç›®ï¼šæŸç”µå•†å…¬å¸æ­£åœ¨è€ƒè™‘ä¸¤ç§æ–¹æ¡ˆæ¥å¤„ç†å”®åé€€æ¬¾ç”³è¯·ï¼š\næ–¹æ¡ˆ Aï¼ˆWorkflowï¼‰ï¼šè®¾è®¡ä¸€å¥—å›ºå®šæµç¨‹ï¼Œä¾‹å¦‚ï¼š\nA.1 å¯¹äºä¸€èˆ¬å•†å“ä¸”åœ¨ 7 å¤©ä¹‹å†…ï¼Œé‡‘é¢ \u0026lt; 100RMB è‡ªåŠ¨é€šè¿‡ï¼›100-500RMB ç”±å®¢æœå®¡æ ¸ï¼›\u0026gt;500RMB éœ€ä¸»ç®¡å®¡æ‰¹ï¼›è€Œç‰¹æ®Šå•†å“ï¼ˆå¦‚å®šåˆ¶å“ï¼‰ä¸€å¾‹æ‹’ç»é€€æ¬¾ A.2 å¯¹äºè¶…è¿‡ 7 å¤©çš„å•†å“ï¼Œæ— è®ºé‡‘é¢ï¼Œåªèƒ½ç”±å®¢æœå®¡æ ¸æˆ–ä¸»ç®¡å®¡æ‰¹ æ–¹æ¡ˆ Bï¼ˆAgentï¼‰ï¼šæ­å»ºä¸€ä¸ªæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œè®©å®ƒç†è§£é€€æ¬¾æ”¿ç­–ã€åˆ†æç”¨æˆ·å†å²è¡Œä¸ºã€è¯„ä¼°å•†å“çŠ¶å†µï¼Œå¹¶è‡ªä¸»å†³ç­–æ˜¯å¦æ‰¹å‡†é€€æ¬¾\nè¯·åˆ†æï¼š\nè¿™ä¸¤ç§æ–¹æ¡ˆå„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ Workflow æ›´åˆé€‚ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ Agent æ›´æœ‰ä¼˜åŠ¿ï¼Ÿ å¦‚æœä½ æ˜¯è¯¥ç”µå•†å…¬å¸çš„è´Ÿè´£äººï¼Œä½ æ›´å€¾å‘äºé‡‡ç”¨å“ªç§æ–¹æ¡ˆï¼Ÿ æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ–¹æ¡ˆ Cï¼Œèƒ½å¤Ÿç»“åˆä¸¤ç§æ–¹æ¡ˆï¼Œè¾¾åˆ°æ‰¬é•¿é¿çŸ­çš„æ•ˆæœï¼Ÿ æ–¹æ¡ˆ Aï¼ˆWorkflowï¼‰ ä¼˜ç‚¹ ç¼ºç‚¹ - å¯æ§ã€å¯å®¡è®¡ã€åˆè§„å®ç°ç®€å•\n- å†³ç­–ä¸€è‡´æ€§é«˜ï¼Œæˆæœ¬å’Œå“åº”æ—¶é—´å¯é¢„æµ‹\n- è§„åˆ™é€æ˜ï¼Œæ˜“äºå‘ç”¨æˆ·è§£é‡Š - å¯¹è¾¹ç•Œæ¡ˆä¾‹ä¸çµæ´»\n- è§„åˆ™ç»´æŠ¤æˆæœ¬éšä¸šåŠ¡å¤æ‚åº¦ä¸Šå‡\n- æ— æ³•å¤„ç†è§„åˆ™ä¹‹å¤–çš„æƒ…å†µ æ–¹æ¡ˆ Bï¼ˆAgentï¼‰ ä¼˜ç‚¹ ç¼ºç‚¹ - èƒ½å¤„ç†å¤æ‚æƒ…å¢ƒä¸ä¸ªä½“å·®å¼‚\n- å¯èåˆæ›´å¤šä¿¡å·ï¼ˆå†å²è¡Œä¸ºã€å•†å“çŠ¶æ€ã€é£é™©åˆ†ï¼‰\n- é€‚åº”æ€§å¼ºï¼Œæ–°åœºæ™¯ä¸‹å¯å¿«é€Ÿè°ƒæ•´ - å†³ç­–ç¨³å®šæ€§ä¸å¯è§£é‡Šæ€§æŒ‘æˆ˜æ›´å¤§\n- éœ€è¦ç›‘æ§ã€å›æ”¾ã€è¯„ä¼°ä¸äººå·¥å…œåº•ä½“ç³»\n- é”™è¯¯å†³ç­–å¯èƒ½é€ æˆæ‰¹é‡æŸå¤± ä»€ä¹ˆæ—¶å€™é€‰è° Workflow æ›´åˆé€‚ï¼šè§„åˆ™æ¸…æ™°ã€åˆè§„å¼ºçº¦æŸã€ä½é£é™©é«˜å¹¶å‘åœºæ™¯ï¼ˆå¦‚æ ‡å‡†åŒ–å•†å“çš„å°é¢é€€æ¬¾ï¼‰ Agent æ›´æœ‰ä¼˜åŠ¿ï¼šæ¡ˆä¾‹å¤æ‚ã€éœ€ä¸ªæ€§åŒ–ã€è§„åˆ™éš¾ä»¥ç©·ä¸¾åœºæ™¯ï¼ˆå¦‚å¤§é¢ã€å®šåˆ¶å•†å“ã€VIP ç”¨æˆ·ï¼‰ æ–¹æ¡ˆ Cï¼šåˆ†å±‚æ··åˆæ¶æ„ å¦‚æœæ˜¯è´Ÿè´£äººï¼Œæ¨èé‡‡ç”¨æ–¹æ¡ˆ Cï¼ˆåˆ†å±‚æ··åˆï¼‰ï¼š\n1 2 3 4 5 ç¬¬ 1 å±‚ï¼šWorkflow å¤„ç†é«˜é¢‘æ ‡å‡†å• â†“ (è·¯ç”±è§„åˆ™) ç¬¬ 2 å±‚ï¼šé«˜é£é™©æˆ–ç–‘éš¾å•è·¯ç”±ç»™ Agent è¯„ä¼° â†“ (ä¸ç¡®å®šæˆ–äººå·¥å¤æ ¸é˜ˆå€¼) ç¬¬ 3 å±‚ï¼šäººå·¥å¤æ ¸æœ€ç»ˆå…œåº• è¿™ä¸ªç»„åˆé€šå¸¸æ¯”\u0026quot;çº¯ A\u0026quot;æˆ–\u0026quot;çº¯ B\u0026quot;æ›´ç¨³å¥ï¼š\næ ‡å‡†caseå¿«é€Ÿå¤„ç†ï¼Œé™ä½æˆæœ¬ å¤æ‚caseç”±Agentä¸ªæ€§åŒ–å¤„ç† å…³é”®å†³ç­–æœ‰äººå·¥å…œåº•ï¼Œæ§åˆ¶é£é™© é¢˜ 4ï¼šåœ¨æ—…è¡ŒåŠ©æ‰‹ä¸­æ‰©å±•è®°å¿†ã€å¤‡é€‰ã€åæ€ã€çŸ¥è¯†åº“ é¢˜ç›®ï¼šåœ¨æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹çš„åŸºç¡€ä¸Šï¼Œè¯·æ€è€ƒå¦‚ä½•æ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼ˆå¯ä»¥åªæè¿°è®¾è®¡æ€è·¯ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥å°è¯•ä»£ç å®ç°ï¼‰ï¼š\næç¤ºï¼šæ€è€ƒå¦‚ä½•ä¿®æ”¹ Thought-Action-Observation å¾ªç¯æ¥å®ç°è¿™äº›åŠŸèƒ½ã€‚\næ·»åŠ ä¸€ä¸ª\u0026quot;è®°å¿†\u0026quot;åŠŸèƒ½ï¼Œè®©æ™ºèƒ½ä½“è®°ä½ç”¨æˆ·çš„åå¥½ï¼ˆå¦‚å–œæ¬¢å†å²æ–‡åŒ–æ™¯ç‚¹ã€é¢„ç®—èŒƒå›´ç­‰ï¼‰ å½“æ¨èçš„æ™¯ç‚¹é—¨ç¥¨å·²å”®ç½„æ—¶ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿè‡ªåŠ¨æ¨èå¤‡é€‰æ–¹æ¡ˆ å¦‚æœç”¨æˆ·è¿ç»­æ‹’ç»äº† 3 ä¸ªæ¨èï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿåæ€å¹¶è°ƒæ•´æ¨èç­–ç•¥ å½“ç”¨æˆ·æ¥å—æ¨èçš„æ™¯ç‚¹æ—¶ï¼ŒæŠŠæ™¯ç‚¹å’Œç›¸å…³ä¿¡æ¯åŠ å…¥æ™ºèƒ½ä½“çš„\u0026quot;çŸ¥è¯†åº“\u0026quot;ï¼Œä»¥ä¾¿æœªæ¥æ¨èæ—¶å‚è€ƒ æ ¸å¿ƒæ€è·¯ æŠŠ Thought-Action-Observation å¾ªç¯å‡çº§ä¸º\u0026quot;å¸¦çŠ¶æ€çš„é—­ç¯\u0026quot;ï¼š\nç»„ä»¶ åŠŸèƒ½ Stateï¼ˆçŠ¶æ€ï¼‰ user_preferencesï¼šç”¨æˆ·åå¥½\nrejection_countï¼šè¿ç»­æ‹’ç»è®¡æ•°\nknowledge_baseï¼šå·²æ¥å—æ™¯ç‚¹çš„å†å²è®°å½• Thoughtï¼ˆæ€è€ƒï¼‰ èåˆç”¨æˆ·åå¥½ã€å†å²æ¥å—è®°å½•ä¸å½“å‰çº¦æŸç”Ÿæˆå€™é€‰ Actionï¼ˆè¡ŒåŠ¨ï¼‰ æŸ¥è¯¢åº“å­˜/ç¥¨åŠ¡ã€è¾“å‡ºæ¨èã€å¿…è¦æ—¶åˆ‡æ¢å¤‡é€‰ Observationï¼ˆè§‚å¯Ÿï¼‰ è®°å½•æ¥å—/æ‹’ç»åé¦ˆï¼›è‹¥è¿ç»­æ‹’ç»è¾¾åˆ°é˜ˆå€¼è§¦å‘ç­–ç•¥åæ€ ä»£ç å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 class TravelAgent: def __init__(self): self.user_preferences = {} # ç”¨æˆ·åå¥½ self.rejection_count = 0 # è¿ç»­æ‹’ç»è®¡æ•° self.knowledge_base = [] # å·²æ¥å—æ™¯ç‚¹çš„çŸ¥è¯†åº“ def recommend(self, user_input): \u0026#34;\u0026#34;\u0026#34;ç”Ÿæˆæ¨èï¼Œè‹¥å”®ç½„åˆ™ç”Ÿæˆå¤‡é€‰\u0026#34;\u0026#34;\u0026#34; rec = self.generate_recommendation(user_input) if self.is_sold_out(rec): rec = self.generate_alternative(user_input) return rec def receive_feedback(self, feedback, accepted_item=None): \u0026#34;\u0026#34;\u0026#34;æ¥æ”¶ç”¨æˆ·åé¦ˆï¼Œæ›´æ–°çŠ¶æ€\u0026#34;\u0026#34;\u0026#34; if feedback == \u0026#34;reject\u0026#34;: self.rejection_count += 1 if self.rejection_count \u0026gt;= 3: self.reflect_and_adjust() self.rejection_count = 0 # é‡ç½®è®¡æ•° elif feedback == \u0026#34;accept\u0026#34; and accepted_item is not None: self.rejection_count = 0 self.update_knowledge_base(accepted_item) def generate_recommendation(self, user_input): \u0026#34;\u0026#34;\u0026#34;ç»“åˆåå¥½ + å†å²è¡Œä¸ºç”Ÿæˆæ¨è\u0026#34;\u0026#34;\u0026#34; # å®ç°é€»è¾‘ï¼šæ ¹æ® user_preferences å’Œ knowledge_base ç”Ÿæˆå€™é€‰ raise NotImplementedError def is_sold_out(self, recommendation): \u0026#34;\u0026#34;\u0026#34;è°ƒç”¨ç¥¨åŠ¡æ¥å£æ£€æŸ¥åº“å­˜\u0026#34;\u0026#34;\u0026#34; raise NotImplementedError def generate_alternative(self, user_input): \u0026#34;\u0026#34;\u0026#34;åœ¨çº¦æŸä¸å˜æ—¶è¿”å›å¤‡é€‰æ–¹æ¡ˆ\u0026#34;\u0026#34;\u0026#34; # å®ç°é€»è¾‘ï¼šå¯»æ‰¾ä¸åŸæ¨èç›¸ä¼¼ä½†ä»æœ‰åº“å­˜çš„æ™¯ç‚¹ raise NotImplementedError def reflect_and_adjust(self): \u0026#34;\u0026#34;\u0026#34;åˆ†æè¿ç»­æ‹’ç»åŸå› ï¼ŒåŠ¨æ€è°ƒæ•´æ¨èæƒé‡\u0026#34;\u0026#34;\u0026#34; # å®ç°é€»è¾‘ï¼šåˆ†æå†å²æ‹’ç»è®°å½•ï¼Œè°ƒæ•´æ¨èç­–ç•¥ raise NotImplementedError def update_knowledge_base(self, accepted_item): \u0026#34;\u0026#34;\u0026#34;è®°å½•\u0026#34;è¢«æ¥å—æ–¹æ¡ˆ\u0026#34;çš„ä¸Šä¸‹æ–‡ä¿¡æ¯\u0026#34;\u0026#34;\u0026#34; self.knowledge_base.append({ \u0026#34;item\u0026#34;: accepted_item, \u0026#34;timestamp\u0026#34;: time.now(), # å¯ä»¥é™„åŠ æ›´å¤šä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åé¦ˆç­‰ }) é¢˜ 5ï¼šç³»ç»Ÿ 1 / ç³»ç»Ÿ 2 åœ¨åŒ»ç–—è¯Šæ–­åŠ©æ‰‹ä¸­çš„åˆ†å·¥ é¢˜ç›®ï¼šå¡å°¼æ›¼çš„\u0026quot;ç³»ç»Ÿ 1\u0026quot;ï¼ˆå¿«é€Ÿç›´è§‰ï¼‰å’Œ\u0026quot;ç³»ç»Ÿ 2\u0026quot;ï¼ˆæ…¢é€Ÿæ¨ç†ï¼‰ç†è®ºä¸ºç¥ç»ç¬¦å·ä¸»ä¹‰ AI æä¾›äº†å¾ˆå¥½çš„ç±»æ¯”ã€‚è¯·é¦–å…ˆæ„æ€ä¸€ä¸ªå…·ä½“çš„æ™ºèƒ½ä½“çš„è½åœ°åº”ç”¨åœºæ™¯ï¼Œç„¶åè¯´æ˜åœºæ™¯ä¸­çš„ï¼š\nå“ªäº›ä»»åŠ¡åº”è¯¥ç”±\u0026quot;ç³»ç»Ÿ 1\u0026quot;å¤„ç†ï¼Ÿ å“ªäº›ä»»åŠ¡åº”è¯¥ç”±\u0026quot;ç³»ç»Ÿ 2\u0026quot;å¤„ç†ï¼Ÿ è¿™ä¸¤ä¸ªç³»ç»Ÿå¦‚ä½•ååŒå·¥ä½œä»¥è¾¾æˆæœ€ç»ˆç›®æ ‡ï¼Ÿ æç¤ºï¼šåŒ»ç–—è¯Šæ–­åŠ©æ‰‹ã€æ³•å¾‹å’¨è¯¢æœºå™¨äººã€é‡‘èé£æ§ç³»ç»Ÿç­‰éƒ½æ˜¯å¸¸è§çš„åº”ç”¨åœºæ™¯ã€‚\nåœºæ™¯ï¼šé—¨è¯Šåˆ†è¯Šä¸è¾…åŠ©è¯Šæ–­åŠ©æ‰‹ ç³»ç»Ÿ 1 è´Ÿè´£ï¼ˆå¿«é€Ÿç›´è§‰å¤„ç†ï¼‰ ä»»åŠ¡ è¯´æ˜ ç—‡çŠ¶å¿«é€Ÿå½’ç±» æ ¹æ®ä¸»è¯‰å¿«é€Ÿåˆ¤æ–­ç§‘å®¤åˆ†ç±» é«˜å±ä¿¡å·åˆç­› è¯†åˆ«èƒ¸ç—›ã€å‘¼å¸å›°éš¾ç­‰ç´§æ€¥ç—‡çŠ¶ å€™é€‰ç–¾ç—…ç²—æ’ åŸºäºç—‡çŠ¶æ¨¡å¼åŒ¹é…ç»™å‡ºå€™é€‰ç–¾ç—…åˆ—è¡¨ ç³»ç»Ÿ 2 è´Ÿè´£ï¼ˆæ…¢é€Ÿæ¨ç†å¤„ç†ï¼‰ ä»»åŠ¡ è¯´æ˜ ç»“åˆç—…å²ã€æ£€éªŒã€æŒ‡å—åšå› æœæ¨ç† ç»¼åˆå¤šæºä¿¡æ¯è¿›è¡Œè¯Šæ–­ å¤„ç†å†²çªè¯æ® å½“ä¸åŒæ£€éªŒç»“æœçŸ›ç›¾æ—¶åšå‡ºåˆ¤æ–­ è¾“å‡ºå¯è§£é‡Šè¯Šæ–­å»ºè®®ä¸ä¸‹ä¸€æ­¥æ£€æŸ¥è®¡åˆ’ ç»™å‡ºæ˜ç¡®çš„è¯Šæ–­ä¾æ®å’Œå»ºè®® ååŒæ–¹å¼ 1 2 3 4 5 6 7 æ‚£è€…è¾“å…¥ â†’ ç³»ç»Ÿ1å¿«é€Ÿç­›æŸ¥ â†’ ä½é£é™©/å¸¸è§ç—… â†’ ç›´æ¥è¾“å‡ºå»ºè®® â†“ é«˜é£é™©/ä¸ç¡®å®š â†“ ç³»ç»Ÿ2æ·±åº¦åˆ†æ â†’ è¯Šæ–­å»ºè®® + æ£€æŸ¥è®¡åˆ’ â†“ åå“ºç³»ç»Ÿ1ï¼ˆæŒç»­æ ¡å‡†ç­›æŸ¥è§„åˆ™ï¼‰ ç›®æ ‡æ˜¯åœ¨æ•ˆç‡ã€å‡†ç¡®æ€§ä¸å¯è§£é‡Šæ€§ä¹‹é—´å–å¾—å¹³è¡¡ï¼š\nç³»ç»Ÿ 1 ä¿è¯é«˜å¬å›ç‡ï¼ˆä¸æ¼æ‰é«˜å±æ‚£è€…ï¼‰ ç³»ç»Ÿ 2 å¯¹å…³é”®æ ·æœ¬æŠ•å…¥æ›´å¤šç®—åŠ› ç³»ç»Ÿ 2 çš„ç»“è®ºæŒç»­åå“ºç³»ç»Ÿ 1ï¼Œå½¢æˆé—­ç¯å­¦ä¹  é¢˜ 6ï¼šæ™ºèƒ½ä½“å±€é™ä¸è¯„ä¼° é¢˜ç›®ï¼šå°½ç®¡å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½ä½“ç³»ç»Ÿå±•ç°å‡ºäº†å¼ºå¤§çš„èƒ½åŠ›ï¼Œä½†å®ƒä»¬ä»ç„¶å­˜åœ¨è¯¸å¤šå±€é™ã€‚è¯·åˆ†æä»¥ä¸‹é—®é¢˜ï¼š\nä¸ºä»€ä¹ˆæ™ºèƒ½ä½“æˆ–æ™ºèƒ½ä½“ç³»ç»Ÿæœ‰æ—¶ä¼šäº§ç”Ÿ\u0026quot;å¹»è§‰\u0026quot;ï¼ˆç”Ÿæˆçœ‹ä¼¼åˆç†ä½†å®é™…é”™è¯¯çš„ä¿¡æ¯ï¼‰ï¼Ÿ åœ¨æ™ºèƒ½ä½“æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†æœ€å¤§å¾ªç¯æ¬¡æ•°ä¸º 5 æ¬¡ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œæ™ºèƒ½ä½“å¯èƒ½ä¼šé™·å…¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ å¦‚ä½•è¯„ä¼°ä¸€ä¸ªæ™ºèƒ½ä½“çš„\u0026quot;æ™ºèƒ½\u0026quot;ç¨‹åº¦ï¼Ÿä»…ä½¿ç”¨å‡†ç¡®ç‡æŒ‡æ ‡æ˜¯å¦è¶³å¤Ÿï¼Ÿ ä¸ºä»€ä¹ˆä¼šå‡ºç°\u0026quot;å¹»è§‰\u0026quot; åŸå›  è¯´æ˜ è®­ç»ƒæ•°æ®å™ªå£°ä¸çŸ¥è¯†è¿‡æ—¶ æ¨¡å‹å­¦ä¹ åˆ°çš„æ˜¯è®­ç»ƒæ—¶çš„çŸ¥è¯†ï¼Œå¯èƒ½å·²ç»è¿‡æ—¶æˆ–åŒ…å«é”™è¯¯ æ£€ç´¢å¢å¼ºé˜¶æ®µå¬å›é”™è¯¯è¯æ® RAG å¬å›äº†\u0026quot;ç›¸ä¼¼ä½†ä¸æ­£ç¡®\u0026quot;çš„è¯æ®ï¼ˆå‘é‡ç›¸ä¼¼åº¦ â‰  è¯­ä¹‰ç­‰ä»·ï¼‰ å·¥å…·è°ƒç”¨å¤±è´¥æˆ–è¿”å›ä¸å®Œæ•´ä¿¡æ¯ å¤–éƒ¨å·¥å…·å¼‚å¸¸æ—¶ï¼Œæ¨¡å‹å¯èƒ½\u0026quot;ç¼–é€ \u0026quot;ç­”æ¡ˆæ¥è¡¥å…¨ é•¿é“¾è·¯æ¨ç†ä¸­çš„è¯¯å·®ç´¯ç§¯ å¤šæ­¥æ¨ç†ä¸­ï¼Œæ¯ä¸€æ­¥çš„å°è¯¯å·®ä¼šè¢«æ”¾å¤§ å¥–åŠ±ç›®æ ‡ä¸çœŸå®ä¸šåŠ¡ç›®æ ‡ä¸ä¸€è‡´ RLHF çš„å¥–åŠ±æ¨¡å‹å¯èƒ½é¼“åŠ±æŸäº›è¡¨é¢è¡Œä¸ºè€ŒéçœŸå®æ­£ç¡®æ€§ ä¸ºä»€ä¹ˆè¦é™åˆ¶æœ€å¤§å¾ªç¯æ¬¡æ•° è‹¥ä¸é™åˆ¶æœ€å¤§å¾ªç¯æ¬¡æ•°ï¼Œå¯èƒ½å‡ºç°ï¼š\né£é™© è¯´æ˜ æ­»å¾ªç¯æˆ–æ— æ•ˆåå¤è°ƒç”¨å·¥å…· æ™ºèƒ½ä½“å¯èƒ½åœ¨æ— æ•ˆè·¯å¾„ä¸Šåå¤å°è¯• Token ä¸æ—¶å»¶æˆæœ¬å¤±æ§ æ— é™å¢é•¿å¯¼è‡´æˆæœ¬å’Œå“åº”æ—¶é—´ä¸å¯æ§ ä¸Šä¸‹æ–‡è¢«å™ªå£°æŒ¤å  è¿‡é•¿å†å²å¯¼è‡´å…³é”®ä¿¡æ¯è¢«ç¨€é‡Šï¼Œå†³ç­–è´¨é‡ä¸‹é™ é™·å…¥å±€éƒ¨æœ€ä¼˜ ç¼ºä¹\u0026quot;åŠæ—¶æ­¢æŸ\u0026quot;æœºåˆ¶ï¼Œæ— æ³•è·³å‡ºæ— æ•ˆç­–ç•¥ å¦‚ä½•è¯„ä¼°æ™ºèƒ½ä½“\u0026quot;æ™ºèƒ½ç¨‹åº¦\u0026quot; ä»…çœ‹å‡†ç¡®ç‡ä¸å¤Ÿï¼Œåº”è‡³å°‘åŠ å…¥ä»¥ä¸‹ç»´åº¦ï¼š\nç»´åº¦ æŒ‡æ ‡ç¤ºä¾‹ ä»»åŠ¡æˆåŠŸç‡ ç«¯åˆ°ç«¯ç›®æ ‡æ˜¯å¦å®Œæˆï¼ˆå¦‚å®¢æˆ·é—®é¢˜æ˜¯å¦è§£å†³ï¼‰ æˆæœ¬ä¸æ—¶å»¶ Token æ¶ˆè€—ã€è°ƒç”¨æ¬¡æ•°ã€å“åº”æ—¶é—´ ç¨³å®šæ€§ å¤šæ¬¡è¿è¡Œç»“æœä¸€è‡´æ€§ é²æ£’æ€§ å¼‚å¸¸è¾“å…¥ä¸è¾¹ç•Œæ¡ä»¶ä¸‹çš„è¡¨ç° å®‰å…¨ä¸åˆè§„ æ˜¯å¦è¾“å‡ºæœ‰å®³å†…å®¹ã€æ˜¯å¦è¶Šæƒè®¿é—® å¯è§£é‡Šæ€§ä¸å¯å®¡è®¡æ€§ èƒ½å¦è¿½æº¯å…³é”®å†³ç­–ä¾æ® 4. å°ç»“ æ™ºèƒ½ä½“å·¥ç¨‹çš„å…³é”®ä¸åœ¨\u0026quot;æ¨¡å‹å‚æ•°æ›´å¤§\u0026quot;ï¼Œè€Œåœ¨äºï¼š\nä»»åŠ¡å®šä¹‰æ˜¯å¦æ¸…æ™°ï¼ˆPEAS æ˜¯ç¬¬ä¸€æ­¥ï¼‰ å†³ç­–ç»“æ„æ˜¯å¦åŒ¹é…åœºæ™¯ï¼ˆååº”å¼/è§„åˆ’å¼/æ··åˆå¼å„æœ‰æ‰€é•¿ï¼‰ è¯„ä¼°ä¸å…œåº•æ˜¯å¦å®Œå–„ï¼ˆå‡†ç¡®ç‡ä¹‹å¤–çš„å¤šç»´æŒ‡æ ‡ + äººå·¥å…œåº•ï¼‰ ä»å·¥ç¨‹è½åœ°çœ‹ï¼Œæ··åˆæ¶æ„é€šå¸¸æ˜¯æœ€å®ç”¨è·¯çº¿ï¼šè§„åˆ™ä¿åº•ã€æ™ºèƒ½å¢ç›Šã€äººå·¥å…œåº•ã€‚è¿™æ—¢ä¿è¯äº†ç³»ç»Ÿçš„å¯æ§æ€§ï¼Œåˆèƒ½åœ¨å¤æ‚åœºæ™¯ä¸‹å‘æŒ¥æ™ºèƒ½ä½“çš„ä¼˜åŠ¿ã€‚\n","date":"2026-02-13T13:12:43+08:00","permalink":"https://impself.github.io/p/agent-01-initial-agent/","title":"Agent 01-åˆè¯†æ™ºèƒ½ä½“"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ åœ¨ç»„ä»¶åˆ›å»ºã€åˆ°åŠ è½½åˆ°é¡µé¢ä¸Šè¿è¡Œã€ä»¥åŠç»„ä»¶è¢«é”€æ¯çš„è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯ä¼´éšç€å„ç§å„æ ·çš„äº‹ä»¶ï¼Œè¿™äº›åœ¨ç»„ä»¶ç‰¹å®šæ—¶æœŸï¼Œè§¦å‘çš„äº‹ä»¶ç»Ÿç§°ä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚\nç”Ÿå‘½å‘¨æœŸçš„é˜¶æ®µ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œä¸‹é¢åˆ†åˆ«æ¥è®²è§£ã€‚\n1ã€ç»„ä»¶åˆ›å»ºé˜¶æ®µ ç»„ä»¶åˆ›å»ºé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼šåˆ›å»ºé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåœ¨ç»„ä»¶çš„ä¸€è¾ˆå­ä¸­ï¼Œåªæ‰§è¡Œä¸€æ¬¡ã€‚\ngetDefaultProps åˆå§‹åŒ– props å±æ€§é»˜è®¤å€¼ã€‚\ngetInitialState åˆå§‹åŒ–ç»„ä»¶çš„ç§æœ‰æ•°æ®ã€‚å› ä¸º state æ˜¯å®šä¹‰åœ¨ç»„ä»¶çš„ constructor æ„é€ å™¨å½“ä¸­çš„ï¼Œåªè¦new äº† classç±»ï¼Œå¿…ç„¶ä¼šè°ƒç”¨ constructoræ„é€ å™¨ã€‚\ncomponentWillMount() ç»„ä»¶å°†è¦è¢«æŒ‚è½½ã€‚æ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹æ¸²æŸ“è™šæ‹ŸDOMã€‚\nåœ¨è¿™ä¸ªé˜¶æ®µï¼Œä¸èƒ½å»æ“ä½œDOMå…ƒç´ ï¼Œä½†å¯ä»¥æ“ä½œå±æ€§ã€çŠ¶æ€ã€functionã€‚ç›¸å½“äº Vue ä¸­çš„Create()å‡½æ•°ã€‚\nrender() ç¬¬ä¸€æ¬¡å¼€å§‹æ¸²æŸ“çœŸæ­£çš„è™šæ‹ŸDOMã€‚å½“renderæ‰§è¡Œå®Œï¼Œå†…å­˜ä¸­å°±æœ‰äº†å®Œæ•´çš„è™šæ‹ŸDOMäº†ã€‚\næ„æ€æ˜¯ï¼Œæ­¤æ—¶ï¼Œè™šæ‹ŸDOMåœ¨å†…å­˜ä¸­åˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æŒ‚åœ¨åˆ°é¡µé¢ä¸Šã€‚\nåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œä¸èƒ½å»æ“ä½œDOMå…ƒç´ ï¼Œå› ä¸ºè¿˜æ²¡returnä¹‹å‰ï¼Œè™šæ‹ŸDOMè¿˜æ²¡æœ‰åˆ›å»ºï¼›å½“returnæ‰§è¡Œå®Œæ¯•åï¼Œè™šæ‹ŸDOMå°±åˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æŒ‚åœ¨åˆ°é¡µé¢ä¸Šã€‚\ncomponentDidMount() å½“ç»„ä»¶ï¼ˆè™šæ‹ŸDOMï¼‰æŒ‚è½½åˆ°é¡µé¢ä¹‹åï¼Œä¼šè¿›å…¥è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚\nåªè¦è¿›å…¥åˆ°è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåˆ™å¿…ç„¶è¯´æ˜ï¼Œé¡µé¢ä¸Šå·²ç»æœ‰å¯è§çš„DOMå…ƒç´ äº†ã€‚æ­¤æ—¶ï¼Œç»„ä»¶å·²ç»æ˜¾ç¤ºåˆ°äº†é¡µé¢ä¸Šï¼Œstateä¸Šçš„æ•°æ®ã€å†…å­˜ä¸­çš„è™šæ‹ŸDOMã€ä»¥åŠæµè§ˆå™¨ä¸­çš„é¡µé¢ï¼Œå·²ç»å®Œå…¨ä¿æŒä¸€è‡´äº†ã€‚\nå½“è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œï¼Œç»„ä»¶å°±è¿›å…¥éƒ½äº† è¿è¡Œä¸­ çš„çŠ¶æ€ã€‚æ‰€ä»¥è¯´ï¼ŒcomponentDidMount æ˜¯åˆ›å»ºé˜¶æ®µçš„æœ€åä¸€ä¸ªå‡½æ•°ã€‚\nåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒçš„å» æ“ä½œ é¡µé¢ä¸Šä½ éœ€è¦ä½¿ç”¨çš„ DOM å…ƒç´ äº†ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ“ä½œDOMå…ƒç´ ï¼Œæœ€æ—©åªèƒ½åœ¨ componentDidMount ä¸­è¿›è¡Œã€‚ç›¸å½“äº Vue ä¸­çš„ mounted() å‡½æ•°\n2ã€ç»„ä»¶è¿è¡Œé˜¶æ®µ æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼Œæ ¹æ®ç»„ä»¶çš„stateå’Œpropsçš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„è§¦å‘0æ¬¡æˆ–å¤šæ¬¡ã€‚\ncomponentWillReceiveProps() ç»„ä»¶å°†è¦æ¥æ”¶æ–°å±æ€§ã€‚åªæœ‰å½“çˆ¶ç»„ä»¶ä¸­ï¼Œé€šè¿‡æŸäº›äº‹ä»¶ï¼Œé‡æ–°ä¿®æ”¹äº† ä¼ é€’ç»™ å­ç»„ä»¶çš„ props æ•°æ®ä¹‹åï¼Œæ‰ä¼šè§¦å‘è¿™ä¸ªé’©å­å‡½æ•°ã€‚\nshouldComponentUpdate() åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦è¢«æ›´æ–°ã€‚æ­¤æ—¶ï¼Œç»„ä»¶å°šæœªè¢«æ›´æ–°ï¼Œä½†æ˜¯ï¼Œstate å’Œ props è‚¯å®šæ˜¯æœ€æ–°çš„ã€‚\ncomponentWillUpdate() ç»„ä»¶å°†è¦è¢«æ›´æ–°ã€‚æ­¤æ—¶ï¼Œç»„ä»¶è¿˜æ²¡æœ‰è¢«æ›´æ–°ï¼Œåœ¨è¿›å…¥åˆ°è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ—¶å€™ï¼Œå†…å­˜ä¸­çš„è™šæ‹ŸDOMè¿˜æ˜¯æ—§çš„ï¼Œé¡µé¢ä¸Šçš„ DOM å…ƒç´ ä¹Ÿæ˜¯æ—§çš„ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶æ“ä½œçš„æ˜¯æ—§çš„ DOMå…ƒç´ ï¼‰\nrender æ­¤æ—¶ï¼Œåˆè¦æ ¹æ®æœ€æ–°çš„ state å’Œ propsï¼Œé‡æ–°æ¸²æŸ“ä¸€æ£µå†…å­˜ä¸­çš„ è™šæ‹ŸDOMæ ‘ã€‚å½“ render è°ƒç”¨å®Œæ¯•ï¼Œå†…å­˜ä¸­çš„æ—§DOMæ ‘ï¼Œå·²ç»è¢«æ–°DOMæ ‘æ›¿æ¢äº†ï¼æ­¤æ—¶ï¼Œè™šæ‹ŸDOMæ ‘å·²ç»å’Œç»„ä»¶çš„ state ä¿æŒä¸€è‡´äº†ï¼Œéƒ½æ˜¯æœ€æ–°çš„ï¼›ä½†æ˜¯é¡µé¢è¿˜æ˜¯æ—§çš„ã€‚\ncomponentDidUpdate æ­¤æ—¶ï¼Œç»„ä»¶å®Œæˆæ›´æ–°ï¼Œé¡µé¢è¢«é‡æ–°æ¸²æŸ“ã€‚æ­¤æ—¶ï¼Œstateã€è™šæ‹ŸDOM å’Œ é¡µé¢å·²ç»å®Œå…¨ä¿æŒåŒæ­¥ã€‚\n3ã€ç»„ä»¶é”€æ¯é˜¶æ®µ ä¸€è¾ˆå­åªæ‰§è¡Œä¸€æ¬¡ã€‚\ncomponentWillUnmount: ç»„ä»¶å°†è¦è¢«å¸è½½ã€‚æ­¤æ—¶ç»„ä»¶è¿˜å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚ React ç”Ÿå‘½å‘¨æœŸçš„æˆªå›¾å¦‚ä¸‹ï¼š\nç”Ÿå‘½å‘¨æœŸå¯¹æ¯”ï¼š\nvueä¸­çš„ç”Ÿå‘½å‘¨æœŸå›¾\nReact Native ä¸­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ\nç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåº 1ã€Mountingï¼š\nconstructor()\ncomponentWillMount()\nrender()\ncomponentDidMount()\n2ã€Updatingï¼š\ncomponentWillReceiveProps(nextProps)ï¼šæ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å±æ€§\nshouldComponentUpdate(nextProps, nextState)ï¼šä¸€æ—¦è°ƒç”¨ setStateï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•ã€‚æ–¹æ³•é»˜è®¤ return trueï¼›å¦‚æœ return falseï¼Œåç»­çš„æ–¹æ³•å°±ä¸ä¼šèµ°äº†ã€‚\ncomponentWillUpdate(nextProps, nextState)\nrender()\ncomponentDidUpdate(prevProps, prevState)\n3ã€Unmountingï¼š\ncomponentWillUnmount() ","date":"2026-02-11T17:27:27+08:00","permalink":"https://impself.github.io/p/react-component-lifecycle/","title":"React 03-ç»„ä»¶ï¼ˆä¸€ï¼‰ï¼šç”Ÿå‘½å‘¨æœŸ"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nå‰è¨€ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š\ncomponents/MyComponent.jsx\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import React from \u0026#34;react\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯ MyComponent ç»„ä»¶ é»˜è®¤çš„msg\u0026#34; }; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;ç»‘å®šThiså¹¶ä¼ å‚\u0026lt;/h1\u0026gt; \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;ç»‘å®šthiså¹¶ä¼ å‚\u0026#34; onClick={this.changeMsg} /\u0026gt; \u0026lt;h3\u0026gt;{this.state.msg}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } changeMsg() { // æ³¨æ„ï¼šè¿™é‡Œçš„changeMsg()åªæ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•ã€‚å› æ­¤ï¼Œåœ¨è§¦å‘çš„æ—¶å€™ï¼Œè¿™é‡Œçš„ this æ˜¯ undefined console.log(this); // æ‰“å°ç»“æœï¼šundefined this.setState({ msg: \u0026#34;è®¾ç½® msg ä¸ºæ–°çš„å€¼\u0026#34; }); } } ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œæ‰§è¡Œ changeMsg() æ–¹æ³•ï¼Œå°è¯•ä¿®æ”¹ this.state.msg çš„å€¼ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ï¼š\n1 Uncaught TypeError: Cannot read property \u0026#39;setState\u0026#39; of null è€Œä¸”ï¼Œæ‰“å°thisçš„ç»“æœä¹Ÿæ˜¯ undefinedã€‚è¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºè¿™é‡Œçš„ this å¹¶ä¸æ˜¯æŒ‡å‘ MyComponent ç»„ä»¶æœ¬èº«ã€‚\né‚£å¦‚ä½•è®© changeMsg() æ–¹æ³•é‡Œé¢çš„ thisï¼ŒæŒ‡å‘MyComponent ç»„ä»¶å‘¢ï¼ŸåŠæ³•æ€»æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚è¯´ï¼Œå°†changeMsg() ä¿®æ”¹ä¸ºç®­å¤´å‡½æ•°ï¼š\n1 2 3 4 5 6 changeMsg = () =\u0026gt; { console.log(this); // æ‰“å°ç»“æœï¼šMyComponent ç»„ä»¶ this.setState({ msg: \u0026#34;è®¾ç½® msg ä¸ºæ–°çš„å€¼\u0026#34; }); }; é‚£ä¹ˆï¼Œé™¤äº†ç®­å¤´å‡½æ•°å¯ä»¥ ç»‘å®š thisï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–çš„æ–¹å¼å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸‹æ¥è®²ä¸€è®²ã€‚\nç»‘å®š this çš„æ–¹å¼ä¸€ï¼šbind() ä»£ç ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 import React from \u0026#34;react\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯ MyComponent ç»„ä»¶ é»˜è®¤çš„msg\u0026#34; }; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;ç»‘å®šThiså¹¶ä¼ å‚\u0026lt;/h1\u0026gt; {/* bind çš„ä½œç”¨ï¼šä¸ºå‰é¢çš„å‡½æ•°ï¼Œä¿®æ”¹å‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚è®© å‡½æ•°å†…éƒ¨çš„thisï¼ŒæŒ‡å‘ bind å‚æ•°åˆ—è¡¨ä¸­çš„ ç¬¬ä¸€ä¸ªå‚æ•° */} \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;ç»‘å®šthiså¹¶ä¼ å‚\u0026#34; onClick={this.changeMsg1.bind(this)} /\u0026gt; \u0026lt;h3\u0026gt;{this.state.msg}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } changeMsg1() { this.setState({ msg: \u0026#34;è®¾ç½® msg ä¸ºæ–°çš„å€¼\u0026#34; }); } } ä¸Šæ–¹ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆç”¨ bind()ï¼Œè€Œä¸æ˜¯ç”¨ call/apply å‘¢ï¼Ÿå› ä¸º bind() å¹¶ä¸ä¼šç«‹å³è°ƒç”¨ï¼Œæ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚\næ³¨æ„ï¼šbind ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ç”¨æ¥ä¿®æ”¹ this æŒ‡å‘çš„ã€‚ç¬¬ä¸€ä¸ªå‚æ•°åé¢çš„æ‰€æœ‰å‚æ•°ï¼Œéƒ½å°†ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’è¿›å»ã€‚\næˆ‘ä»¬æ¥çœ‹çœ‹é€šè¿‡ bind() æ˜¯æ€ä¹ˆä¼ å‚çš„ã€‚\né€šè¿‡ bind() ç»‘å®šthisï¼Œå¹¶ç»™å‡½æ•°ä¼ å‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 import React from \u0026#34;react\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯ MyComponent ç»„ä»¶ é»˜è®¤çš„msg\u0026#34; }; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;ç»‘å®šThiså¹¶ä¼ å‚\u0026lt;/h1\u0026gt; {/* bind çš„ä½œç”¨ï¼šä¸ºå‰é¢çš„å‡½æ•°ï¼Œä¿®æ”¹å‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚è®© å‡½æ•°å†…éƒ¨çš„thisï¼ŒæŒ‡å‘ bind å‚æ•°åˆ—è¡¨ä¸­çš„ ç¬¬ä¸€ä¸ªå‚æ•° */} \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;ç»‘å®šthiså¹¶ä¼ å‚\u0026#34; onClick={this.changeMsg1.bind(this, \u0026#34;åƒå¤å•Š\u0026#34;, \u0026#34;å£¹å·å•Š\u0026#34;)} /\u0026gt; \u0026lt;h3\u0026gt;{this.state.msg}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } changeMsg1(arg1, arg2) { this.setState({ msg: \u0026#34;è®¾ç½® msg ä¸ºæ–°çš„å€¼\u0026#34; + arg1 + arg2 }); } } ç»‘å®š this å¹¶ç»™å‡½æ•°ä¼ å‚ çš„æ–¹å¼äºŒï¼šæ„é€ å‡½æ•°é‡Œè®¾ç½® bind() æˆ‘ä»¬çŸ¥é“ï¼Œæ„é€ å‡½æ•°ä¸­çš„ this æœ¬èº«å°±æ˜¯æŒ‡å‘ç»„ä»¶çš„å®ä¾‹çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›äº‹æƒ…ã€‚\nä»£ç ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 import React from \u0026#34;react\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯ MyComponent ç»„ä»¶ é»˜è®¤çš„msg\u0026#34; }; // ç»‘å®š this å¹¶ç»™å‡½æ•°ä¼ å‚çš„æ–¹å¼2: åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šå¹¶ä¼ å‚ // æ³¨æ„ï¼šå½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨ bind æ”¹å˜äº†thisæŒ‡å‘åï¼Œbind å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œæœ‰ä¸€ä¸ªã€è¿”å›å€¼ã€‘ï¼Œè¿™ä¸ªå€¼ï¼Œå°±æ˜¯è¢«æ”¹å˜thisæŒ‡å‘åçš„å‡½æ•°çš„å¼•ç”¨ã€‚ // ä¹Ÿå°±æ˜¯è¯´ï¼š bind ä¸ä¼šä¿®æ”¹ åŸå‡½æ•°çš„ this æŒ‡å‘ï¼Œè€Œæ˜¯æ”¹å˜äº† â€œå‡½æ•°æ‹·è´â€çš„thisæŒ‡å‘ã€‚ this.changeMsg2 = this.changeMsg2.bind(this, \u0026#34;åƒå¤æ©\u0026#34;, \u0026#34;å£¹å·æ©\u0026#34;); } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;ç»‘å®šThiså¹¶ä¼ å‚\u0026lt;/h1\u0026gt; \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;ç»‘å®šthiså¹¶ä¼ å‚\u0026#34; onClick={this.changeMsg2} /\u0026gt; \u0026lt;h3\u0026gt;{this.state.msg}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } changeMsg2(arg1, arg2) { this.setState({ msg: \u0026#34;è®¾ç½® msg ä¸ºæ–°çš„å€¼\u0026#34; + arg1 + arg2 }); } } ä¸Šæ–¹ä»£ç ä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨ bind æ”¹å˜äº†thisæŒ‡å‘åï¼Œbind å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œæœ‰ä¸€ä¸ªã€è¿”å›å€¼ã€‘ï¼Œè¿™ä¸ªå€¼ï¼Œå°±æ˜¯è¢«æ”¹å˜thisæŒ‡å‘åçš„å‡½æ•°çš„å¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š bind ä¸ä¼šä¿®æ”¹ åŸå‡½æ•°çš„ this æŒ‡å‘ï¼Œè€Œæ˜¯æ”¹å˜äº† â€œå‡½æ•°æ‹·è´â€çš„thisæŒ‡å‘ã€‚\nç»‘å®š this å¹¶ç»™å‡½æ•°ä¼ å‚ çš„æ–¹å¼ä¸‰ï¼šç®­å¤´å‡½æ•°ã€èã€‘ ç¬¬ä¸‰ç§æ–¹å¼ç”¨å¾—æœ€å¤šã€‚\nä»£ç ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 import React from \u0026#34;react\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯ MyComponent ç»„ä»¶ é»˜è®¤çš„msg\u0026#34; }; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;ç»‘å®šThiså¹¶ä¼ å‚\u0026lt;/h1\u0026gt; \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;ç»‘å®šthiså¹¶ä¼ å‚\u0026#34; onClick={() =\u0026gt; { this.changeMsg3(\u0026#34;åƒå¤3\u0026#34;, \u0026#34;å£¹å·3\u0026#34;); }} /\u0026gt; \u0026lt;h3\u0026gt;{this.state.msg}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } changeMsg3 = (arg1, arg2) =\u0026gt; { // console.log(this); // æ³¨æ„ï¼šè¿™é‡Œçš„æ–¹å¼ï¼Œæ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œå› æ­¤ï¼Œåœ¨è§¦å‘çš„æ—¶å€™ï¼Œè¿™é‡Œçš„ this æ˜¯ undefined this.setState({ msg: \u0026#34;ç»‘å®šthiså¹¶ä¼ å‚çš„æ–¹å¼3ï¼š\u0026#34; + arg1 + arg2 }); }; } ","date":"2026-02-11T17:00:00+08:00","permalink":"https://impself.github.io/p/react-bind-this-and-pass-params/","title":"React 05-ç»‘å®š this ä¸å‡½æ•°ä¼ å‚"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\ndefaultProps å’Œ prop-types ä½¿ç”¨ defaultProps è®¾ç½®ç»„ä»¶çš„é»˜è®¤å€¼ React ä¸­ï¼Œä½¿ç”¨é™æ€çš„ defaultProps å±æ€§ï¼Œæ¥è®¾ç½®ç»„ä»¶çš„é»˜è®¤å±æ€§å€¼ã€‚\næ ¼å¼ä¸¾ä¾‹ï¼š\n1 2 3 4 // åœ¨ React ä¸­ï¼Œä½¿ç”¨é™æ€çš„ defaultProps å±æ€§ï¼Œæ¥è®¾ç½®ç»„ä»¶çš„é»˜è®¤å±æ€§å€¼ static defaultProps = { initcount: 0 // å¦‚æœå¤–ç•Œæ²¡æœ‰ä¼ é€’ initcountï¼Œé‚£ä¹ˆï¼Œè‡ªå·±åˆå§‹åŒ–ä¸€ä¸ªæ•°å€¼ï¼ˆæ¯”å¦‚0ï¼‰ }; ä½¿ç”¨prop-typesè¿›è¡Œpropsæ•°æ®ç±»å‹çš„æ ¡éªŒ åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ prop-types æŠŠå¤–ç•Œä¼ é€’è¿‡æ¥çš„å±æ€§ï¼Œåšç±»å‹æ ¡éªŒã€‚å¦‚æœç±»å‹ä¸åŒ¹é…ï¼Œæ§åˆ¶å°ä¼šå¼¹å‡ºå‘Šè­¦ã€‚\næ³¨æ„ï¼šå¦‚æœè¦ä¸º ä¼ é€’è¿‡æ¥çš„å±æ€§åšç±»å‹æ ¡éªŒï¼Œå¿…é¡»å®‰è£… React æä¾›çš„ ç¬¬ä¸‰æ–¹åŒ…ï¼Œå«åš prop-typesã€‚\næ ¼å¼ä¸¾ä¾‹ï¼š\n1 2 3 static propTypes = { initcount: ReactTypes.number // ä½¿ç”¨ prop-types åŒ…ï¼Œæ¥å®šä¹‰ initcount ä¸º number ç±»å‹ }; ä¸‹æ–¹ä»£ç ä¸­ï¼Œåœ¨å¼•ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå¦‚æœç±»å‹ä¸åŒ¹é…ï¼š\n1 2 3 4 5 6 7 8 // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM ReactDOM.render( \u0026lt;div\u0026gt; {/* è§„å®šï¼Œæ¯ä¸ªç”¨æˆ·åœ¨ä½¿ç”¨ ç»„ä»¶çš„æ—¶å€™ï¼Œå¿…é¡»ä¼ é€’ä¸€ä¸ª é»˜è®¤çš„ æ•°å€¼ï¼Œä½œä¸º ç»„ä»¶åˆå§‹åŒ–çš„ æ•°æ® */} \u0026lt;Counter initcount=\u0026#34;æˆ‘æ˜¯stringç±»å‹\u0026#34;\u0026gt;\u0026lt;/Counter\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); æ§åˆ¶å°å‘Šè­¦å¦‚ä¸‹ï¼š\nä»£ç ä¸¾ä¾‹ æˆ‘ä»¬æŠŠ defaultProps å’Œ prop-types æ¥ä¸¾ä¸ªä¾‹å­ã€‚\nï¼ˆ1ï¼‰index.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å®¹å™¨ï¼Œé€šè¿‡ React æ¸²æŸ“å¾—åˆ°çš„ è™šæ‹ŸDOMï¼Œä¼šå‘ˆç°åˆ°è¿™ä¸ªä½ç½® --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ï¼ˆ2ï¼‰main.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // JSæ‰“åŒ…å…¥å£æ–‡ä»¶ // 1. å¯¼å…¥åŒ… import React from \u0026#34;react\u0026#34;; import ReactDOM from \u0026#34;react-dom\u0026#34;; // å¯¼å…¥è®¡æ•°å™¨ç»„ä»¶ import Counter from \u0026#34;./components/Counter.jsx\u0026#34;; // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM ReactDOM.render( \u0026lt;div\u0026gt; {/* è§„å®šï¼Œæ¯ä¸ªç”¨æˆ·åœ¨ä½¿ç”¨ ç»„ä»¶çš„æ—¶å€™ï¼Œå¿…é¡»ä¼ é€’ä¸€ä¸ª é»˜è®¤çš„ æ•°å€¼ï¼Œä½œä¸º ç»„ä»¶åˆå§‹åŒ–çš„ æ•°æ® */} \u0026lt;Counter initcount={0}\u0026gt;\u0026lt;/Counter\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); ï¼ˆ3ï¼‰/components/Counter.jsxï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 import React from \u0026#34;react\u0026#34;; // æ³¨æ„ï¼š prop-types åŒ…ä¸­èŒèƒ½è·Ÿå•ä¸€ï¼Œåªæä¾›äº† ä¸€äº›å¸¸è§çš„ æ•°æ®ç±»å‹ï¼Œç”¨äºåšç±»å‹æ ¡éªŒ import ReactTypes from \u0026#34;prop-types\u0026#34;; export default class Counter extends React.Component { constructor(props) { super(props); // åˆå§‹åŒ–ç»„ä»¶ï¼Œä¿å­˜çš„æ˜¯ç»„ä»¶çš„ç§æœ‰æ•°æ® this.state = { msg: \u0026#34;ok\u0026#34;, count: props.initcount // æŠŠ çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ initcount èµ‹å€¼ç»™å­ç»„ä»¶ state ä¸­çš„ countå€¼ã€‚è¿™æ ·çš„è¯ï¼Œå°±æŠŠ count å€¼æ”¹æˆäº†å¯è¯»å¯å†™çš„ state å±æ€§ã€‚å› æ­¤ï¼Œä»¥åå°±èƒ½å®ç°â€œç‚¹å‡» æŒ‰é’® ï¼Œcount å€¼ + 1â€çš„éœ€æ±‚äº† }; } // åœ¨ React ä¸­ï¼Œä½¿ç”¨é™æ€çš„ defaultProps å±æ€§ï¼Œæ¥è®¾ç½®ç»„ä»¶çš„é»˜è®¤å±æ€§å€¼ static defaultProps = { initcount: 0 // å¦‚æœå¤–ç•Œæ²¡æœ‰ä¼ é€’ initcountï¼Œé‚£ä¹ˆï¼Œè‡ªå·±åˆå§‹åŒ–ä¸€ä¸ª æ•°å€¼ï¼Œä¸º0 }; render() { return ( \u0026lt;div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ Counter è®¡æ•°å™¨ç»„ä»¶ \u0026lt;/h3\u0026gt; \u0026lt;p\u0026gt;å½“å‰çš„è®¡æ•°æ˜¯ï¼š{this.state.count}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); // å½“ return æ‰§è¡Œå®Œæ¯•åï¼Œ è™šæ‹ŸDOMåˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯ï¼Œè¿˜æ²¡æœ‰æŒ‚è½½åˆ°çœŸæ­£çš„é¡µé¢ä¸­ } } è¿è¡Œæ•ˆæœï¼š\näº‹ä»¶ç»‘å®š æ¡ˆä¾‹ï¼šç‚¹å‡»æŒ‰é’®åï¼Œè®¡æ•°å™¨ +1ã€‚\nåŸç”Ÿjsåšäº‹ä»¶ç»‘å®š ä»£ç ä¸¾ä¾‹ï¼š\nï¼ˆ1ï¼‰index.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å®¹å™¨ï¼Œé€šè¿‡ React æ¸²æŸ“å¾—åˆ°çš„ è™šæ‹ŸDOMï¼Œä¼šå‘ˆç°åˆ°è¿™ä¸ªä½ç½® --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ï¼ˆ2ï¼‰main.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // JSæ‰“åŒ…å…¥å£æ–‡ä»¶ // 1. å¯¼å…¥åŒ… import React from \u0026#34;react\u0026#34;; import ReactDOM from \u0026#34;react-dom\u0026#34;; // å¯¼å…¥è®¡æ•°å™¨ç»„ä»¶ import Counter from \u0026#34;./components/Counter.jsx\u0026#34;; // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM ReactDOM.render( \u0026lt;div\u0026gt; {/* è§„å®šï¼Œæ¯ä¸ªç”¨æˆ·åœ¨ä½¿ç”¨ ç»„ä»¶çš„æ—¶å€™ï¼Œå¿…é¡»ä¼ é€’ä¸€ä¸ª é»˜è®¤çš„ æ•°å€¼ï¼Œä½œä¸º ç»„ä»¶åˆå§‹åŒ–çš„ æ•°æ® */} \u0026lt;Counter initcount={0}\u0026gt;\u0026lt;/Counter\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); ï¼ˆ3ï¼‰/components/Counter.jsxï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 import React from \u0026#34;react\u0026#34;; // æ³¨æ„ï¼š prop-types åŒ…çš„èŒèƒ½è·Ÿå•ä¸€ï¼Œåªæä¾›äº† ä¸€äº›å¸¸è§çš„ æ•°æ®ç±»å‹ï¼Œç”¨äºåšç±»å‹æ ¡éªŒ import ReactTypes from \u0026#34;prop-types\u0026#34;; export default class Counter extends React.Component { constructor(props) { super(props); // åˆå§‹åŒ–ç»„ä»¶ï¼Œä¿å­˜çš„æ˜¯ç»„ä»¶çš„ç§æœ‰æ•°æ® this.state = { msg: \u0026#34;ok\u0026#34;, count: props.initcount // æŠŠ çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ initcount èµ‹å€¼ç»™å­ç»„ä»¶ state ä¸­çš„ countå€¼ã€‚è¿™æ ·çš„è¯ï¼Œå°±æŠŠ count å€¼æ”¹æˆäº†å¯è¯»å¯å†™çš„ state å±æ€§ã€‚å› æ­¤ï¼Œä»¥åå°±èƒ½å®ç°â€œç‚¹å‡» æŒ‰é’® ï¼Œcount å€¼ + 1â€çš„éœ€æ±‚äº† }; } // åœ¨ React ä¸­ï¼Œä½¿ç”¨é™æ€çš„ defaultProps å±æ€§ï¼Œæ¥è®¾ç½®ç»„ä»¶çš„é»˜è®¤å±æ€§å€¼ static defaultProps = { initcount: 0 // å¦‚æœå¤–ç•Œæ²¡æœ‰ä¼ é€’ initcountï¼Œé‚£ä¹ˆï¼Œè‡ªå·±åˆå§‹åŒ–ä¸€ä¸ªæ•°å€¼ï¼ˆæ¯”å¦‚0ï¼‰ }; // è¿™æ˜¯åˆ›å»ºä¸€ä¸ª é™æ€çš„ propTypes å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå¯ä»¥æŠŠ å¤–ç•Œä¼ é€’è¿‡æ¥çš„å±æ€§ï¼Œåšç±»å‹æ ¡éªŒ static propTypes = { initcount: ReactTypes.number // ä½¿ç”¨ prop-types åŒ…ï¼Œæ¥å®šä¹‰ initcount ä¸º number ç±»å‹ }; render() { return ( \u0026lt;div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ Counter è®¡æ•°å™¨ç»„ä»¶ \u0026lt;/h3\u0026gt; \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;+1\u0026#34; id=\u0026#34;btn\u0026#34; /\u0026gt; \u0026lt;p\u0026gt;å½“å‰çš„è®¡æ•°æ˜¯ï¼š{this.state.count}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); // å½“ return æ‰§è¡Œå®Œæ¯•åï¼Œ è™šæ‹ŸDOMåˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯ï¼Œè¿˜æ²¡æœ‰æŒ‚è½½åˆ°çœŸæ­£çš„é¡µé¢ä¸­ } // å½“ç»„ä»¶æŒ‚è½½åˆ°é¡µé¢ä¸Šä¹‹åï¼Œä¼šè¿›å…¥è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåªè¦è¿›å…¥è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°äº†ï¼Œå¿…ç„¶è¯´æ˜ï¼Œé¡µé¢ä¸Šï¼Œå·²ç»æœ‰å¯è§çš„DOMå…ƒç´ äº† componentDidMount() { // åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒçš„å» æ“ä½œ é¡µé¢ä¸Šä½ éœ€è¦ä½¿ç”¨çš„ DOM å…ƒç´ äº†ã€‚ // ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ“ä½œDOMå…ƒç´ ï¼Œæœ€æ—©ï¼Œåªèƒ½åœ¨ componentDidMount ä¸­è¿›è¡Œã€‚ document.getElementById(\u0026#34;btn\u0026#34;).onclick = () =\u0026gt; { this.setState({ count: this.state.count + 1 }); }; } } ä½¿ç”¨ React æä¾›çš„æ–¹æ³•ï¼Œåšäº‹ä»¶ç»‘å®š ä»£ç ä¸¾ä¾‹ï¼š\nï¼ˆ1ï¼‰index.htmlå’Œ ï¼ˆ2ï¼‰main.js çš„ä»£ç ä¸å˜ï¼Œå’Œä¸Šä¸€å°æ®µä¸­çš„ä»£ç ä¸€è‡´ã€‚\nï¼ˆ3ï¼‰/components/Counter.jsxï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 import React from \u0026#34;react\u0026#34;; // æ³¨æ„ï¼š prop-types åŒ…çš„èŒèƒ½è·Ÿå•ä¸€ï¼Œåªæä¾›äº† ä¸€äº›å¸¸è§çš„ æ•°æ®ç±»å‹ï¼Œç”¨äºåšç±»å‹æ ¡éªŒ import ReactTypes from \u0026#34;prop-types\u0026#34;; export default class Counter extends React.Component { constructor(props) { super(props); // åˆå§‹åŒ–ç»„ä»¶ï¼Œä¿å­˜çš„æ˜¯ç»„ä»¶çš„ç§æœ‰æ•°æ® this.state = { msg: \u0026#34;ok\u0026#34;, count: props.initcount // æŠŠ çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ initcount èµ‹å€¼ç»™å­ç»„ä»¶ state ä¸­çš„ countå€¼ã€‚è¿™æ ·çš„è¯ï¼Œå°±æŠŠ count å€¼æ”¹æˆäº†å¯è¯»å¯å†™çš„ state å±æ€§ã€‚å› æ­¤ï¼Œä»¥åå°±èƒ½å®ç°â€œç‚¹å‡» æŒ‰é’® ï¼Œcount å€¼ + 1â€çš„éœ€æ±‚äº† }; } // åœ¨ React ä¸­ï¼Œä½¿ç”¨é™æ€çš„ defaultProps å±æ€§ï¼Œæ¥è®¾ç½®ç»„ä»¶çš„é»˜è®¤å±æ€§å€¼ static defaultProps = { initcount: 0 // å¦‚æœå¤–ç•Œæ²¡æœ‰ä¼ é€’ initcountï¼Œé‚£ä¹ˆï¼Œè‡ªå·±åˆå§‹åŒ–ä¸€ä¸ªæ•°å€¼ï¼ˆæ¯”å¦‚0ï¼‰ }; // è¿™æ˜¯åˆ›å»ºä¸€ä¸ª é™æ€çš„ propTypes å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå¯ä»¥æŠŠ å¤–ç•Œä¼ é€’è¿‡æ¥çš„å±æ€§ï¼Œåšç±»å‹æ ¡éªŒ static propTypes = { initcount: ReactTypes.number // ä½¿ç”¨ prop-types åŒ…ï¼Œæ¥å®šä¹‰ initcount ä¸º number ç±»å‹ }; render() { return ( \u0026lt;div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ Counter è®¡æ•°å™¨ç»„ä»¶ \u0026lt;/h3\u0026gt; {/* è¿™é‡Œçš„ this æŒ‡å‘çš„æ˜¯ Counter ç»„ä»¶çš„å®ä¾‹ */} \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;+1\u0026#34; id=\u0026#34;btn\u0026#34; onClick={this.myMethod} /\u0026gt; \u0026lt;p\u0026gt;å½“å‰çš„è®¡æ•°æ˜¯ï¼š{this.state.count}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); // å½“ return æ‰§è¡Œå®Œæ¯•åï¼Œ è™šæ‹ŸDOMåˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯ï¼Œè¿˜æ²¡æœ‰æŒ‚è½½åˆ°çœŸæ­£çš„é¡µé¢ä¸­ } // ç‚¹å‡»äº‹ä»¶çš„æ–¹æ³•å®šä¹‰ myMethod = () =\u0026gt; { // ä¿®æ”¹ç»„ä»¶çš„stateé‡Œé¢çš„å€¼ this.setState({ count: this.state.count + 1 }); }; } ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šshouldComponentUpdate() åœ¨ shouldComponentUpdate() å‡½æ•°ä¸­ï¼Œå¿…é¡»è¦æ±‚è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœè¿”å›çš„å€¼æ˜¯ falseï¼Œåˆ™ä¸ä¼šç»§ç»­æ‰§è¡Œåç»­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥é€€å›åˆ°äº† è¿è¡Œä¸­ çš„çŠ¶æ€ã€‚å› ä¸ºæ­¤æ—¶ï¼Œåç»­çš„ render å‡½æ•°å¹¶æ²¡æœ‰è¢«è°ƒç”¨ï¼Œå› æ­¤é¡µé¢ä¸ä¼šè¢«æ›´æ–°ï¼Œä½†æ˜¯ç»„ä»¶çš„ state çŠ¶æ€ï¼Œå´è¢«ä¿®æ”¹äº†ã€‚è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šå¦‚æœè¿”å›å€¼ä¸º falseï¼Œæ­¤æ—¶åªæ˜¯æ›´æ–°äº† state é‡Œé¢çš„æ•°å€¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ¸²æŸ“åˆ° DOMèŠ‚ç‚¹ä¸Šã€‚\nåˆ©ç”¨ä¸Šé¢è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ¥ä¸¾ä¸ªä¾‹å­ã€‚\nä¸¾ä¾‹ï¼šå®ç° Counter è®¡æ•°å™¨åªåœ¨å¶æ•°æƒ…å†µä¸‹æ›´æ–°ã€‚\nå®ç°æ€è·¯ï¼šåœ¨ shouldComponentUpdate() å‡½æ•°ä¸­ï¼Œå¦‚æœ state ä¸­ çš„count çš„å€¼ä¸ºå¥‡æ•°ï¼Œå°± return falseï¼›å¦åˆ™å°± return trueã€‚\nä»£ç å®ç°ï¼šï¼ˆæˆ‘ä»¬åœ¨ä¸Šé¢çš„Counter.jsxä»£ç åŸºç¡€ä¹‹ä¸Šï¼Œåšæ·»åŠ ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 // åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–° shouldComponentUpdate(nextProps, nextState) { // ç»è¿‡æ‰“å°æµ‹è¯•å‘ç°ï¼šåœ¨ shouldComponentUpdate ä¸­ï¼Œé€šè¿‡ this.state.count æ‹¿åˆ°çš„å€¼ï¼Œæ˜¯ä¸Šä¸€æ¬¡çš„æ—§æ•°æ®ï¼Œå¹¶ä¸æ˜¯å½“å‰æœ€æ–°çš„ï¼› // è§£å†³åŠæ³•ï¼šé€šè¿‡ shouldComponentUpdate å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•° nextStateï¼Œå¯ä»¥æ‹¿åˆ° æœ€æ–°çš„ state æ•°æ®ã€‚ console.log(this.state.count + \u0026#34; ---- \u0026#34; + nextState.count); // éœ€æ±‚ï¼š å¦‚æœ state ä¸­çš„ count å€¼æ˜¯å¶æ•°ï¼Œåˆ™ æ›´æ–°é¡µé¢ï¼›å¦‚æœ count å€¼ æ˜¯å¥‡æ•°ï¼Œåˆ™ä¸æ›´æ–°é¡µé¢ã€‚æœ€ç»ˆå®ç°çš„çš„é¡µé¢æ•ˆæœï¼š2ï¼Œ4ï¼Œ6ï¼Œ8ï¼Œ10ï¼Œ12.... // return this.state.count % 2 === 0 ? true : false return nextState.count % 2 === 0 ? true : false; } ä¸Šé¢è¿™éƒ¨åˆ†çš„ä»£ç ï¼Œå’Œ render() æ–¹æ³•æ˜¯å¹¶åˆ—çš„ã€‚æˆ‘ä»¬éœ€è¦æ³¨æ„é‡Œé¢çš„æ³¨é‡Šï¼Œå…³æ³¨ nextState å‚æ•°çš„ç”¨æ³•ã€‚\nåœ¨jsä»£ç ä¸­è·å–htmlæ ‡ç­¾çš„å±æ€§ æ¯”å¦‚è¯´ï¼Œå¦‚æœæƒ³è·å– htmlæ ‡ç­¾çš„ innerHTML å±æ€§ï¼Œåšæ³•å¦‚ä¸‹ï¼š\né€šè¿‡åŸç”Ÿ js è·å–ï¼š\n1 document.getElementById(\u0026#39;myh3\u0026#39;).innerHTML ä¹Ÿå¯ä»¥é€šè¿‡ React æä¾›çš„ refs è·å–ï¼š\n1 this.refs.h3.innerHTML ä»£ç ä¸¾ä¾‹ï¼š\nï¼ˆ3ï¼‰/components/Counter.jsxï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 import React from \u0026#34;react\u0026#34;; // æ³¨æ„ï¼š prop-types åŒ…çš„èŒèƒ½è·Ÿå•ä¸€ï¼Œåªæä¾›äº† ä¸€äº›å¸¸è§çš„ æ•°æ®ç±»å‹ï¼Œç”¨äºåšç±»å‹æ ¡éªŒ import ReactTypes from \u0026#34;prop-types\u0026#34;; export default class Counter extends React.Component { constructor(props) { super(props); // åˆå§‹åŒ–ç»„ä»¶ï¼Œä¿å­˜çš„æ˜¯ç»„ä»¶çš„ç§æœ‰æ•°æ® this.state = { msg: \u0026#34;ok\u0026#34;, count: props.initcount // æŠŠ çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ initcount èµ‹å€¼ç»™å­ç»„ä»¶ state ä¸­çš„ countå€¼ã€‚è¿™æ ·çš„è¯ï¼Œå°±æŠŠ count å€¼æ”¹æˆäº†å¯è¯»å¯å†™çš„ state å±æ€§ã€‚å› æ­¤ï¼Œä»¥åå°±èƒ½å®ç°â€œç‚¹å‡» æŒ‰é’® ï¼Œcount å€¼ + 1â€çš„éœ€æ±‚äº† }; } // åœ¨ React ä¸­ï¼Œä½¿ç”¨é™æ€çš„ defaultProps å±æ€§ï¼Œæ¥è®¾ç½®ç»„ä»¶çš„é»˜è®¤å±æ€§å€¼ static defaultProps = { initcount: 0 // å¦‚æœå¤–ç•Œæ²¡æœ‰ä¼ é€’ initcountï¼Œé‚£ä¹ˆï¼Œè‡ªå·±åˆå§‹åŒ–ä¸€ä¸ªæ•°å€¼ï¼ˆæ¯”å¦‚0ï¼‰ }; // è¿™æ˜¯åˆ›å»ºä¸€ä¸ª é™æ€çš„ propTypes å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå¯ä»¥æŠŠ å¤–ç•Œä¼ é€’è¿‡æ¥çš„å±æ€§ï¼Œåšç±»å‹æ ¡éªŒ static propTypes = { initcount: ReactTypes.number // ä½¿ç”¨ prop-types åŒ…ï¼Œæ¥å®šä¹‰ initcount ä¸º number ç±»å‹ }; render() { return ( \u0026lt;div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ Counter è®¡æ•°å™¨ç»„ä»¶ \u0026lt;/h3\u0026gt; {/* è¿™é‡Œçš„ this æŒ‡å‘çš„æ˜¯ Counter ç»„ä»¶çš„å®ä¾‹ */} \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;+1\u0026#34; id=\u0026#34;btn\u0026#34; onClick={this.myMethod} /\u0026gt; \u0026lt;h3 id=\u0026#34;myh3\u0026#34; ref=\u0026#34;mymyh3\u0026#34;\u0026gt; å½“å‰çš„è®¡æ•°æ˜¯ï¼š{this.state.count} \u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); // å½“ return æ‰§è¡Œå®Œæ¯•åï¼Œ è™šæ‹ŸDOMåˆ›å»ºå¥½äº†ï¼Œä½†æ˜¯ï¼Œè¿˜æ²¡æœ‰æŒ‚è½½åˆ°çœŸæ­£çš„é¡µé¢ä¸­ } // ç‚¹å‡»äº‹ä»¶çš„æ–¹æ³•å®šä¹‰ myMethod = () =\u0026gt; { // ä¿®æ”¹ç»„ä»¶çš„stateé‡Œé¢çš„å€¼ this.setState({ count: this.state.count + 1 }); }; // åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–° shouldComponentUpdate(nextProps, nextState) { // éœ€æ±‚ï¼š å¦‚æœ state ä¸­çš„ count å€¼æ˜¯å¶æ•°ï¼Œåˆ™ æ›´æ–°é¡µé¢ï¼›å¦‚æœ count å€¼ æ˜¯å¥‡æ•°ï¼Œåˆ™ä¸æ›´æ–°é¡µé¢ã€‚æœ€ç»ˆå®ç°çš„çš„é¡µé¢æ•ˆæœï¼š2ï¼Œ4ï¼Œ6ï¼Œ8ï¼Œ10ï¼Œ12.... // ç»è¿‡æ‰“å°æµ‹è¯•å‘ç°ï¼šåœ¨ shouldComponentUpdate ä¸­ï¼Œé€šè¿‡ this.state.count æ‹¿åˆ°çš„å€¼ï¼Œæ˜¯ä¸Šä¸€æ¬¡çš„æ—§æ•°æ®ï¼Œå¹¶ä¸æ˜¯å½“å‰æœ€æ–°çš„ï¼› // è§£å†³åŠæ³•ï¼šé€šè¿‡ shouldComponentUpdate å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•° nextStateï¼Œå¯ä»¥æ‹¿åˆ° æœ€æ–°çš„ state æ•°æ®ã€‚ console.log(this.state.count + \u0026#34; ---- \u0026#34; + nextState.count); // return this.state.count % 2 === 0 ? true : false // return nextState.count % 2 === 0 ? true : false; return true; } // ç»„ä»¶å°†è¦æ›´æ–°ã€‚æ­¤æ—¶å°šæœªæ›´æ–°ï¼Œåœ¨è¿›å…¥è¿™ä¸ª ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ—¶å€™ï¼Œå†…å­˜ä¸­çš„è™šæ‹ŸDOMæ˜¯æ—§çš„ï¼Œé¡µé¢ä¸Šçš„ DOM å…ƒç´  ä¹Ÿæ˜¯æ—§çš„ componentWillUpdate() { // ç»è¿‡æ‰“å°åˆ†æå‘ç°ï¼šæ­¤æ—¶é¡µé¢ä¸Šçš„ DOM èŠ‚ç‚¹ï¼Œéƒ½æ˜¯æ—§çš„ï¼Œåº”è¯¥æ…é‡æ“ä½œï¼Œå› ä¸ºä½ å¯èƒ½æ“ä½œçš„æ˜¯æ—§DOM // console.log(document.getElementById(\u0026#39;myh3\u0026#39;).innerHTML) console.log(this.refs.mymyh3.innerHTML); } // ç»„ä»¶å®Œæˆäº†æ›´æ–°ã€‚æ­¤æ—¶ï¼Œstate ä¸­çš„æ•°æ®ã€è™šæ‹ŸDOMã€é¡µé¢ä¸Šçš„DOMï¼Œéƒ½æ˜¯æœ€æ–°çš„ï¼Œæ­¤æ—¶ï¼Œä½ å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„å»æ“ä½œé¡µé¢äº† componentDidUpdate() { console.log(this.refs.mymyh3.innerHTML); } } ä¸Šæ–¹ä»£ç ä¸­ï¼ŒcomponentWillUpdate() å’Œ componentDidUpdate() æ–¹æ³•é‡Œçš„ä»£ç ï¼Œå°±æ˜¯æˆ‘ä»¬è¿™ä¸€æ®µè¦ä¸¾çš„ä¾‹å­ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ\u0026lt;h3 id=\u0026quot;myh3\u0026quot; ref=\u0026quot;mymyh3\u0026quot;\u0026gt;è¿™éƒ¨åˆ†ä»£ç ä¸­ï¼Œå±æ€§ååªèƒ½å°å†™ï¼Œä¸èƒ½å¤§å†™ã€‚\nå·¥ç¨‹æ–‡ä»¶ï¼š\n2019-02-12-ReactDemo.zip ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šcomponentWillReceiveProps() å½“å­ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„æ—¶å€™ï¼Œä¸ä¼šè§¦å‘è¿™ä¸ª å‡½æ•°ã€‚\nåªæœ‰å½“çˆ¶ç»„ä»¶ä¸­ï¼Œé€šè¿‡ æŸäº› äº‹ä»¶ï¼Œé‡æ–°ä¿®æ”¹äº† ä¼ é€’ç»™ å­ç»„ä»¶çš„ props æ•°æ®ä¹‹åï¼Œæ‰ä¼šè§¦å‘ componentWillReceivePropsã€‚\nä»£ç ä¸¾ä¾‹ï¼š\nï¼ˆ1ï¼‰index.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å®¹å™¨ï¼Œé€šè¿‡ React æ¸²æŸ“å¾—åˆ°çš„ è™šæ‹ŸDOMï¼Œä¼šå‘ˆç°åˆ°è¿™ä¸ªä½ç½® --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ï¼ˆ2ï¼‰main.js:ï¼ˆå¼•å…¥ç»„ä»¶ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // JSæ‰“åŒ…å…¥å£æ–‡ä»¶ // 1. å¯¼å…¥åŒ… import React from \u0026#34;react\u0026#34;; import ReactDOM from \u0026#34;react-dom\u0026#34;; import MyParent from \u0026#34;./components/TestReceiveProps.jsx\u0026#34;; // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM ReactDOM.render( \u0026lt;div\u0026gt; \u0026lt;MyParent\u0026gt;\u0026lt;/MyParent\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); ï¼ˆ3ï¼‰TestReceiveProps.jsxï¼šï¼ˆç»„ä»¶çš„å®šä¹‰ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 import React from \u0026#34;react\u0026#34;; // çˆ¶ç»„ä»¶ export default class Parent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯çˆ¶ç»„ä»¶ä¸­çš„ msg æ¶ˆæ¯\u0026#34; }; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;è¿™æ˜¯çˆ¶ç»„ä»¶\u0026lt;/h1\u0026gt; \u0026lt;input type=\u0026#34;button\u0026#34; value=\u0026#34;ç‚¹å‡»ä¿®æ”¹çˆ¶ç»„ä»¶çš„ MSG\u0026#34; onClick={this.changeMsg} /\u0026gt; \u0026lt;hr /\u0026gt; {/* åœ¨çˆ¶ç»„ä»¶ Parent ä¸­å¼•ç”¨å­ç»„ä»¶ Son */} \u0026lt;Son pmsg={this.state.msg} /\u0026gt; \u0026lt;/div\u0026gt; ); } changeMsg = () =\u0026gt; { this.setState({ msg: \u0026#34;ä¿®æ”¹ç»„ä»¶çš„msgä¸ºæ–°çš„å€¼\u0026#34; }); }; } // å­ç»„ä»¶ class Son extends React.Component { constructor(props) { super(props); this.state = {}; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯å­ç»„ä»¶ --- {this.props.pmsg}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } // ç»„ä»¶å°†è¦æ¥æ”¶å¤–ç•Œä¼ é€’è¿‡æ¥çš„æ–°çš„ props å±æ€§å€¼ // å½“å­ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„æ—¶å€™ï¼Œä¸ä¼šè§¦å‘è¿™ä¸ª å‡½æ•°ï¼› // åªæœ‰å½“ çˆ¶ç»„ä»¶ä¸­ï¼Œé€šè¿‡ æŸäº› äº‹ä»¶ï¼Œé‡æ–°ä¿®æ”¹äº† ä¼ é€’ç»™ å­ç»„ä»¶çš„ props æ•°æ®ä¹‹åï¼Œæ‰ä¼šè§¦å‘ componentWillReceiveProps componentWillReceiveProps(nextProps) { // console.log(\u0026#39;è¢«è§¦å‘äº†ï¼\u0026#39;); // æ³¨æ„ï¼š åœ¨ componentWillReceiveProps è¢«è§¦å‘çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ this.props æ¥è·å–å±æ€§å€¼ï¼Œè¿™ä¸ªå±æ€§å€¼ï¼Œä¸æ˜¯æœ€æ–°çš„ï¼Œæ˜¯ä¸Šä¸€æ¬¡çš„æ—§å±æ€§å€¼ // å¦‚æœæƒ³è¦è·å–æœ€æ–°çš„å±æ€§å€¼ï¼Œéœ€è¦é€šè¿‡ componentWillReceiveProps çš„å‚æ•°åˆ—è¡¨æ¥è·å– console.log(this.props.pmsg + \u0026#34; ---- \u0026#34; + nextProps.pmsg); } } ä¸Šæ–¹ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ Parent ä¸­å¼•å…¥äº†å­ç»„ä»¶ Sonã€‚é‡ç‚¹æ³¨æ„ componentWillReceiveProps()å‡½æ•° çš„æ³¨é‡Šéƒ¨åˆ†ã€‚\n","date":"2026-02-11T16:00:00+08:00","permalink":"https://impself.github.io/p/react-component-common-props-functions/","title":"React 04-ç»„ä»¶ï¼ˆäºŒï¼‰ï¼šå¸¸è§å±æ€§å’Œå‡½æ•°"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\næ­å»ºå¼€å‘ç¯å¢ƒ å®˜æ–¹æ–‡æ¡£ï¼šhttps://reactnative.cn/docs/getting-started.html\nå®‰è£…Nodeã€homebrewã€Watchman å®‰è£… homebrewï¼š\nå®‰è£… watchmanï¼š\n1 brew install watchman Watchmanåˆ™æ˜¯ç”± Facebook æä¾›çš„ç›‘è§†æ–‡ä»¶ç³»ç»Ÿå˜æ›´çš„å·¥å…·ã€‚å®‰è£…æ­¤å·¥å…·å¯ä»¥æé«˜å¼€å‘æ—¶çš„æ€§èƒ½ï¼ˆpackager å¯ä»¥å¿«é€Ÿæ•æ‰æ–‡ä»¶çš„å˜åŒ–ä»è€Œå®ç°å®æ—¶åˆ·æ–°ï¼‰ã€‚\nå®‰è£… React Native çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆreact-native-cliï¼‰ å®‰è£… react-native-cliï¼š\n1 npm install -g react-native-cli React Native çš„å‘½ä»¤è¡Œå·¥å…·ç”¨äºæ‰§è¡Œåˆ›å»ºã€åˆå§‹åŒ–ã€æ›´æ–°é¡¹ç›®ã€è¿è¡Œæ‰“åŒ…æœåŠ¡ï¼ˆpackagerï¼‰ç­‰ä»»åŠ¡ã€‚\nåˆ›å»ºæ–°é¡¹ç›® 1 react-native init MyApp --version 0.44.3 ç¼–è¯‘å¹¶è¿è¡Œ React Native åº”ç”¨ åœ¨ ios æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼š\n1 react-native run-ios è°ƒè¯• å®˜ç½‘æ–‡æ¡£ï¼šhttps://reactnative.cn/docs/debugging.html\nè®¿é—® App å†…çš„å¼€å‘èœå• å¦‚æœæ˜¯åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œï¼Œè¿˜å¯ä»¥æŒ‰ä¸‹Command + Då¿«æ·é”®ï¼ŒAndroid æ¨¡æ‹Ÿå™¨å¯¹åº”çš„åˆ™æ˜¯CommandâŒ˜ + Mï¼ˆwindows ä¸Šå¯èƒ½æ˜¯ F1 æˆ–è€… F2ï¼‰ï¼Œæˆ–æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œadb shell input keyevent 82æ¥å‘é€èœå•é”®å‘½ä»¤ã€‚\n","date":"2026-02-11T16:00:00+08:00","permalink":"https://impself.github.io/p/react-native-intro/","title":"React 11-React Native åˆè¯†"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nJSXä»‹ç» JSXçš„å¼•å…¥ å¦‚æœç›´æ¥è®©ç”¨æˆ·é€šè¿‡ JS ä»£ç æ‰‹åŠ¨åˆ›å»ºDOMå…ƒç´ ï¼Œè‚¯å®šæ˜¯éå¸¸éº»çƒ¦çš„ã€‚\näºæ˜¯ï¼ŒReact å®˜æ–¹å°±æå‡ºäº†ä¸€å¥— JSX è¯­æ³•è§„èŒƒï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨ JS æ–‡ä»¶ä¸­ï¼Œä¹¦å†™ç±»ä¼¼äº HTML é‚£æ ·çš„ä»£ç ï¼Œå¿«é€Ÿå®šä¹‰è™šæ‹ŸDOMç»“æ„ã€‚\nJSXçš„å…¨ç§° JSXï¼šJavaScript XMLï¼Œä¸€ç§ç±»ä¼¼äºXMLçš„JSæ‰©å±•è¯­æ³•ã€‚ä¹Ÿå¯ä»¥ç†è§£æˆï¼šç¬¦åˆ XML è§„èŒƒçš„ JS è¯­æ³•ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå“ªæ€•ä½ åœ¨ JS ä¸­å†™çš„æ˜¯ JSX è¯­æ³•ï¼ˆå³JSXè¿™æ ·çš„æ ‡ç­¾ï¼‰ï¼Œä½†æ˜¯ï¼ŒJSXå†…éƒ¨åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯ç›´æ¥æŠŠ æˆ‘ä»¬çš„ HTML æ ‡ç­¾æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼›è€Œæ˜¯å…ˆæŠŠ ç±»ä¼¼äºHTML è¿™æ ·çš„æ ‡ç­¾ä»£ç ï¼Œè½¬æ¢æˆ React.createElement è¿™æ ·çš„JSä»£ç ï¼Œå†æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚\nä»è¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒJSXæ˜¯ä¸€ä¸ªå¯¹ç¨‹åºå‘˜å‹å¥½çš„è¯­æ³•ç³–ã€‚\nJSXè¯­æ³•çš„æœ¬è´¨ï¼šä»¥ React.createElement çš„å½¢å¼æ¥å®ç°çš„ï¼Œå¹¶æ²¡æœ‰ç›´æ¥æŠŠ ç”¨æˆ·å†™çš„ HTMLä»£ç ï¼Œæ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚\nbabelè½¬æ¢å·¥å…· å¦‚æœè¦ç›´æ¥ä½¿ç”¨ JSX è¯­æ³•ï¼Œéœ€è¦å…ˆå®‰è£…ç›¸å…³çš„ è¯­æ³•è½¬æ¢å·¥å…·ï¼š\n1 è¿è¡Œ cnpm i babel-preset-react -D è¿™ä¸ªbabelåŒ…çš„ä½œç”¨æ˜¯ï¼šå°† JSXè¯­æ³• è½¬æ¢ä¸º JSè¯­æ³•ã€‚\nå®‰è£…å®Œæˆåï¼Œå°±å¯ä»¥å¼€å§‹ä½¿ç”¨JSXè¯­æ³•äº†ã€‚\nå®Œæ•´ä»£ç ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ³¨æ„ï¼Œè¿™ä¸€è¡Œçš„ type æ˜¯å†™ \u0026#34;text/babel\u0026#34;ï¼Œè€Œä¸æ˜¯ \u0026#34;text/javascript\u0026#34; --\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; //é¡µé¢ä¸­çš„çœŸå®å®¹å™¨å…ƒç´  var containDiv = document.getElementById(\u0026#34;app\u0026#34;); //1ã€ä½¿ç”¨JSXè¯­æ³• åˆ›å»ºè™šæ‹ŸDOMå¯¹è±¡ var vDom = ( \u0026lt;div\u0026gt; Hello, React! \u0026lt;h2\u0026gt;è¿™æ˜¯æ ‡é¢˜\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; ); //2ã€æ¸²æŸ“è™šæ‹ŸDOMå¯¹è±¡ï¼ˆå°†è™šæ‹ŸDOMå¯¹è±¡æ¸²æŸ“åˆ°é¡µé¢å…ƒç´ ä¸­ï¼‰ ReactDOM.render(vDom, containDiv); // å‚æ•°1ï¼šè™šæ‹ŸDOMå¯¹è±¡ï¼›å‚æ•°2ï¼šé¡µé¢ä¸­çš„å®¹å™¨ \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; JSXçš„åŸºæœ¬è¯­æ³• ï¼ˆ1ï¼‰åœ¨ JSXå†…éƒ¨ å†™ JSä»£ç ï¼šå¦‚æœè¦åœ¨ JSX è¯­æ³•å†…éƒ¨ï¼Œä¹¦å†™ JS ä»£ç ï¼Œé‚£ä¹ˆï¼Œæ‰€æœ‰çš„JSä»£ç å¿…é¡»å†™åˆ° {} çš„å†…éƒ¨ã€‚åœ¨{}å†…éƒ¨ï¼Œå¯ä»¥å†™ä»»ä½•ç¬¦åˆJSè§„èŒƒçš„ä»£ç ã€‚\nä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 var myTitle = \u0026#39;è¿™æ˜¯ä½¿ç”¨å˜é‡å®šä¹‰çš„ tilte å€¼\u0026#39; // ä½¿ç”¨JSXè¯­æ³• åˆ›å»ºè™šæ‹ŸDOMå¯¹è±¡ var vDom = ( \u0026lt;div\u0026gt; Hello, React! \u0026lt;h2 title={myTitle + \u0026#39;vae\u0026#39;}\u0026gt;è¿™æ˜¯æ ‡é¢˜\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; ); ï¼ˆ2ï¼‰å½“ç¼–è¯‘å¼•æ“åœ¨ç¼–è¯‘JSXä»£ç çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†\u0026lt;ï¼Œä¼šæŠŠå®ƒå½“ä½œ HTMLä»£ç  å»ç¼–è¯‘ï¼›å¦‚æœé‡åˆ°äº† {}ï¼Œ ä¼šæŠŠæ–¹æ‹¬å·é‡Œé¢çš„ä»£ç å½“ä½œ æ™®é€šJSä»£ç  å»ç¼–è¯‘ã€‚\nï¼ˆ3ï¼‰åœ¨JSXä¸­ï¼Œå¦‚æœè¦ä¸ºå…ƒç´ æ·»åŠ classå±æ€§ï¼Œåˆ™å¿…é¡»å†™æˆclassNameï¼Œå› ä¸º classåœ¨ES6ä¸­æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼›å’Œclassç±»ä¼¼ï¼Œlabelæ ‡ç­¾çš„ for å±æ€§éœ€è¦æ›¿æ¢ä¸º htmlForã€‚\nä»£ç ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 // ä½¿ç”¨JSXè¯­æ³• åˆ›å»ºè™šæ‹ŸDOMå¯¹è±¡ var vDom = ( \u0026lt;div\u0026gt; Hello, React! \u0026lt;p className=\u0026#34;qianguyihao\u0026#34;\u0026gt;åƒå¤å£¹å·\u0026lt;/p\u0026gt; \u0026lt;label htmlFor=\u0026#34;\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; ); ï¼ˆ4ï¼‰åœ¨JSXåˆ›å»ºDOMçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå¿…é¡»æœ‰å”¯ä¸€çš„æ ¹å…ƒç´ è¿›è¡ŒåŒ…è£¹ã€‚\nï¼ˆ5ï¼‰å¦‚æœè¦å†™æ³¨é‡Šï¼Œæ³¨é‡Šå¿…é¡»æ”¾åˆ° {} å†…éƒ¨ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 // ä½¿ç”¨JSXè¯­æ³• åˆ›å»ºè™šæ‹ŸDOMå¯¹è±¡ var vDom = ( // è¿™ä¸€è¡Œæ˜¯æ³¨é‡Š \u0026lt;div\u0026gt; Hello, React! \u0026lt;p className=\u0026#34;qianguyihao\u0026#34;\u0026gt;åƒå¤å£¹å·\u0026lt;/p\u0026gt; {/*è¿™ä¸€è¡Œä¹Ÿæ˜¯æ³¨é‡Š */} \u0026lt;/div\u0026gt; ); æœ€åï¼Œå†ä¸¾ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ³¨æ„ï¼Œè¿™ä¸€è¡Œçš„ type æ˜¯å†™ \u0026#34;text/babel\u0026#34;ï¼Œè€Œä¸æ˜¯ \u0026#34;text/javascript\u0026#34; --\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; //é¡µé¢ä¸­çš„çœŸå®å®¹å™¨å…ƒç´  var containDiv = document.getElementById(\u0026#34;app\u0026#34;); var arr = [] for (var i = 0; i \u0026lt; 6; i++) { var p = \u0026lt;p className=\u0026#34;myp\u0026#34; key={i}\u0026gt;è¿™ä¸ªæ˜¯pæ ‡ç­¾\u0026lt;/p\u0026gt; // æ³¨æ„è¿™ä¸ªåœ°æ–¹çš„å†™æ³•ï¼š key = {i} arr.push(p) } //1ã€ä½¿ç”¨JSXè¯­æ³• åˆ›å»ºè™šæ‹ŸDOMå¯¹è±¡ var vDom = ( \u0026lt;div\u0026gt; Hello, React! {arr} \u0026lt;/div\u0026gt; ); //2ã€æ¸²æŸ“è™šæ‹ŸDOMå¯¹è±¡ ReactDOM.render(vDom, containDiv); // å‚æ•°1ï¼šè™šæ‹ŸDOMå¯¹è±¡ï¼›å‚æ•°2ï¼šé¡µé¢ä¸­çš„å®¹å™¨ \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; è¿è¡Œç»“æœï¼š\nåˆ›å»ºç»„ä»¶çš„ç¬¬ä¸€ç§æ–¹å¼ åˆ›å»ºç»„ä»¶ åœ¨Reactä¸­ï¼Œæ„é€ å‡½æ•°å°±æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„ç»„ä»¶ã€‚\nå¦‚æœæƒ³è¦æŠŠç»„ä»¶æ”¾åˆ°é¡µé¢ä¸­ï¼Œå¯ä»¥æŠŠæ„é€ å‡½æ•°çš„åç§°å½“ä½œç»„ä»¶çš„åç§°ï¼Œä»¥ HTMLæ ‡ç­¾å½¢å¼å¼•å…¥é¡µé¢ä¸­å³å¯ã€‚\nä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ³¨æ„ï¼Œè¿™ä¸€è¡Œçš„ type æ˜¯å†™ \u0026#34;text/babel\u0026#34;ï¼Œè€Œä¸æ˜¯ \u0026#34;text/javascript\u0026#34; --\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; // è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œå°±ç›¸å½“äºä¸€ä¸ª ç»„ä»¶ function Hello() { return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ Helloç»„ä»¶ ä¸­å®šä¹‰çš„å…ƒç´ \u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } ReactDOM.render( \u0026lt;div\u0026gt; \u0026lt;Hello\u0026gt; \u0026lt;/Hello\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; è¿è¡Œç»“æœï¼š\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\nReactåœ¨è§£ææ‰€æœ‰æ ‡ç­¾çš„æ—¶å€™ï¼Œæ˜¯ä»¥æ ‡ç­¾çš„é¦–å­—æ¯æ¥åŒºåˆ†çš„ï¼šå¦‚æœæ ‡ç­¾çš„é¦–å­—æ¯æ˜¯å°å†™ï¼Œå°±æŒ‰ç…§æ™®é€šçš„ HTML æ ‡ç­¾æ¥è§£æï¼›å¦‚æœé¦–å­—æ¯æ˜¯å¤§å†™ï¼Œåˆ™æŒ‰ç…§ ç»„ä»¶çš„å½¢å¼æ¥è§£æã€‚\næ¯”å¦‚ä¸Šæ–¹ä»£ç ä¸­ï¼Œå¦‚æœæŠŠå¤§å†™çš„ Hello æ”¹æˆå°å†™çš„ helloï¼Œè¿è¡Œä¼šæŠ¥é”™ï¼Œæ— æ³•çœ‹åˆ°é¢„æœŸçš„ç»“æœã€‚\nç»“è®ºï¼šç»„ä»¶çš„é¦–å­—æ¯å¿…é¡»å¤§å†™ã€‚\nçˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶ ä»£ç ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ³¨æ„ï¼Œè¿™ä¸€è¡Œçš„ type æ˜¯å†™ \u0026#34;text/babel\u0026#34;ï¼Œè€Œä¸æ˜¯ \u0026#34;text/javascript\u0026#34; --\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; // çˆ¶ç»„ä»¶ä¸­çš„æ•°æ® var person = { name: \u0026#34;qianguyihao\u0026#34;, age: 27, gender: \u0026#34;ç”·\u0026#34;, address: \u0026#34;æ·±åœ³\u0026#34; }; // åœ¨å­ç»„ä»¶ä¸­ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨å¤–éƒ¨ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œå¿…é¡»æ˜¾ç¤ºçš„åœ¨ æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­ï¼Œå®šä¹‰ props å±æ€§æ¥æ¥æ”¶ // é€šè¿‡ props å¾—åˆ°çš„ä»»ä½•æ•°æ®éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½é‡æ–°èµ‹å€¼ function Hello(props) { return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ Helloå­ç»„ä»¶ ä¸­å®šä¹‰çš„å…ƒç´ ï¼š {props.name}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } ReactDOM.render( \u0026lt;!-- æ³¨æ„ï¼šè¿™é‡Œçš„ ...Obj è¯­æ³•ï¼Œæ˜¯ ES6ä¸­çš„å±æ€§æ‰©æ•£ï¼Œè¡¨ç¤ºï¼šæŠŠè¿™ä¸ªå¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå±•å¼€äº†ï¼Œæ”¾åˆ°è¿™ä¸ªä½ç½® --\u0026gt; \u0026lt;div\u0026gt; \u0026lt;Hello {...person}\u0026gt; \u0026lt;/Hello\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ä¸Šæ–¹ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ˜¯æƒ³æŠŠæ•´ä¸ªpersonå¯¹è±¡ä¼ é€’ç»™å­ç»„ä»¶ï¼Œæ‰€ä»¥é‡‡ç”¨äº†...Obj è¯­æ³•è¯­æ³•ã€‚ä¼ é€’ç»™å­ç»„ä»¶åï¼Œå­ç»„ä»¶è·å–çš„æ•°æ®ä»…ä»…åªæ˜¯å¯è¯»çš„ã€‚\nclass å…³é”®å­—çš„ä»‹ç» é¢å‘å¯¹è±¡è¯­è¨€çš„ä¸‰ä¸ªç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚å¤šæ€ å’Œ æ¥å£ã€è™šæ‹Ÿæ–¹æ³•æœ‰å…³ã€‚\nclassçš„åŸºæœ¬ç”¨æ³•ï¼šä½¿ç”¨classåˆ›å»ºå¯¹è±¡ myclass.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 // ä»¥å‰å­¦ä¹ çš„ï¼šä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ function Person(name, age) { this.name = name; this.age = age; } Person.prototype.say = function() { console.log(\u0026#34;å‘µå‘µå“’\u0026#34;); }; Person.info = 123; var p1 = new Person(\u0026#34;zs\u0026#34;, 20); // æœ¬æ¬¡éœ€è¦å­¦ä¹ çš„ï¼šclass åé¢è·Ÿä¸Šç±»åï¼Œç±»ååé¢ï¼Œä¸éœ€è¦åŠ  () ï¼Œç›´æ¥ä¸Š {} class Per { // åœ¨æ¯ä¸ªclassç±»å†…éƒ¨ï¼Œéƒ½æœ‰ä¸€ä¸ª constructor æ„é€ å™¨ï¼Œ å¦‚æœæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ æ„é€ å™¨ï¼Œé‚£ä¹ˆç±»å†…éƒ¨é»˜è®¤éƒ½æœ‰ä¸ªçœ‹ä¸è§çš„ constructor // constructor çš„ä½œç”¨ï¼Œå°±å¥½æ¯” å’±ä»¬ä¹‹å‰çš„ function Person(){ } // æ¯å½“ï¼Œä½¿ç”¨ new å…³é”®å­—åˆ›å»º class ç±»å®ä¾‹çš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šä¼˜å…ˆè°ƒç”¨ constructor æ„é€ å™¨ // constructor(){} constructor(name, age) { this.name = name; this.age = age; } // è¿™æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå¿…é¡»é€šè¿‡ new å‡ºæ¥çš„å¯¹è±¡è°ƒç”¨ say() { console.log(\u0026#34;ok a \u0026#34;); } static info = 123; static sayHello() { console.log(\u0026#34;è¿™æ˜¯é™æ€æ–¹æ³•\u0026#34;); } } var p2 = new Per(\u0026#34;å£¹å·\u0026#34;, 26); console.log(p2); console.log(Per.info); console.log(Per.sayHello()); ä½¿ç”¨ class å®ç° JS ä¸­çš„ç»§æ‰¿ myclass2.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Person { constructor(name, age) { console.log(3); this.name = name; this.age = age; } say() { console.log(\u0026#34;è¿™æ˜¯ Personä¸­çš„ say æ–¹æ³•\u0026#34;); } static info = 123; } // ä½¿ç”¨ extends å®ç°ç»§æ‰¿ï¼Œextendsçš„å‰é¢çš„æ˜¯å­ç±»ï¼Œåé¢çš„æ˜¯çˆ¶ç±» class Chinese extends Person { constructor(name, age, color, language) { console.log(1); // æ³¨æ„ï¼š å½“ä½¿ç”¨ extends å…³é”®å­—å®ç°äº†ç»§æ‰¿ï¼Œ å­ç±»çš„ constructor æ„é€ å‡½æ•°ä¸­ï¼Œå¿…é¡»æ˜¾ç¤ºè°ƒç”¨ super() æ–¹æ³•ï¼Œè¿™ä¸ª super è¡¨ç¤ºçˆ¶ç±»ä¸­ constructor çš„å¼•ç”¨ super(name, age); this.color = color; this.language = language; console.log(2); } } var c1 = new Chinese(\u0026#34;å¼ ä¸‰\u0026#34;, 22, \u0026#34;yellow\u0026#34;, \u0026#34;æ±‰è¯­\u0026#34;); console.log(c1); // çˆ¶ç±»ä¸­ä»»ä½•ä¸œè¥¿ï¼Œå­ç±»éƒ½èƒ½ç»§æ‰¿åˆ° c1.say(); æ³¨æ„ä¸Šæ–¹ constructorå¤„çš„æ³¨é‡Šï¼šå½“ä½¿ç”¨ extends å…³é”®å­—å®ç°äº†ç»§æ‰¿ï¼Œ å­ç±»çš„ constructor æ„é€ å‡½æ•°ä¸­ï¼Œå¿…é¡»æ˜¾ç¤ºè°ƒç”¨ super() æ–¹æ³•ï¼Œè¿™ä¸ª super è¡¨ç¤ºçˆ¶ç±»ä¸­ constructor çš„å¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å­ç±»å½“ä¸­ï¼Œè¦ä¹ˆä¸å†™ constructorï¼Œå¦‚æœå†™äº† constructorï¼Œå°±ä¸€å®šè¦æŠŠ super()ä¹ŸåŠ ä¸Šã€‚\nä¸ºå•¥æˆ‘ä»¬è¦å¼•å…¥ classè¿™ä¸ªåŠŸèƒ½ï¼Ÿå°±æ˜¯å› ä¸ºï¼Œ classé‡Œï¼Œæ°¸è¿œéƒ½å­˜åœ¨ç€ä¸€ä¸ª constructorã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ constructoråšå¾ˆå¤šäº‹æƒ…ã€‚\nåˆ›å»ºç»„ä»¶çš„ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨ class å…³é”®å­— ä½¿ç”¨ class åˆ›å»ºçš„ç±»ï¼Œé€šè¿‡ extends å…³é”®å­—ï¼Œç»§æ‰¿ React.Component ä¹‹åï¼Œè¿™ä¸ªç±»ï¼Œå°±æ˜¯ä¸€ä¸ªç»„ä»¶çš„æ¨¡æ¿äº†ã€‚å¦‚æœæƒ³è¦å¼•ç”¨è¿™ä¸ªç»„ä»¶ï¼Œå¯ä»¥æŠŠç±»çš„åç§°ä»¥æ ‡ç­¾çš„å½¢å¼ï¼Œå¯¼å…¥åˆ° JSX ä¸­ä½¿ç”¨ã€‚\nåœ¨ class å®ç°çš„ç»„ä»¶å†…éƒ¨ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ª render å‡½æ•°ã€‚åœ¨ render å‡½æ•°ä¸­ï¼Œè¿˜å¿…é¡» return ä¸€ä¸ªä¸œè¥¿ï¼Œå¦‚æœæ²¡æœ‰ä»€ä¹ˆéœ€è¦è¢«return çš„ï¼Œåˆ™éœ€è¦ return nullã€‚\nä»£ç ä¸¾ä¾‹ï¼š\nindex.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ³¨æ„ï¼Œè¿™ä¸€è¡Œçš„ type æ˜¯å†™ \u0026#34;text/babel\u0026#34;ï¼Œè€Œä¸æ˜¯ \u0026#34;text/javascript\u0026#34; --\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; // ä½¿ç”¨ class åˆ›å»ºçš„ç±»ï¼Œé€šè¿‡ extends å…³é”®å­—ï¼Œç»§æ‰¿ `React.Component` ä¹‹åï¼Œè¿™ä¸ªç±»ï¼Œå°±æ˜¯ä¸€ä¸ªç»„ä»¶çš„æ¨¡æ¿äº†ã€‚ // å¦‚æœæƒ³è¦å¼•ç”¨è¿™ä¸ªç»„ä»¶ï¼Œå¯ä»¥æŠŠç±»çš„åç§°ä»¥**æ ‡ç­¾çš„å½¢å¼**ï¼Œå¯¼å…¥åˆ° JSX ä¸­ä½¿ç”¨ã€‚ class Hello2 extends React.Component { // åœ¨ class å®ç°çš„ç»„ä»¶å†…éƒ¨ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ª render å‡½æ•° render() { // åœ¨ render å‡½æ•°ä¸­ï¼Œè¿˜å¿…é¡» return ä¸€ä¸ªä¸œè¥¿ï¼Œå¦‚æœæ²¡æœ‰ä»€ä¹ˆéœ€è¦è¢«return çš„ï¼Œåˆ™éœ€è¦ return null return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ä½¿ç”¨ class ç±»åˆ›å»ºçš„ç»„ä»¶ \u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } } ReactDOM.render( \u0026lt;div\u0026gt; \u0026lt;Hello2\u0026gt; \u0026lt;/Hello2\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; çˆ¶ç»„ä»¶ä¼ å€¼ç»™å­ç»„ä»¶ ä»£ç ä¸¾ä¾‹ï¼š\nindex.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ³¨æ„ï¼Œè¿™ä¸€è¡Œçš„ type æ˜¯å†™ \u0026#34;text/babel\u0026#34;ï¼Œè€Œä¸æ˜¯ \u0026#34;text/javascript\u0026#34; --\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; // ä½¿ç”¨ class åˆ›å»ºçš„ç±»ï¼Œé€šè¿‡ extends å…³é”®å­—ï¼Œç»§æ‰¿ `React.Component` ä¹‹åï¼Œè¿™ä¸ªç±»ï¼Œå°±æ˜¯ä¸€ä¸ªç»„ä»¶çš„æ¨¡æ¿äº†ã€‚ // å¦‚æœæƒ³è¦å¼•ç”¨è¿™ä¸ªç»„ä»¶ï¼Œå¯ä»¥æŠŠç±»çš„åç§°ä»¥**æ ‡ç­¾çš„å½¢å¼**ï¼Œå¯¼å…¥åˆ° JSX ä¸­ä½¿ç”¨ã€‚ class Hello2 extends React.Component { constructor(props) { super(props); console.log(props.name); // æ³¨æ„ï¼š`this.state` æ˜¯å›ºå®šå†™æ³•ï¼Œè¡¨ç¤ºå½“å‰ç»„ä»¶å®ä¾‹çš„ç§æœ‰æ•°æ®å¯¹è±¡ï¼Œå°±å¥½æ¯” vue ä¸­ï¼Œç»„ä»¶å®ä¾‹èº«ä¸Šçš„ data(){ return {} } å‡½æ•° // å¦‚æœæƒ³è¦ä½¿ç”¨ ç»„ä»¶ä¸­ state ä¸Šçš„æ•°æ®ï¼Œç›´æ¥é€šè¿‡ this.state.*** æ¥è®¿é—®å³å¯ this.state = { msg: \u0026#34;è¿™æ˜¯ Hello2 ç»„ä»¶çš„ç§æœ‰msgæ•°æ®\u0026#34;, info: \u0026#34;æ°¸ä¸æ­¢æ­¥\u0026#34; }; } // åœ¨ class å®ç°çš„ç»„ä»¶å†…éƒ¨ï¼Œå¿…é¡»å®šä¹‰ä¸€ä¸ª render å‡½æ•° render() { // åœ¨ render å‡½æ•°ä¸­ï¼Œè¿˜å¿…é¡» return ä¸€ä¸ªä¸œè¥¿ï¼Œå¦‚æœæ²¡æœ‰ä»€ä¹ˆéœ€è¦è¢«return çš„ï¼Œåˆ™éœ€è¦ return null return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;è¿™æ˜¯ä½¿ç”¨ class ç±»åˆ›å»ºçš„ç»„ä»¶ \u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } } ReactDOM.render( \u0026lt;div\u0026gt; \u0026lt;Hello2 name=\u0026#34;qianguyihao\u0026#34;\u0026gt; \u0026lt;/Hello2\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æ–¹å¼ä¸€å’Œæ–¹å¼äºŒçš„å¯¹æ¯” ä¸Šé¢çš„å†…å®¹é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§æ–¹å¼åˆ›å»ºç»„ä»¶ã€‚è¿™ä¸¤ç§æ–¹å¼ï¼Œæœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ã€‚\nå¯¹æ¯”ï¼š\næ–¹å¼ä¸€ï¼šé€šè¿‡ functionæ„é€ å‡½æ•° åˆ›å»ºç»„ä»¶ã€‚å†…éƒ¨æ²¡æœ‰ state ç§æœ‰æ•°æ®ï¼Œåªæœ‰ ä¸€ä¸ª props æ¥æ¥æ”¶å¤–ç•Œä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚\næ–¹å¼äºŒï¼šé€šè¿‡ class åˆ›å»ºå­ç»„ä»¶ã€‚å†…éƒ¨é™¤äº†æœ‰ this.props è¿™ä¸ªåªè¯»å±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äº å­˜æ”¾è‡ªå·±ç§æœ‰æ•°æ®çš„ this.state å±æ€§ï¼Œè¿™ä¸ª state æ˜¯å¯è¯»å¯å†™çš„ã€‚\nåŸºäºä¸Šé¢çš„åŒºåˆ«ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¿™ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼ä¸‹å®šä¹‰ï¼š ä½¿ç”¨ function åˆ›å»ºçš„ç»„ä»¶ï¼Œå«åšã€æ— çŠ¶æ€ç»„ä»¶ã€‘ï¼›ä½¿ç”¨ class åˆ›å»ºçš„ç»„ä»¶ï¼Œå«åšã€æœ‰çŠ¶æ€ç»„ä»¶ã€‘ã€‚\næœ¬è´¨åŒºåˆ«ï¼š\næœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ï¼Œæœ€æœ¬è´¨çš„åŒºåˆ«ï¼Œå°±æ˜¯æœ‰æ—  state å±æ€§ã€‚åŒæ—¶ï¼Œ class åˆ›å»ºçš„ç»„ä»¶ï¼Œæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä½†æ˜¯ï¼Œfunction åˆ›å»ºçš„ ç»„ä»¶ï¼Œæ²¡æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚\nä»€ä¹ˆæ—¶å€™ä½¿ç”¨ æœ‰çŠ¶æ€ç»„ä»¶ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ï¼š\nï¼ˆ1ï¼‰å¦‚æœä¸€ä¸ªç»„ä»¶éœ€è¦å­˜æ”¾è‡ªå·±çš„ç§æœ‰æ•°æ®ï¼Œæˆ–è€…éœ€è¦åœ¨ç»„ä»¶çš„ä¸åŒé˜¶æ®µæ‰§è¡Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œæ­¤æ—¶ï¼Œéå¸¸é€‚åˆç”¨ class åˆ›å»ºå‡ºæ¥çš„æœ‰çŠ¶æ€ç»„ä»¶ã€‚\nï¼ˆ2ï¼‰å¦‚æœä¸€ä¸ªç»„ä»¶ï¼Œåªéœ€è¦æ ¹æ®å¤–ç•Œä¼ é€’è¿‡æ¥çš„ propsï¼Œæ¸²æŸ“å›ºå®šçš„é¡µé¢ç»“æ„å³å¯çš„è¯ï¼Œæ­¤æ—¶ï¼Œéå¸¸é€‚åˆä½¿ç”¨ function åˆ›å»ºå‡ºæ¥çš„æ— çŠ¶æ€ç»„ä»¶ã€‚ï¼ˆä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶çš„å°å°å¥½å¤„ï¼š ç”±äºå‰”é™¤äº†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥ï¼Œè¿è¡Œé€Ÿåº¦ä¼šç›¸å¯¹å¿«ä¸€ç‚¹ç‚¹ï¼‰ã€‚\n","date":"2026-02-11T15:59:37+08:00","permalink":"https://impself.github.io/p/react-jsx-introduction/","title":"React 02-JSXè¯­æ³•ä»‹ç»"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚ æœ¬æ¬¡åšåå°ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨çš„æ˜¯ AntD æ¡†æ¶ã€‚æ¶‰åŠåˆ°å›¾ç‰‡çš„ä¸Šä¼ ï¼Œç”¨çš„æ˜¯AntDçš„ upload ç»„ä»¶ã€‚\næˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€Šå‰ç«¯AntDæ¡†æ¶çš„uploadç»„ä»¶ä¸Šä¼ å›¾ç‰‡æ—¶é‡åˆ°çš„ä¸€äº›å‘ã€‹ä¸­è®²åˆ°ï¼šAntD çš„ upload ç»„ä»¶æœ‰å¾ˆå¤šå‘ï¼Œå¼•èµ·äº†å¾ˆå¤šäººçš„å…³æ³¨ã€‚æŠ˜è…¾è¿‡çš„äººï¼Œè‡ªç„¶æ˜ç™½å…¶ä¸­çš„è‹¦æ¥šã€‚\nä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ç»§ç»­æ¥ç ”ç©¶ AntD çš„ upload ç»„ä»¶çš„å¦ä¸€ä¸ªå‘ã€‚\nå¤‡æ³¨ï¼šæœ¬æ–‡å†™äº2020-06-11ï¼Œä½¿ç”¨çš„ antd ç‰ˆæœ¬æ˜¯ 3.13.6ã€‚\nä½¿ç”¨ AntD çš„ upload ç»„ä»¶åšå›¾ç‰‡çš„ä¸Šä¼ ï¼Œæ•ˆæœæ¼”ç¤º å› ä¸ºéœ€è¦ä¸Šä¼ å¤šå¼ å›¾ç‰‡ï¼Œæ‰€ä»¥é‡‡ç”¨çš„æ˜¯ç…§ç‰‡å¢™çš„å½¢å¼ã€‚ä¸Šä¼ æˆåŠŸåçš„ç•Œé¢å¦‚ä¸‹ï¼š\nä»£ç å®ç° é¦–å…ˆï¼Œä½ éœ€è¦è®©åå°åŒå­¦æä¾›å¥½å›¾ç‰‡ä¸Šä¼ çš„æ¥å£ã€‚ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ˜¯æŠŠæ¥å£è°ƒç”¨ç›´æ¥å†™åœ¨äº† \u0026lt;Upload\u0026gt; æ ‡ç­¾çš„ action å±æ€§å½“ä¸­ã€‚ä½†å¦‚æœä½ åœ¨è°ƒæ¥å£çš„æ—¶å€™ï¼ŒåŠ¨ä½œå¾ˆå¤æ‚ï¼ˆæ¯”å¦‚æ ¹æ®ä¸šåŠ¡è¦æ±‚ï¼Œéœ€è¦è¿ç»­è°ƒä¸¤ä¸ªæ¥å£æ‰èƒ½ä¸Šä¼ å›¾ç‰‡ï¼Œæˆ–è€…åœ¨è°ƒæ¥å£æ—¶è¿˜è¦åšå…¶ä»–çš„äº‹æƒ…ï¼‰ï¼Œè¿™ä¸ª action æ–¹æ³•å°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†ã€‚é‚£è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ\nå¥½åœ¨ AntD çš„ upload ç»„ä»¶ç»™æˆ‘ä»¬æä¾›äº† customRequestè¿™ä¸ªæ–¹æ³•ï¼š\nå…³äºcustomRequest è¿™ä¸ªæ–¹æ³•ï¼Œ AntD å®˜æ–¹å¹¶æ²¡æœ‰ç»™å‡ºç¤ºä¾‹ï¼Œä»–ä»¬åªæ˜¯åœ¨ GitHub ä¸Šç»™å‡ºäº†è¿™æ ·ä¸€ä¸ªç®€çŸ­çš„ä»‹ç»ï¼š\nä½†è¿™ä¸ªæ–¹æ³•æ€ä¹ˆç”¨å‘¢ï¼Ÿç”¨çš„æ—¶å€™ï¼Œä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜å‘¢ï¼ŸAntD å®˜æ–¹æ²¡æœ‰è¯´ã€‚æˆ‘åœ¨ç½‘ä¸Šæœäº†åŠå¤©ï¼Œä¹Ÿæ²¡çœ‹åˆ°æ¯”è¾ƒå®Œæ•´çš„ã€åˆ‡å®å¯è¡Œçš„ Demoã€‚æˆ‘å¤©æœåœ°å¤§ç‰©åšï¼Œç½‘ç»œèµ„æ–™æµ©å¦‚çƒŸæµ·ï¼ŒAntD å¯æ˜¯å£å£å£°å£°è¢«äººä»¬å·ç§°æ˜¯å¤©æœæœ€å¥½ç”¨çš„ç®¡ç†åå°çš„æ ·å¼æ¡†æ¶ã€‚å¯å¦‚ä»Šï¼Œå´é¢ä¸´è¿™æ ·çš„å±€é¢ã€‚æˆ‘çœ‹ç€ä½ ä»¬ï¼Œæ»¡æ€€ç¾¡æ…•ã€‚\næ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘å°±è‡ªå·±ç ”ç©¶å§ã€‚æŠ˜è…¾äº†ä¸€å¤©ï¼Œæ€»ç®—æ˜¯æŠŠ customRequest çš„å‘è¸©å¾—å·®ä¸å¤šäº†ã€‚\nå•¥ä¹Ÿä¸è¯´äº†ï¼Œç›´æ¥ä¸Šä»£ç ã€‚\né‡‡ç”¨ AntDæ¡†æ¶çš„ upload ç»„ä»¶çš„ customRequest æ–¹æ³•ï¼Œè‡ªå®šä¹‰ä¸Šä¼ è¡Œä¸ºã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 import React, { PureComponent } from \u0026#39;react\u0026#39;; import { Button, Card, Form, message, Upload, Icon, Modal, Row, Col } from \u0026#39;antd\u0026#39;; import { connect } from \u0026#39;dva\u0026#39;; import { queryMyData, submitData } from \u0026#39;../api\u0026#39;; import { uploadImage } from \u0026#39;../../utils/wq.img.upload\u0026#39;; import styles from \u0026#39;../../utils/form.less\u0026#39;; const FormItem = Form.Item; @Form.create() export default class PicturesWall extends PureComponent { constructor(props) { super(props); const { id } = this.props.match.params; this.state = { id, img: undefined, // ä»æ¥å£æ‹¿åˆ°çš„å›¾ç‰‡å­—æ®µ imgList: [], // å±•ç¤ºåœ¨ antdå›¾ç‰‡ç»„ä»¶ä¸Šçš„æ•°æ® previewVisible: false, previewImage: \u0026#39;\u0026#39;, }; } componentDidMount() { const { id } = this.state; id \u0026amp;\u0026amp; this.queryData(); } // è°ƒæ¥å£ï¼ŒæŸ¥è¯¢å·²æœ‰çš„æ•°æ® queryData() { const { id } = this.state; queryMyData({ id, }) .then(({ ret, data }) =\u0026gt; { if (ret == 0 \u0026amp;\u0026amp; data \u0026amp;\u0026amp; data.list \u0026amp;\u0026amp; data.list.length) { const item = data.list[0]; const img = data.img; const imgList = item.img ? [ { uid: \u0026#39;1\u0026#39;, // æ³¨æ„ï¼Œè¿™ä¸ªuidä¸€å®šä¸èƒ½å°‘ï¼Œå¦åˆ™å±•ç¤ºå¤±è´¥ name: \u0026#39;hehe.png\u0026#39;, status: \u0026#39;done\u0026#39;, url: img, }, ] : []; this.setState({ img, imgList, }); } else { return Promise.reject(); } }) .catch(() =\u0026gt; { message.error(\u0026#39;æŸ¥è¯¢å‡ºé”™ï¼Œè¯·é‡è¯•\u0026#39;); }); } handleCancel = () =\u0026gt; this.setState({ previewVisible: false }); // æ–¹æ³•ï¼šå›¾ç‰‡é¢„è§ˆ handlePreview = (file) =\u0026gt; { console.log(\u0026#39;smyhvae handlePreview:\u0026#39; + JSON.stringify(file)); this.setState({ previewImage: file.url || file.thumbUrl, previewVisible: true, }); }; // å‚è€ƒé“¾æ¥ï¼šhttps://www.jianshu.com/p/f356f050b3c9 handleBeforeUpload = (file) =\u0026gt; { console.log(\u0026#39;smyhvae handleBeforeUpload file:\u0026#39; + JSON.stringify(file)); console.log(\u0026#39;smyhvae handleBeforeUpload file.file:\u0026#39; + JSON.stringify(file.file)); console.log(\u0026#39;smyhvae handleBeforeUpload file type:\u0026#39; + JSON.stringify(file.type)); //é™åˆ¶å›¾ç‰‡ æ ¼å¼ã€sizeã€åˆ†è¾¨ç‡ const isJPG = file.type === \u0026#39;image/jpeg\u0026#39;; const isJPEG = file.type === \u0026#39;image/jpeg\u0026#39;; const isGIF = file.type === \u0026#39;image/gif\u0026#39;; const isPNG = file.type === \u0026#39;image/png\u0026#39;; const isLt2M = file.size / 1024 / 1024 \u0026lt; 1; if (!(isJPG || isJPEG || isPNG)) { Modal.error({ title: \u0026#39;åªèƒ½ä¸Šä¼ JPGã€JPEGã€PNGæ ¼å¼çš„å›¾ç‰‡~\u0026#39;, }); } else if (!isLt2M) { Modal.error({ title: \u0026#39;å›¾ç‰‡è¶…è¿‡1Mé™åˆ¶ï¼Œä¸å…è®¸ä¸Šä¼ ~\u0026#39;, }); } return (isJPG || isJPEG || isPNG) \u0026amp;\u0026amp; isLt2M; }; // checkImageWH è¿”å›ä¸€ä¸ªpromise æ£€æµ‹é€šè¿‡è¿”å›resolve å¤±è´¥è¿”å›rejecté˜»æ­¢å›¾ç‰‡ä¸Šä¼  checkImageWH(file) { return new Promise(function (resolve, reject) { let filereader = new FileReader(); filereader.onload = (e) =\u0026gt; { let src = e.target.result; const image = new Image(); image.onload = function () { // è·å–å›¾ç‰‡çš„å®½é«˜ file.width = this.width; file.height = this.height; resolve(); }; image.onerror = reject; image.src = src; }; filereader.readAsDataURL(file); }); } // å›¾ç‰‡ä¸Šä¼  doImgUpload = (options) =\u0026gt; { const { onSuccess, onError, file, onProgress } = options; // startï¼šè¿›åº¦æ¡ç›¸å…³ // ä¼ªè£…æˆ handleChangeé‡Œé¢çš„å›¾ç‰‡ä¸Šä¼ çŠ¶æ€ const imgItem = { uid: \u0026#39;1\u0026#39;, // æ³¨æ„ï¼Œè¿™ä¸ªuidä¸€å®šä¸èƒ½å°‘ï¼Œå¦åˆ™ä¸Šä¼ å¤±è´¥ name: \u0026#39;hehe.png\u0026#39;, status: \u0026#39;uploading\u0026#39;, url: \u0026#39;\u0026#39;, percent: 99, // æ³¨æ„ä¸è¦å†™100ã€‚100è¡¨ç¤ºä¸Šä¼ å®Œæˆ }; this.setState({ imgList: [imgItem], }); // æ›´æ–° imgList // endï¼šè¿›åº¦æ¡ç›¸å…³ const reader = new FileReader(); reader.readAsDataURL(file); // è¯»å–å›¾ç‰‡æ–‡ä»¶ reader.onload = (file) =\u0026gt; { const params = { myBase64: file.target.result, // æŠŠ æœ¬åœ°å›¾ç‰‡çš„base64ç¼–ç ä¼ ç»™åå°ï¼Œè°ƒæ¥å£ï¼Œç”Ÿæˆå›¾ç‰‡çš„url }; // ä¸Šä¼ å›¾ç‰‡çš„base64ç¼–ç ï¼Œè°ƒæ¥å£åï¼Œè¿”å› imageId uploadImage(params) .then((res) =\u0026gt; { console.log(\u0026#39;smyhvae doImgUpload:\u0026#39; + JSON.stringify(res)); console.log(\u0026#39;smyhvae å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼š\u0026#39; + res.imageUrl); const imgItem = { uid: \u0026#39;1\u0026#39;, // æ³¨æ„ï¼Œè¿™ä¸ªuidä¸€å®šä¸èƒ½å°‘ï¼Œå¦åˆ™ä¸Šä¼ å¤±è´¥ name: \u0026#39;hehe.png\u0026#39;, status: \u0026#39;done\u0026#39;, url: res.imageUrl, // url æ˜¯å±•ç¤ºåœ¨é¡µé¢ä¸Šçš„ç»å¯¹é“¾æ¥ imgUrl: res.imageUrl, // imgUrl æ˜¯å­˜åˆ° db é‡Œçš„ç›¸å¯¹é“¾æ¥ // response: \u0026#39;{\u0026#34;status\u0026#34;: \u0026#34;success\u0026#34;}\u0026#39;, }; this.setState({ imgList: [imgItem], }); // æ›´æ–° imgList }) .catch((e) =\u0026gt; { console.log(\u0026#39;smyhvae å›¾ç‰‡ä¸Šä¼ å¤±è´¥:\u0026#39; + JSON.stringify(e || \u0026#39;\u0026#39;)); message.error(\u0026#39;å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•\u0026#39;); }); }; }; handleChange = ({ file, fileList }) =\u0026gt; { console.log(\u0026#39;smyhvae handleChange file:\u0026#39; + JSON.stringify(file)); console.log(\u0026#39;smyhvae handleChange fileList:\u0026#39; + JSON.stringify(fileList)); if (file.status == \u0026#39;removed\u0026#39;) { this.setState({ imgList: [], }); } }; submit = (e) =\u0026gt; { e.preventDefault(); this.props.form.validateFields((err, fieldsValue) =\u0026gt; { if (err) { return; } const { id, imgList } = this.state; const tempImgList = imgList.filter((item) =\u0026gt; item.status == \u0026#39;done\u0026#39;); // ç­›é€‰å‡º status = done çš„å›¾ç‰‡ const imgArr = []; tempImgList.forEach((item) =\u0026gt; { imgArr.push(item.imgUrl); // imgArr.push(item.url); }); submitData({ id, img: imgArr[0] || \u0026#39;\u0026#39;, // 1ã€æš‚æ—¶åªä¼ ä¸€å¼ å›¾ç‰‡ç»™åå°ã€‚å¦‚æœä¼ å¤šå¼ å›¾ç‰‡ï¼Œé‚£ä¹ˆï¼Œuploadç»„ä»¶éœ€è¦è¿›ä¸€æ­¥å®Œå–„ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œä»¥åæœ‰éœ€æ±‚å†ä¼˜åŒ–ã€‚2ã€å¦‚æœå›¾ç‰‡å­—æ®µæ˜¯é€‰å¡«ï¼Œé‚£å°±ç”¨ç©ºå­—ç¬¦ä¸²å…œåº• }) .then((res) =\u0026gt; { if (res.ret == 0) { message.success(`${id ? \u0026#39;ä¿®æ”¹\u0026#39; : \u0026#39;æ–°å¢\u0026#39;}æˆåŠŸï¼Œè‡ªåŠ¨è·³è½¬ä¸­...`); } else if (res.ret == 201 || res.ret == 202 || res.ret == 203 || res.ret == 6) { return Promise.reject(res.msg); } else { return Promise.reject(); } }) .catch((e) =\u0026gt; { message.error(e || \u0026#39;æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•\u0026#39;); }); }); }; render() { const { id, imgList } = this.state; console.log(\u0026#39;smyhvae render imgList:\u0026#39; + JSON.stringify(imgList)); const { getFieldDecorator } = this.props.form; const formItemLayout = { labelCol: { span: 3 }, wrapperCol: { span: 10 }, }; const buttonItemLayout = { wrapperCol: { span: 10, offset: 3 }, }; const uploadButton = ( \u0026lt;div\u0026gt; \u0026lt;Icon type=\u0026#34;plus\u0026#34; /\u0026gt; \u0026lt;div className=\u0026#34;ant-upload-text\u0026#34;\u0026gt;Upload\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); return ( \u0026lt;Card title={id ? \u0026#39;ä¿®æ”¹ä¿¡æ¯\u0026#39; : \u0026#39;æ–°å¢ä¿¡æ¯\u0026#39;}\u0026gt; \u0026lt;Form onSubmit={this.submit} layout=\u0026#34;horizontal\u0026#34;\u0026gt; {/* æ–°å»ºå›¾ç‰‡ã€ç¼–è¾‘å›¾ç‰‡ */} \u0026lt;FormItem label=\u0026#34;å›¾ç‰‡\u0026#34; {...formItemLayout}\u0026gt; {getFieldDecorator(\u0026#39;img\u0026#39;, { rules: [{ required: false, message: \u0026#39;è¯·ä¸Šä¼ å›¾ç‰‡\u0026#39; }], })( \u0026lt;Upload action=\u0026#34;2\u0026#34; customRequest={this.doImgUpload} listType=\u0026#34;picture-card\u0026#34; fileList={imgList} onPreview={this.handlePreview} beforeUpload={this.handleBeforeUpload} onChange={this.handleChange} \u0026gt; {imgList.length \u0026gt;= 1 ? null : uploadButton} \u0026lt;/Upload\u0026gt; )} \u0026lt;/FormItem\u0026gt; \u0026lt;Row\u0026gt; \u0026lt;Col span={3} /\u0026gt; \u0026lt;Col span={18} className={styles.graytext}\u0026gt; æ³¨ï¼šå›¾ç‰‡æ”¯æŒJPGã€JPEGã€PNGæ ¼å¼ï¼Œå°äº1Mï¼Œæœ€å¤šä¸Šä¼ 1å¼  \u0026lt;/Col\u0026gt; \u0026lt;/Row\u0026gt; \u0026lt;FormItem {...buttonItemLayout}\u0026gt; \u0026lt;Button type=\u0026#34;primary\u0026#34; htmlType=\u0026#34;submit\u0026#34;\u0026gt; æäº¤ \u0026lt;/Button\u0026gt; \u0026lt;/FormItem\u0026gt; \u0026lt;/Form\u0026gt; {/* å›¾ç‰‡ç‚¹å¼€é¢„è§ˆ */} \u0026lt;Modal visible={this.state.previewVisible} footer={null} onCancel={this.handleCancel}\u0026gt; \u0026lt;img alt=\u0026#34;example\u0026#34; style={{ width: \u0026#39;100%\u0026#39; }} src={this.state.previewImage} /\u0026gt; \u0026lt;/Modal\u0026gt; \u0026lt;/Card\u0026gt; ); } } å‚è€ƒé“¾æ¥ æ³¨æ„fileçš„æ ¼å¼ï¼šhttps://www.lmonkey.com/t/oREQA5XE1\nDemoåœ¨çº¿æ¼”ç¤ºï¼š\nhttps://stackoverflow.com/questions/58128062/using-customrequest-in-ant-design-file-upload\nhttps://stackblitz.com/edit/so-58128062-upload-progress\nfileList æ ¼å¼åœ¨çº¿æ¼”ç¤ºï¼š\nhttps://stackoverflow.com/questions/51514757/action-function-is-required-with-antd-upload-control-but-i-dont-need-it\nhttps://codesandbox.io/s/rl7ooo544q\nant design Uploadç»„ä»¶çš„ä½¿ç”¨æ€»ç»“ï¼šhttps://www.jianshu.com/p/0aa4612af987\nantdä¸Šä¼ åŠŸèƒ½çš„CustomRequestï¼šhttps://mlog.club/article/3832743\n","date":"2026-02-11T15:00:00+08:00","permalink":"https://impself.github.io/p/antd-upload-customrequest/","title":"React 10-AntD Upload customRequest å®æˆ˜"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nå‰è¨€ æœ¬æ¬¡åšåå°ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨çš„æ˜¯ AntD æ¡†æ¶ã€‚æ¶‰åŠåˆ°å›¾ç‰‡çš„ä¸Šä¼ ï¼Œç”¨çš„æ˜¯AntDçš„ upload ç»„ä»¶ã€‚\nå‰ç«¯åšæ–‡ä»¶ä¸Šä¼ è¿™ä¸ªåŠŸèƒ½ï¼Œæ˜¯å¾ˆæœ‰æŠ€æœ¯éš¾åº¦çš„ã€‚æ—¢ç„¶æ¡†æ¶ç»™æˆ‘ä»¬æä¾›å¥½äº†ï¼Œé‚£å°±ç›´æ¥ç”¨å‘—ã€‚ç»“æœç”¨çš„æ—¶å€™ï¼Œå‘ç° upload ç»„ä»¶çš„å¾ˆå¤šbugã€‚ä¸‹é¢æ¥åˆ—ä¸¾å‡ ä¸ªã€‚\nå¤‡æ³¨ï¼šæœ¬æ–‡å†™äº2019-03-02ï¼Œä½¿ç”¨çš„ antd ç‰ˆæœ¬æ˜¯ 3.13.6ã€‚\nä½¿ç”¨ AntD çš„ upload ç»„ä»¶åšå›¾ç‰‡çš„ä¸Šä¼  å› ä¸ºéœ€è¦ä¸Šä¼ å¤šå¼ å›¾ç‰‡ï¼Œæ‰€ä»¥é‡‡ç”¨çš„æ˜¯ç…§ç‰‡å¢™çš„å½¢å¼ã€‚ä¸Šä¼ æˆåŠŸåçš„ç•Œé¢å¦‚ä¸‹ï¼š\næŒ‰ç…§å®˜æ–¹æä¾›çš„å®ä¾‹ï¼Œç‰¹æ­¤æ•´ç†å‡ºé¡¹ç›®å¼€å‘ä¸­çš„å®Œæ•´å†™æ³•ï¼Œäº²æµ‹æœ‰æ•ˆã€‚ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 /* eslint-disable */ import { Upload, Icon, Modal, Form } from \u0026#39;antd\u0026#39;; const FormItem = Form.Item; class PicturesWall extends PureComponent { state = { previewVisible: false, previewImage: \u0026#39;\u0026#39;, imgList: [], }; handleChange = ({ file, fileList }) =\u0026gt; { console.log(JSON.stringify(file)); // file æ˜¯å½“å‰æ­£åœ¨ä¸Šä¼ çš„ å•ä¸ª img console.log(JSON.stringify(fileList)); // fileList æ˜¯å·²ä¸Šä¼ çš„å…¨éƒ¨ img åˆ—è¡¨ this.setState({ imgList: fileList, }); }; handleCancel = () =\u0026gt; this.setState({ previewVisible: false }); handlePreview = file =\u0026gt; { this.setState({ previewImage: file.url || file.thumbUrl, previewVisible: true, }); }; // å‚è€ƒé“¾æ¥ï¼šhttps://www.jianshu.com/p/f356f050b3c9 handleBeforeUpload = file =\u0026gt; { //é™åˆ¶å›¾ç‰‡ æ ¼å¼ã€sizeã€åˆ†è¾¨ç‡ const isJPG = file.type === \u0026#39;image/jpeg\u0026#39;; const isJPEG = file.type === \u0026#39;image/jpeg\u0026#39;; const isGIF = file.type === \u0026#39;image/gif\u0026#39;; const isPNG = file.type === \u0026#39;image/png\u0026#39;; if (!(isJPG || isJPEG || isGIF || isPNG)) { Modal.error({ title: \u0026#39;åªèƒ½ä¸Šä¼ JPG ã€JPEG ã€GIFã€ PNGæ ¼å¼çš„å›¾ç‰‡~\u0026#39;, }); return; } const isLt2M = file.size / 1024 / 1024 \u0026lt; 2; if (!isLt2M) { Modal.error({ title: \u0026#39;è¶…è¿‡2Mé™åˆ¶ï¼Œä¸å…è®¸ä¸Šä¼ ~\u0026#39;, }); return; } return (isJPG || isJPEG || isGIF || isPNG) \u0026amp;\u0026amp; isLt2M \u0026amp;\u0026amp; this.checkImageWH(file); }; //è¿”å›ä¸€ä¸ª promiseï¼šæ£€æµ‹é€šè¿‡åˆ™è¿”å›resolveï¼›å¤±è´¥åˆ™è¿”å›rejectï¼Œå¹¶é˜»æ­¢å›¾ç‰‡ä¸Šä¼  checkImageWH(file) { let self = this; return new Promise(function(resolve, reject) { let filereader = new FileReader(); filereader.onload = e =\u0026gt; { let src = e.target.result; const image = new Image(); image.onload = function() { // è·å–å›¾ç‰‡çš„å®½é«˜ï¼Œå¹¶å­˜æ”¾åˆ°fileå¯¹è±¡ä¸­ console.log(\u0026#39;file width :\u0026#39; + this.width); console.log(\u0026#39;file height :\u0026#39; + this.height); file.width = this.width; file.height = this.height; resolve(); }; image.onerror = reject; image.src = src; }; filereader.readAsDataURL(file); }); } handleSubmit = e =\u0026gt; { const { dispatch, form } = this.props; e.preventDefault(); form.validateFieldsAndScroll((err, values) =\u0026gt; {// values æ˜¯formè¡¨å•é‡Œçš„å‚æ•° // ç‚¹å‡»æŒ‰é’®åï¼Œå°†è¡¨å•æäº¤ç»™åå° dispatch({ type: \u0026#39;mymodel/submitFormData\u0026#39;, payload: values, }); }); }; render() { const { previewVisible, previewImage, imgList } = this.state; // ä» state ä¸­æ‹¿æ•°æ® const uploadButton = ( \u0026lt;div\u0026gt; \u0026lt;Icon type=\u0026#34;plus\u0026#34; /\u0026gt; \u0026lt;div className=\u0026#34;ant-upload-text\u0026#34;\u0026gt;Upload\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); return ( \u0026lt;div className=\u0026#34;clearfix\u0026#34;\u0026gt; \u0026lt;Form onSubmit={this.handleSubmit} hideRequiredMark style={{ marginTop: 8 }}\u0026gt; \u0026lt;FormItem label=\u0026#34;å›¾ç‰‡å›¾ç‰‡\u0026#34; {...formItemLayout}\u0026gt; {getFieldDecorator(\u0026#39;myImg\u0026#39;)( \u0026lt;Upload action=\u0026#34;//jsonplaceholder.typicode.com/posts/\u0026#34; // è¿™ä¸ªæ˜¯å›¾ç‰‡ä¸Šä¼ çš„æ¥å£è¯·æ±‚ï¼Œå®é™…å¼€å‘ä¸­ï¼Œè¦æ›¿æ¢æˆä½ è‡ªå·±çš„ä¸šåŠ¡æ¥å£ data={file =\u0026gt; ({ // dataé‡Œå­˜æ”¾çš„æ˜¯æ¥å£çš„è¯·æ±‚å‚æ•° param1: myParam1, param2: myParam2, photoCotent: file, // file æ˜¯å½“å‰æ­£åœ¨ä¸Šä¼ çš„å›¾ç‰‡ photoWidth: file.height, // é€šè¿‡ handleBeforeUpload è·å– å›¾ç‰‡çš„å®½é«˜ photoHeight: file.width, })} listType=\u0026#34;picture-card\u0026#34; fileList={this.state.imgList} onPreview={this.handlePreview} // ç‚¹å‡»å›¾ç‰‡ç¼©ç•¥å›¾ï¼Œè¿›è¡Œé¢„è§ˆ beforeUpload={this.handleBeforeUpload} // ä¸Šä¼ ä¹‹å‰ï¼Œå¯¹å›¾ç‰‡çš„æ ¼å¼åšæ ¡éªŒï¼Œå¹¶è·å–å›¾ç‰‡çš„å®½é«˜ onChange={this.handleChange} // æ¯æ¬¡ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³• \u0026gt; {this.state.imgList.length \u0026gt;= 9 ? null : uploadButton} \u0026lt;/Upload\u0026gt; )} \u0026lt;/FormItem\u0026gt; \u0026lt;/Form\u0026gt; \u0026lt;Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}\u0026gt; \u0026lt;img alt=\u0026#34;example\u0026#34; style={{ width: \u0026#39;100%\u0026#39; }} src={previewImage} /\u0026gt; \u0026lt;/Modal\u0026gt; \u0026lt;/div\u0026gt; ); } } export default PicturesWall; ä¸Šä¼ åï¼Œç‚¹å‡»å›¾ç‰‡é¢„è§ˆï¼Œæµè§ˆå™¨å¡æ­»çš„é—®é¢˜ ä¾æ®ä¸Šæ–¹çš„ä»£ç ï¼Œé€šè¿‡ Antd çš„ upload ç»„ä»¶å°†å›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œç‚¹å‡»å›¾ç‰‡çš„ç¼©ç•¥å›¾ï¼Œç†åº”å¯ä»¥åœ¨å½“å‰é¡µé¢å¼¹å‡º Modalï¼Œé¢„è§ˆå›¾ç‰‡ã€‚ä½†å®é™…çš„ç»“æœæ˜¯ï¼Œæµè§ˆå™¨ä¸€å®šä¼šå¡æ­»ã€‚\nå®šä½é—®é¢˜å‘ç°ï¼ŒåŸå› ç«Ÿç„¶æ˜¯ï¼šå›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œ upload ä¼šå°†å…¶è½¬ä¸º base64ç¼–ç ã€‚base64è¿™ä¸ªå­—ç¬¦ä¸²å¤ªå¤§äº†ï¼Œç‚¹å‡»å›¾ç‰‡é¢„è§ˆçš„æ—¶å€™ï¼Œæµè§ˆå™¨åœ¨è§£æä¸€å¤§ä¸²å­—ç¬¦ä¸²ï¼Œç„¶åå°±å¡æ­»äº†ã€‚è¯¦ç»†è¿‡ç¨‹æè¿°å¦‚ä¸‹ã€‚\nä¸Šæ–¹ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ handleChange(file, fileList)æ–¹æ³•ä¸­çš„ fileã€ä»¥åŠ fileListæ‰“å°å‡ºæ¥çœ‹çœ‹ã€‚ fileæŒ‡çš„æ˜¯å½“å‰æ­£åœ¨ä¸Šä¼ çš„ å•ä¸ª imgï¼ŒfileListæ˜¯å·²ä¸Šä¼ çš„å…¨éƒ¨ img åˆ—è¡¨ã€‚ å½“æˆ‘ä¸Šä¼ å®Œ ä¸¤å¼ å›¾ç‰‡åï¼Œ æ‰“å°ç»“æœå¦‚ä¸‹ï¼š\nfileçš„æ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 { \u0026#34;uid\u0026#34;: \u0026#34;rc-upload-1551084269812-5\u0026#34;, \u0026#34;width\u0026#34;: 600, \u0026#34;height\u0026#34;: 354, \u0026#34;lastModified\u0026#34;: 1546701318000, \u0026#34;lastModifiedDate\u0026#34;: \u0026#34;2019-01-05T15:15:18.000Z\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;e30e7b9680634b2c888c8bb513cc595d.jpg\u0026#34;, \u0026#34;size\u0026#34;: 31731, \u0026#34;type\u0026#34;: \u0026#34;image/jpeg\u0026#34;, \u0026#34;percent\u0026#34;: 100, \u0026#34;originFileObj\u0026#34;: { \u0026#34;uid\u0026#34;: \u0026#34;rc-upload-1551084269812-5\u0026#34;, \u0026#34;width\u0026#34;: 600, \u0026#34;height\u0026#34;: 354 }, \u0026#34;status\u0026#34;: \u0026#34;done\u0026#34;, \u0026#34;thumbUrl\u0026#34;: \u0026#34;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAHQ9qKKlbimcXrIH9o2vH/AC2T+ddPj98v+9RRWsuhnHdk0ar9qb5R0Pb6VPB/qh9aKKiRr0Irnt/vUDr+NFFJCRqWxJik5Pb+dLJ938aKK06mYSdKKKKBH//Z\u0026#34;, \u0026#34;response\u0026#34;: { \u0026#34;retCode\u0026#34;: 0, \u0026#34;imgUrl\u0026#34;: \u0026#34;http://qianguyihao.com/opfewfwj098902kpkpkkj976fe.jpg\u0026#34;, \u0026#34;photoid\u0026#34;: 271850 } } fileList çš„æ‰“å°ç»“æœï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 [ { \u0026#34;uid\u0026#34;: \u0026#34;rc-upload-1551084269812-3\u0026#34;, \u0026#34;width\u0026#34;: 1000, \u0026#34;height\u0026#34;: 667, \u0026#34;lastModified\u0026#34;: 1501414799000, \u0026#34;lastModifiedDate\u0026#34;: \u0026#34;2017-07-30T11:39:59.000Z\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;29381f30e924b89914e91b33.jpg\u0026#34;, \u0026#34;size\u0026#34;: 135204, \u0026#34;type\u0026#34;: \u0026#34;image/jpeg\u0026#34;, \u0026#34;percent\u0026#34;: 100, \u0026#34;originFileObj\u0026#34;: { \u0026#34;uid\u0026#34;: \u0026#34;rc-upload-1551084269812-3\u0026#34;, \u0026#34;width\u0026#34;: 1000, \u0026#34;height\u0026#34;: 667 }, \u0026#34;status\u0026#34;: \u0026#34;done\u0026#34;, \u0026#34;thumbUrl\u0026#34;: \u0026#34;data:image/jpeg;base64,/E3ju1tlaK1fzJOnHQU3LsLV7HO6Zrk11MZJ7luT0A4FZuRagi9quvzQQ4iuEJ7ZpqTG4djDsPFl2Lg733f8C4q+YhQ8zoYfGSqoMmfwo5huLL0HjiyPDSYPvxRdC1XQvxeLrB8fvl/OnoLmL9vrdvvYS3NGFVe2YsASOh71JfQyrqV2mXLHOcccVSIYEnDyZO9XXB9KYH//Z\u0026#34;, \u0026#34;response\u0026#34;: { \u0026#34;retCode\u0026#34;: 0, \u0026#34;msg\u0026#34;: \u0026#34;success\u0026#34;, \u0026#34;imgUrl\u0026#34;: \u0026#34;http://qianguyihao.com/hfwpjouiurewnmbhepr689.jpg\u0026#34;, } }, { \u0026#34;uid\u0026#34;: \u0026#34;rc-upload-1551084269812-5\u0026#34;, \u0026#34;width\u0026#34;: 600, \u0026#34;height\u0026#34;: 354, \u0026#34;lastModified\u0026#34;: 1546701318000, \u0026#34;lastModifiedDate\u0026#34;: \u0026#34;2019-01-05T15:15:18.000Z\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;e30e7b9680634b2c888c8bb513cc595d.jpg\u0026#34;, \u0026#34;size\u0026#34;: 31731, \u0026#34;type\u0026#34;: \u0026#34;image/jpeg\u0026#34;, \u0026#34;percent\u0026#34;: 100, \u0026#34;originFileObj\u0026#34;: { \u0026#34;uid\u0026#34;: \u0026#34;rc-upload-1551084269812-5\u0026#34;, \u0026#34;width\u0026#34;: 600, \u0026#34;height\u0026#34;: 354 }, \u0026#34;status\u0026#34;: \u0026#34;done\u0026#34;, \u0026#34;thumbUrl\u0026#34;: \u0026#34;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAHQ9qKKlbimcXrIH9o2vH/AC2T+ddPj98v+9RRWsuhnHdk0ar9qb5R0Pb6VPB/qh9aKKiRr0Irnt/vUDr+NFFJCRqWxJik5Pb+dLJ938aKK06mYSdKKKKBH//Z\u0026#34;, \u0026#34;response\u0026#34;: { \u0026#34;retCode\u0026#34;: 0, \u0026#34;imgUrl\u0026#34;: \u0026#34;http://qianguyihao.com/opfewfwj098902kpkpkkj976fe.jpg\u0026#34;, \u0026#34;photoid\u0026#34;: 271850 } } ] ä¸Šæ–¹çš„jsonæ•°æ®ä¸­ï¼Œéœ€è¦åšå‡ ç‚¹è§£é‡Šï¼š\nï¼ˆ1ï¼‰response å­—æ®µé‡Œé¢çš„æ•°æ®ï¼Œå°±æ˜¯è¯·æ±‚æ¥å£åï¼Œåå°è¿”å›ç»™å‰ç«¯çš„æ•°æ®ï¼Œé‡Œé¢åŒ…å«äº†å›¾ç‰‡çš„urlé“¾æ¥ã€‚\nï¼ˆ2ï¼‰status å­—æ®µé‡Œå­˜æ”¾çš„æ˜¯å›¾ç‰‡ä¸Šä¼ çš„å®æ—¶çŠ¶æ€ï¼ŒåŒ…æ‹¬ä¸Šä¼ ä¸­ã€ä¸Šä¼ å®Œæˆã€ä¸Šä¼ å¤±è´¥ã€‚\nï¼ˆ3ï¼‰thumbUrlå­—æ®µé‡Œé¢å­˜æ”¾çš„æ˜¯å›¾ç‰‡çš„base64ç¼–ç ã€‚\nè¿™ä¸ªbase64ç¼–ç éå¸¸éå¸¸é•¿ã€‚å½“ç‚¹å‡»å›¾ç‰‡é¢„è§ˆçš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯åŠ è½½çš„ thumbUrl è¿™ä¸ªå­—æ®µé‡Œçš„èµ„æºï¼Œéš¾æ€ªæµè§ˆå™¨ä¼šå¡æ­»ã€‚\nè§£å†³åŠæ³•ï¼šåœ¨ handleChangeæ–¹æ³•é‡Œï¼Œå›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œå°† thumbUrl å­—æ®µé‡Œé¢çš„ base64 ç¼–ç æ”¹ä¸ºçœŸå®çš„å›¾ç‰‡urlã€‚ä»£ç å®ç°å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 handleChange = ({ file, fileList }) =\u0026gt; { console.log(JSON.stringify(file)); // file æ˜¯å½“å‰æ­£åœ¨ä¸Šä¼ çš„ å•ä¸ª img console.log(JSON.stringify(fileList)); // fileList æ˜¯å·²ä¸Šä¼ çš„å…¨éƒ¨ img åˆ—è¡¨ // ã€é‡è¦ã€‘å°† å›¾ç‰‡çš„base64æ›¿æ¢ä¸ºå›¾ç‰‡çš„urlã€‚ è¿™ä¸€è¡Œä¸€å®šä¸ä¼šèƒ½å°‘ã€‚ // å›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼ŒfileListæ•°ç»„ä¸­çš„ thumbUrl ä¸­ä¿å­˜çš„æ˜¯å›¾ç‰‡çš„base64å­—ç¬¦ä¸²ï¼Œè¿™ç§æƒ…å†µï¼Œå¯¼è‡´çš„é—®é¢˜æ˜¯ï¼šå›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œç‚¹å‡»å›¾ç‰‡ç¼©ç•¥å›¾ï¼Œæµè§ˆå™¨ä¼šä¼šå¡æ­»ã€‚è€Œä¸‹é¢è¿™è¡Œä»£ç ï¼Œå¯ä»¥è§£å†³è¯¥bugã€‚ fileList.forEach(imgItem =\u0026gt; { if (imgItem \u0026amp;\u0026amp; imgItem.status == \u0026#39;done\u0026#39; \u0026amp;\u0026amp; imgItem.response \u0026amp;\u0026amp; imgItem.response.imgUrl) { imgItem.thumbUrl = imgItem.response.imgUrl; } }); this.setState({ imgList: fileList, }); }; æ–°éœ€æ±‚ï¼šç¼–è¾‘ç°æœ‰é¡µé¢ ä¸Šé¢ä¸€æ®µçš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ˜¯åœ¨æ–°å»ºçš„é¡µé¢ä¸­ï¼Œä»é›¶å¼€å§‹ä¸Šä¼ å›¾ç‰‡ã€‚\nç°åœ¨æœ‰ä¸ªæ–°çš„éœ€æ±‚ï¼šå¦‚ä½•ç¼–è¾‘ç°æœ‰çš„é¡µé¢å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œç°æœ‰çš„é¡µé¢åœ¨åˆå§‹åŒ–æ—¶ï¼Œæ˜¯é»˜è®¤æœ‰å‡ å¼ å›¾ç‰‡çš„ã€‚å½“æˆ‘ç¼–è¾‘è¿™ä¸ªé¡µé¢æ—¶ï¼Œå¯ä»¥å¯¹ç°æœ‰çš„å›¾ç‰‡åšå¢åˆ ï¼Œä¹Ÿèƒ½å¢åŠ æ–°çš„å›¾ç‰‡ã€‚è€Œä¸”è¦ä¿è¯ï¼šæ–°å»ºé¡µé¢å’Œç¼–è¾‘ç°æœ‰é¡µé¢ï¼Œæ˜¯å…±ç”¨ä¸€å¥—ä»£ç ã€‚\næˆ‘çœ‹åˆ°upload ç»„ä»¶æœ‰æä¾› defaultFileList çš„å±æ€§ã€‚æˆ‘è¯•äº†ä¸‹ï¼Œè¿™ä¸ªdefaultFileList çš„å±æ€§æ ¹æœ¬æ²¡æ³•å„¿ç”¨ã€‚\né‚£å°±åªæœ‰æ‰‹åŠ¨å®ç°äº†ã€‚æˆ‘çš„modelå±‚ä»£ç ï¼Œæ˜¯ç”¨ redux å†™çš„ã€‚æ•´ä½“çš„å®ç°æ€è·¯å¦‚ä¸‹ï¼šï¼ˆè¿™ä¸ªä¹Ÿæ˜¯åœ¨çœŸæ­£åœ¨å®æˆ˜ä¸­ç”¨åˆ°çš„ä»£ç ï¼‰\nï¼ˆ1ï¼‰PicturesWall.jsï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 /* eslint-disable */ import { Upload, Icon, Modal, Form } from \u0026#39;antd\u0026#39;; const FormItem = Form.Item; class PicturesWall extends PureComponent { state = { previewVisible: false, previewImage: \u0026#39;\u0026#39;, }; // é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä»æ¥å£æ‹‰å–é»˜è®¤çš„å›¾ç‰‡æ•°æ® componentDidMount() { const { dispatch } = this.props; dispatch({ type: \u0026#39;mymodel/getAllInfo\u0026#39;, payload: { params: xxx }, }); } handleChange = ({ file, fileList }) =\u0026gt; { const { dispatch } = this.props; // ã€é‡è¦ã€‘å°† å›¾ç‰‡çš„base64æ›¿æ¢ä¸ºå›¾ç‰‡çš„urlã€‚ è¿™ä¸€è¡Œä¸€å®šä¸ä¼šèƒ½å°‘ã€‚ // å›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼ŒfileListæ•°ç»„ä¸­çš„ thumbUrl ä¸­ä¿å­˜çš„æ˜¯å›¾ç‰‡çš„base64å­—ç¬¦ä¸²ï¼Œè¿™ç§æƒ…å†µï¼Œå¯¼è‡´çš„é—®é¢˜æ˜¯ï¼šå›¾ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œç‚¹å‡»å›¾ç‰‡ç¼©ç•¥å›¾ï¼Œæµè§ˆå™¨ä¼šä¼šå¡æ­»ã€‚è€Œä¸‹é¢è¿™è¡Œä»£ç ï¼Œå¯ä»¥è§£å†³è¯¥bugã€‚ fileList.forEach(imgItem =\u0026gt; { if (imgItem \u0026amp;\u0026amp; imgItem.status == \u0026#39;done\u0026#39; \u0026amp;\u0026amp; imgItem.response \u0026amp;\u0026amp; imgItem.response.imgUrl) { imgItem.thumbUrl = imgItem.response.imgUrl; } }); dispatch({ type: \u0026#39;mymodel/setImgList\u0026#39;, payload: fileList, }); }; handleCancel = () =\u0026gt; this.setState({ previewVisible: false }); handlePreview = file =\u0026gt; { this.setState({ previewImage: file.url || file.thumbUrl, previewVisible: true, }); }; // å‚è€ƒé“¾æ¥ï¼šhttps://www.jianshu.com/p/f356f050b3c9 handleBeforeUpload = file =\u0026gt; { //é™åˆ¶å›¾ç‰‡ æ ¼å¼ã€sizeã€åˆ†è¾¨ç‡ const isJPG = file.type === \u0026#39;image/jpeg\u0026#39;; const isJPEG = file.type === \u0026#39;image/jpeg\u0026#39;; const isGIF = file.type === \u0026#39;image/gif\u0026#39;; const isPNG = file.type === \u0026#39;image/png\u0026#39;; const isLt2M = file.size / 1024 / 1024 \u0026lt; 2; if (!(isJPG || isJPEG || isGIF || isPNG)) { Modal.error({ title: \u0026#39;åªèƒ½ä¸Šä¼ JPG ã€JPEG ã€GIFã€ PNGæ ¼å¼çš„å›¾ç‰‡~\u0026#39;, }); } else if (!isLt2M) { Modal.error({ title: \u0026#39;è¶…è¿‡2Mé™åˆ¶ï¼Œä¸å…è®¸ä¸Šä¼ ~\u0026#39;, }); } } // å‚è€ƒé“¾æ¥ï¼šhttps://github.com/ant-design/ant-design/issues/8779 return new Promise((resolve, reject) =\u0026gt; { if (!(isJPG || isJPEG || isGIF || isPNG)) { reject(file); } else { resolve(file \u0026amp;\u0026amp; this.checkImageWH(file)); } }); }; //è¿”å›ä¸€ä¸ª promiseï¼šæ£€æµ‹é€šè¿‡åˆ™è¿”å›resolveï¼›å¤±è´¥åˆ™è¿”å›rejectï¼Œå¹¶é˜»æ­¢å›¾ç‰‡ä¸Šä¼  checkImageWH(file) { let self = this; return new Promise(function(resolve, reject) { let filereader = new FileReader(); filereader.onload = e =\u0026gt; { let src = e.target.result; const image = new Image(); image.onload = function() { // è·å–å›¾ç‰‡çš„å®½é«˜ï¼Œå¹¶å­˜æ”¾åˆ°fileå¯¹è±¡ä¸­ console.log(\u0026#39;file width :\u0026#39; + this.width); console.log(\u0026#39;file height :\u0026#39; + this.height); file.width = this.width; file.height = this.height; resolve(); }; image.onerror = reject; image.src = src; }; filereader.readAsDataURL(file); }); } handleSubmit = e =\u0026gt; { const { dispatch, form } = this.props; e.preventDefault(); const { mymodel: { imgList }, // ä»propsä¸­æ‹¿é»˜è®¤çš„å›¾ç‰‡æ•°æ® } = this.props; form.validateFieldsAndScroll((err, values) =\u0026gt; { // values æ˜¯formè¡¨å•é‡Œçš„å‚æ•° // ç‚¹å‡»æŒ‰é’®åï¼Œå°†è¡¨å•æäº¤ç»™åå° // start é—®é¢˜æè¿°ï¼šå½“ç¼–è¾‘ç°æœ‰é¡µé¢æ—¶ï¼Œå¦‚æœé’ˆå¯¹å·²ç»å­˜åœ¨çš„é»˜è®¤å›¾ç‰‡ä¸åšä¿®æ”¹ï¼Œåˆ™ä¸ä¼šè§¦å‘ upload çš„ onChangeæ–¹æ³•ã€‚æ­¤æ—¶æäº¤è¡¨å•ï¼Œè¡¨å•é‡Œçš„ myImg å­—æ®µæ˜¯ç©ºçš„ã€‚ // è§£å†³åŠæ³•ï¼šå¦‚æœå‘ç°å­˜åœ¨é»˜è®¤å›¾ç‰‡ï¼Œåˆ™è¿½åŠ åˆ°è¡¨å•ä¸­ if (!values.myImg) { values.myImg = { fileList: [] }; values.myImg.fileList = imgList; } // end dispatch({ type: \u0026#39;mymodel/submitFormData\u0026#39;, payload: values, }); }); }; render() { const { previewVisible, previewImage } = this.state; // ä» state ä¸­æ‹¿æ•°æ® const { mymodel: { imgList }, // ä»propsä¸­æ‹¿åˆ°çš„å›¾ç‰‡æ•°æ® } = this.props; const uploadButton = ( \u0026lt;div\u0026gt; \u0026lt;Icon type=\u0026#34;plus\u0026#34; /\u0026gt; \u0026lt;div className=\u0026#34;ant-upload-text\u0026#34;\u0026gt;Upload\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); return ( \u0026lt;div className=\u0026#34;clearfix\u0026#34;\u0026gt; \u0026lt;Form onSubmit={this.handleSubmit} hideRequiredMark style={{ marginTop: 8 }}\u0026gt; \u0026lt;FormItem label=\u0026#34;å›¾ç‰‡ä¸Šä¼ \u0026#34; {...formItemLayout}\u0026gt; {getFieldDecorator(\u0026#39;myImg\u0026#39;)( \u0026lt;Upload action=\u0026#34;//jsonplaceholder.typicode.com/posts/\u0026#34; // è¿™ä¸ªæ˜¯å›¾ç‰‡ä¸Šä¼ çš„æ¥å£è¯·æ±‚ï¼Œå®é™…å¼€å‘ä¸­ï¼Œè¦æ›¿æ¢æˆä½ è‡ªå·±çš„ä¸šåŠ¡æ¥å£ data={file =\u0026gt; ({ // dataé‡Œå­˜æ”¾çš„æ˜¯æ¥å£çš„è¯·æ±‚å‚æ•° param1: myParam1, param2: myParam2, photoCotent: file, // file æ˜¯å½“å‰æ­£åœ¨ä¸Šä¼ çš„å›¾ç‰‡ photoWidth: file.height, // é€šè¿‡ handleBeforeUpload è·å– å›¾ç‰‡çš„å®½é«˜ photoHeight: file.width, })} listType=\u0026#34;picture-card\u0026#34; fileList={imgList} // æ”¹ä¸ºä» props é‡Œæ‹¿å›¾ç‰‡æ•°æ®ï¼Œè€Œä¸æ˜¯ä» state onPreview={this.handlePreview} // ç‚¹å‡»å›¾ç‰‡ç¼©ç•¥å›¾ï¼Œè¿›è¡Œé¢„è§ˆ beforeUpload={this.handleBeforeUpload} // ä¸Šä¼ ä¹‹å‰ï¼Œå¯¹å›¾ç‰‡çš„æ ¼å¼åšæ ¡éªŒï¼Œå¹¶è·å–å›¾ç‰‡çš„å®½é«˜ onChange={this.handleChange} // æ¯æ¬¡ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³• \u0026gt; {this.state.imgList.length \u0026gt;= 9 ? null : uploadButton} \u0026lt;/Upload\u0026gt; )} \u0026lt;/FormItem\u0026gt; \u0026lt;/Form\u0026gt; \u0026lt;Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}\u0026gt; \u0026lt;img alt=\u0026#34;example\u0026#34; style={{ width: \u0026#39;100%\u0026#39; }} src={previewImage} /\u0026gt; \u0026lt;/Modal\u0026gt; \u0026lt;/div\u0026gt; ); } } export default PicturesWall; ï¼ˆ2ï¼‰mymodel.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 /* eslint-disable */ import { routerRedux } from \u0026#39;dva/router\u0026#39;; import { message, Modal } from \u0026#39;antd\u0026#39;; import { getGoodsInfo, getAllGoods, } from \u0026#39;../services/api\u0026#39;; import { trim, getCookie } from \u0026#39;../utils/utils\u0026#39;; export default { namespace: \u0026#39;mymodel\u0026#39;, state: { form: {}, list: [], listDetail: [], goodsList: [], goodsListDetail: [], pagination: { pageSize: 10, total: 0, current: 1, }, imgList: [], //å›¾ç‰‡ }, subscriptions: { setup({ dispatch, history }) { history.listen(location =\u0026gt; { if (location.pathname !== \u0026#39;/xx/xxx\u0026#39;) return; if (!location.state || !location.state.xxxId) return; dispatch({ type: \u0026#39;fetch\u0026#39;, payload: location.state, }); }); }, }, effects: { // æ¥å£ã€‚è·å–æ‰€æœ‰å·¥å‚åº—çš„åˆ—è¡¨ (æ­¥éª¤02) *getAllInfo({ payload }, { select, call, put }) { yield put({ type: \u0026#39;form\u0026#39;, payload, }); console.log(\u0026#39;params:\u0026#39; + JSON.stringify(payload)); let params = {}; params = payload; const response = yield call(getGoodsInfo, params); console.log(\u0026#39;smyhvae response:\u0026#39; + JSON.stringify(response)); if (response.error) return; yield put({ type: \u0026#39;allInfo\u0026#39;, payload: (response.data \u0026amp;\u0026amp; response.data.map(item =\u0026gt; ({ xx1: item.yy1, xx2: item.yy2, }))) || [], }); // response é‡ŒåŒ…å«äº†æ¥å£è¿”å›ç»™å‰ç«¯çš„é»˜è®¤å›¾ç‰‡æ•°æ® if (response \u0026amp;\u0026amp; response.data \u0026amp;\u0026amp; response.data[0] \u0026amp;\u0026amp; response.data[0].my_jpg) { let tempImgList = response.data[0].my_jpg.split(\u0026#39;,\u0026#39;); let imgList = []; if (tempImgList.length \u0026gt; 0) { tempImgList.forEach(item =\u0026gt; { imgList.push({ uid: item, name: \u0026#39;xxx.png\u0026#39;, status: \u0026#39;done\u0026#39;, thumbUrl: item, }); }); } // é€šè¿‡ reduxçš„æ–¹å¼ å°† é»˜è®¤å›¾ç‰‡ ä¼ ç»™ imgList console.log(\u0026#39;smyhvae payload imgList:\u0026#39; + JSON.stringify(imgList)); yield put({ type: \u0026#39;setImgList\u0026#39;, payload: imgList, }); } }, *setImgList({ payload }, { call, put }) { console.log(\u0026#39;model setImgList\u0026#39;); yield put({ type: \u0026#39;getImgList\u0026#39;, payload, }); }, }, reducers: { allInfo(state, action) { return { ...state, list: action.payload, }; }, getImgList(state, action) { return { ...state, imgList: action.payload, }; }, }, }; ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥è§„é¿ upload ç»„ä»¶çš„ä¸€äº›bugï¼›è€Œä¸”å¯ä»¥åœ¨ä¸Šä¼ å‰ï¼Œé€šè¿‡æ ¡éªŒå›¾ç‰‡çš„å°ºå¯¸ã€å¤§å°ç­‰ï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™å¼¹å‡ºmodalå¼¹çª—ï¼Œé˜»æ­¢ä¸Šä¼ ã€‚\nå¤§åŠŸå‘Šæˆã€‚æœ¬æ–‡æ„Ÿè°¢ ld åŒå­¦çš„æ”¯æŒã€‚\næ›´å¤šå†…å®¹ï¼Œå¯ä»¥çœ‹æœ¬äººçš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š\nAntDæ¡†æ¶çš„uploadç»„ä»¶ä¸Šä¼ å›¾ç‰‡æ—¶ä½¿ç”¨customRequestæ–¹æ³•è‡ªå®šä¹‰ä¸Šä¼ è¡Œä¸º å…¶ä»–é—®é¢˜ beforeUploadè¿”å›falseåï¼Œæ–‡ä»¶ä»ç„¶ä¸ºä¸Šä¼ ä¸­çš„çŠ¶æ€ æœ€åä¸€æ®µ æœ‰äººè¯´ï¼Œå‰ç«¯å¼€å‘ï¼Œè¿å–èœçš„éƒ½ä¼šã€‚å¯å¦‚æœçœŸçš„é‡åˆ°æŠ€æœ¯éš¾é¢˜ï¼Œè¿˜æ˜¯å¾—æ‰¾ä¸ªé è°±çš„å‰ç«¯åŒå­¦æ‰è¡Œã€‚è¿™ä¸ï¼Œæ¥çœ‹çœ‹å‰ç«¯ç å†œæ—¥å¸¸ï¼š\n","date":"2026-02-11T14:00:00+08:00","permalink":"https://impself.github.io/p/antd-upload-pitfalls/","title":"React 09-AntD Upload è¸©å‘è®°å½•"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nandt çš„ä»‹ç» Ant Design æ˜¯åŸºäº React å®ç°ï¼Œå¼€å‘å’ŒæœåŠ¡äºä¼ä¸šçº§åå°äº§å“ã€‚\næ”¯æŒç¯å¢ƒ ç°ä»£æµè§ˆå™¨å’Œ IE9 åŠä»¥ä¸Šï¼ˆéœ€è¦ polyfillsï¼‰ã€‚\næ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚\nElectron\nElectronï¼ˆåŸåä¸ºAtom Shellï¼‰æ˜¯GitHubå¼€å‘çš„ä¸€ä¸ªå¼€æºæ¡†æ¶ã€‚ å®ƒå…è®¸ä½¿ç”¨Node.jsï¼ˆä½œä¸ºåç«¯ï¼‰å’ŒChromiumï¼ˆä½œä¸ºå‰ç«¯ï¼‰å®Œæˆæ¡Œé¢GUIåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚\nå¾ˆå¤šå®¢æˆ·ç«¯è½¯ä»¶éƒ½æ˜¯åŸºäº Electron å¼€å‘çš„ã€‚æ¯”å¦‚ VS Codeã€‚æˆ‘ä»¬æ‰“å¼€ VS Code èœå•æ çš„ â€œå¸®åŠ© \u0026ndash;\u0026gt; åˆ‡æ¢å¼€å‘äººå‘˜å·¥å…·â€ï¼Œå°±ä¼šçœ‹åˆ°ç±»ä¼¼äº chromeçš„è°ƒè¯•å·¥å…·ã€‚\nç›¸å…³é“¾æ¥ å®˜æ–¹æ–‡æ¡£ï¼šhttps://ant.design/docs/react/introduce-cn andt çš„ä½¿ç”¨ ç¯å¢ƒå®‰è£… 1 npm install antd --save ä»£ç ç¤ºä¾‹ æˆ‘ä»¬éœ€è¦ä»€ä¹ˆç»„ä»¶ï¼Œå°±å¯¼å…¥è¯¥ç»„ä»¶å³å¯ã€‚\nï¼ˆ1ï¼‰index.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å®¹å™¨ï¼Œé€šè¿‡ React æ¸²æŸ“å¾—åˆ°çš„ è™šæ‹ŸDOMï¼Œä¼šå‘ˆç°åˆ°è¿™ä¸ªä½ç½® --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ï¼ˆ2ï¼‰main.js:\n1 2 3 4 5 6 7 8 9 // JSæ‰“åŒ…å…¥å£æ–‡ä»¶ // 1. å¯¼å…¥åŒ… import React from \u0026#34;react\u0026#34;; import ReactDOM from \u0026#34;react-dom\u0026#34;; import MyComponent from \u0026#34;./components/MyComponent.jsx\u0026#34;; // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM ReactDOM.render(\u0026lt;MyComponent\u0026gt;\u0026lt;/MyComponent\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;)); (3)MyComponent.jsx:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 import React from \u0026#34;react\u0026#34;; // å¯¼å…¥ æ—¥æœŸé€‰æ‹©ç»„ä»¶ import { DatePicker } from \u0026#34;antd\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = {}; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;åœ¨ç»„ä»¶ä¸­å¼•å…¥ andt\u0026lt;/h3\u0026gt; \u0026lt;DatePicker /\u0026gt; \u0026lt;/div\u0026gt; ); } } ä»£ç è¿è¡Œæ•ˆæœï¼š\nAntDç»„ä»¶ è¡¨æ ¼ paginationå±æ€§å¯ä»¥ç”¨æ¥åˆ†é¡µã€‚\nloadingæ¡† éœ€æ±‚ï¼šåœ¨æ•°æ®æ˜¾ç¤ºä¹‹å‰ï¼Œå±•ç¤º loadingï¼›åœ¨æ•°æ®æ˜¾ç¤ºä¹‹åï¼Œå…³é—­loadingã€‚\nç›¸å…³é—®é¢˜çš„é“¾æ¥ AntD proï¼Œè·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œæºå¸¦å‚æ•° ant designåˆ—è¡¨é¡µï¼Œè½¬è·³åˆ°è¯¦æƒ…é¡µï¼Œæºå¸¦å‚æ•°\nant design proå•†å“é¡µå¸¦å‚æ•°è½¬åˆ°è¯¦æƒ…é¡µ\nAntD pro ï¼Œå¿…å¡«é¡¹å‰é¢ï¼Œæ˜¾ç¤ºæ˜Ÿå· è¡¨å•å¿…å¡«é¡¹labelä¸Šçš„çº¢è‰²*å·æ˜¯æ€ä¹ˆå‡ºç°çš„ å…¶ä»–é—®é¢˜ é¢åŒ…å±‘å±‚çº§æ˜¾ç¤ºé—®é¢˜ï¼šhttps://github.com/ant-design/ant-design-pro/issues/1584\nfroméªŒè¯inputæ¡†åªèƒ½è¾“å…¥æ•°å­—ï¼šhttps://blog.csdn.net/zr15829039341/article/details/82745239\n","date":"2026-02-11T13:00:00+08:00","permalink":"https://impself.github.io/p/react-ant-design-basics/","title":"React 08-Ant Design åŸºæœ¬ä½¿ç”¨"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nReactè·¯ç”±çš„ä½¿ç”¨ ä½¿ç”¨Reactè·¯ç”±ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£… react-router-domè¿™ä¸ªåŒ…ã€‚æ¯”å¦‚ï¼š\n1 yarn add react-router-dom ä»£ç ä¸¾ä¾‹ï¼š\nï¼ˆ1ï¼‰index.html\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å®¹å™¨ï¼Œé€šè¿‡ React æ¸²æŸ“å¾—åˆ°çš„ è™šæ‹ŸDOMï¼Œä¼šå‘ˆç°åˆ°è¿™ä¸ªä½ç½® --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ï¼ˆ2ï¼‰main.jsï¼š\n1 2 3 4 5 6 7 8 9 // JSæ‰“åŒ…å…¥å£æ–‡ä»¶ // 1. å¯¼å…¥åŒ… import React from \u0026#34;react\u0026#34;; import ReactDOM from \u0026#34;react-dom\u0026#34;; import App from \u0026#34;./App.jsx\u0026#34;; // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM ReactDOM.render(\u0026lt;App /\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;)); ï¼ˆ3ï¼‰app.jsx:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 import React from \u0026#34;react\u0026#34;; // å¦‚æœè¦ä½¿ç”¨ è·¯ç”±æ¨¡å—ï¼Œç¬¬ä¸€æ­¥ï¼Œè¿è¡Œ yarn add react-router-dom // ç¬¬äºŒæ­¥ï¼Œå¯¼å…¥ è·¯ç”±æ¨¡å— // HashRouter è¡¨ç¤ºä¸€ä¸ªè·¯ç”±çš„è·Ÿå®¹å™¨ï¼Œå°†æ¥ï¼Œæ‰€æœ‰çš„è·¯ç”±ç›¸å…³çš„ä¸œè¥¿ï¼Œéƒ½è¦åŒ…è£¹åœ¨ HashRouter é‡Œé¢ï¼Œè€Œä¸”ï¼Œä¸€ä¸ªç½‘ç«™ä¸­ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€æ¬¡ HashRouter å°±å¥½äº†ï¼› // Route è¡¨ç¤ºä¸€ä¸ªè·¯ç”±è§„åˆ™ï¼Œ åœ¨ Route ä¸Šï¼Œæœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ï¼Œ path component // Link è¡¨ç¤ºä¸€ä¸ªè·¯ç”±çš„é“¾æ¥ ï¼Œå°±å¥½æ¯” vue ä¸­çš„ \u0026lt;router-link to=\u0026#34;\u0026#34;\u0026gt;\u0026lt;/router-link\u0026gt; import { HashRouter, Route, Link } from \u0026#34;react-router-dom\u0026#34;; import Home from \u0026#34;./components/Home.jsx\u0026#34;; import Movie from \u0026#34;./components/Movie.jsx\u0026#34;; import About from \u0026#34;./components/About.jsx\u0026#34;; export default class App extends React.Component { constructor(props) { super(props); this.state = {}; } render() { // å½“ ä½¿ç”¨ HashRouter æŠŠ App æ ¹ç»„ä»¶çš„å…ƒç´ åŒ…è£¹èµ·æ¥ä¹‹åï¼Œç½‘ç«™å°±å·²ç»å¯ç”¨è·¯ç”±äº† // åœ¨ä¸€ä¸ª HashRouter ä¸­ï¼Œåªèƒ½æœ‰å”¯ä¸€çš„ä¸€ä¸ªæ ¹å…ƒç´  // åœ¨ä¸€ä¸ªç½‘ç«™ä¸­ï¼Œåªéœ€è¦ä½¿ç”¨ å”¯ä¸€çš„ä¸€æ¬¡ \u0026lt;HashRouter\u0026gt;\u0026lt;/HashRouter\u0026gt; å³å¯ return ( \u0026lt;HashRouter\u0026gt; \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;è¿™æ˜¯ç½‘ç«™çš„APPæ ¹ç»„ä»¶\u0026lt;/h1\u0026gt; \u0026lt;hr /\u0026gt; \u0026lt;Link to=\u0026#34;/home\u0026#34;\u0026gt;é¦–é¡µ\u0026lt;/Link\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp; \u0026lt;Link to=\u0026#34;/movie\u0026#34;\u0026gt;ç”µå½±\u0026lt;/Link\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp; \u0026lt;Link to=\u0026#34;/about\u0026#34;\u0026gt;å…³äº\u0026lt;/Link\u0026gt; \u0026lt;hr /\u0026gt; {/* Route åˆ›å»ºçš„æ ‡ç­¾ï¼Œå°±æ˜¯è·¯ç”±è§„åˆ™ï¼Œå…¶ä¸­ path è¡¨ç¤ºè¦åŒ¹é…çš„è·¯ç”±ï¼Œcomponent è¡¨ç¤ºè¦å±•ç¤ºçš„ç»„ä»¶ */} {/* åœ¨ vue ä¸­æœ‰ä¸ª router-view çš„è·¯ç”±æ ‡ç­¾ï¼Œä¸“é—¨ç”¨æ¥æ”¾ç½®ï¼ŒåŒ¹é…åˆ°çš„è·¯ç”±ç»„ä»¶çš„ï¼Œä½†æ˜¯ï¼Œåœ¨ react-router ä¸­ï¼Œå¹¶æ²¡æœ‰ç±»ä¼¼äºè¿™æ ·çš„æ ‡ç­¾ï¼Œè€Œæ˜¯ ï¼Œç›´æ¥æŠŠ Route æ ‡ç­¾ï¼Œå½“ä½œçš„ å‘ï¼ˆå ä½ç¬¦ï¼‰ */} {/* Route å…·æœ‰ä¸¤ç§èº«ä»½ï¼š1. å®ƒæ˜¯ä¸€ä¸ªè·¯ç”±åŒ¹é…è§„åˆ™ï¼› 2. å®ƒæ˜¯ ä¸€ä¸ªå ä½ç¬¦ï¼Œè¡¨ç¤ºå°†æ¥åŒ¹é…åˆ°çš„ç»„ä»¶éƒ½æ”¾åˆ°è¿™ä¸ªä½ç½® */} \u0026lt;Route path=\u0026#34;/home\u0026#34; component={Home} /\u0026gt; \u0026lt;hr /\u0026gt; \u0026lt;Route path=\u0026#34;/movie\u0026#34; component={Movie} /\u0026gt; \u0026lt;hr /\u0026gt; \u0026lt;Route path=\u0026#34;/about\u0026#34; component={About} /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/HashRouter\u0026gt; ); } } ï¼ˆ4ï¼‰ReactDemo/src/components/Home.jsx\n1 2 3 4 5 6 7 8 9 10 11 12 import React from \u0026#34;react\u0026#34;; export default class Home extends React.Component { constructor(props) { super(props); this.state = {}; } render() { return \u0026lt;div\u0026gt;Homeç»„ä»¶\u0026lt;/div\u0026gt;; } } ï¼ˆ5ï¼‰ReactDemo/src/components/Movie.jsx\n1 2 3 4 5 6 7 8 9 10 11 12 13 import React from \u0026#34;react\u0026#34;; export default class Movie extends React.Component { constructor(props) { super(props); this.state = {}; } render() { return \u0026lt;div\u0026gt;Movieç»„ä»¶\u0026lt;/div\u0026gt;; } } ï¼ˆ6ï¼‰ReactDemo/src/components/About.jsx\n1 2 3 4 5 6 7 8 9 10 11 12 import React from \u0026#34;react\u0026#34;; export default class About extends React.Component { constructor(props) { super(props); this.state = {}; } render() { return \u0026lt;div\u0026gt;Aboutç»„ä»¶\u0026lt;/div\u0026gt;; } } è¿è¡Œç»“æœï¼š\nåŒ¹é…è·¯ç”±å‚æ•° æ¨¡ç³ŠåŒ¹é…ä¸ç²¾å‡†åŒ¹é… æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè¿›ä¸€æ­¥ä¿®æ”¹ã€‚å‡è®¾ Movie è¿™ä¸ªç»„ä»¶ä¿®æ”¹æˆè¿™ç§è·¯ç”±åŒ¹é…æ–¹å¼ï¼š\n1 2 3 \u0026lt;Link to=\u0026#34;/movie/top250\u0026#34;\u0026gt;ç”µå½±\u0026lt;/Link\u0026gt; \u0026lt;Route path=\u0026#34;/movie\u0026#34; component={Movie} /\u0026gt; ä¸Šé¢è¿™ç§åŒ¹é…æ–¹å¼ï¼Œä¹Ÿæ˜¯å¯ä»¥æˆåŠŸåŒ¹é…åˆ°çš„ã€‚è¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œè·¯ç”±ä¸­çš„åŒ¹é…è§„åˆ™ï¼Œæ˜¯æ¨¡ç³ŠåŒ¹é…çš„ã€‚å¦‚æœ è·¯ç”±å¯ä»¥éƒ¨åˆ†åŒ¹é…æˆåŠŸï¼Œå°±ä¼šå±•ç¤ºè¿™ä¸ªè·¯ç”±å¯¹åº”çš„ç»„ä»¶ã€‚\nå¦‚æœæƒ³è®©è·¯ç”±è§„åˆ™ï¼Œè¿›è¡Œç²¾ç¡®åŒ¹é…ï¼Œå¯ä»¥ä¸ºRouteæ·»åŠ  exact å±æ€§ã€‚æ¯”å¦‚ä¸‹é¢è¿™ç§å†™æ³•ï¼Œå› ä¸ºæ˜¯å¼€å¯äº†ç²¾å‡†åŒ¹é…ï¼Œæ‰€ä»¥æ˜¯åŒ¹é…ä¸åˆ°çš„ï¼šï¼ˆæ— æ³•åŒ¹é…ï¼‰\n1 2 3 \u0026lt;Link to=\u0026#34;/movie/top250/20\u0026#34;\u0026gt;ç”µå½±\u0026lt;/Link\u0026gt; \u0026lt;Route path=\u0026#34;/movie/\u0026#34; component={Movie} exact/\u0026gt; å¦å¤–ï¼Œå¦‚æœè¦åŒ¹é…å‚æ•°ï¼Œå¯ä»¥åœ¨åŒ¹é…è§„åˆ™ä¸­ï¼Œä½¿ç”¨ : ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¿™ä¸ªä½ç½®åŒ¹é…åˆ°çš„æ˜¯å‚æ•°ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼šï¼ˆåŒ¹é…æ­£å¸¸ï¼‰\n1 2 3 \u0026lt;Link to=\u0026#34;/movie/top250/20\u0026#34;\u0026gt;ç”µå½±\u0026lt;/Link\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp; \u0026lt;Route path=\u0026#34;/movie/:type/:id\u0026#34; component={Movie} exact/\u0026gt; è·å–è·¯ç”±å‚æ•° ç»§ç»­ä¿®æ”¹ä¸Šé¢çš„ä»£ç ã€‚å¦‚æœæˆ‘æƒ³åœ¨ Movie ç»„ä»¶ä¸­æ˜¾ç¤ºè·¯ç”±ä¸­çš„å‚æ•°ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ\næˆ‘ä»¬å¯ä»¥é€šè¿‡ props.match.paramsè·å–è·¯ç”±ä¸­çš„å‚æ•°ã€‚ä¸¾ä¾‹åšæ³•å¦‚ä¸‹ï¼š\napp.jsxä¸­çš„åŒ¹é…è§„åˆ™å¦‚ä¸‹ï¼š\n1 2 3 \u0026lt;Link to=\u0026#34;/movie/top100/5\u0026#34;\u0026gt;ç”µå½±\u0026lt;/Link\u0026gt;\u0026amp;nbsp;\u0026amp;nbsp; \u0026lt;Route path=\u0026#34;/movie/:type/:id\u0026#34; component={Movie} exact/\u0026gt; Moivie ç»„ä»¶çš„å†™æ³•å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 import React from \u0026#34;react\u0026#34;; export default class Movie extends React.Component { constructor(props) { super(props); this.state = { routeParams: props.match.params // æŠŠè·¯ç”±ä¸­çš„å‚æ•°ä¿å­˜åˆ° state ä¸­ }; } render() { console.log(this); // å¦‚æœæƒ³è¦ä»è·¯ç”±è§„åˆ™ä¸­ï¼Œæå–åŒ¹é…åˆ°çš„å‚æ•°ï¼Œè¿›è¡Œä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ this.props.match.params.*** æ¥è®¿é—® return ( \u0026lt;div\u0026gt; {/* Movie --- {this.props.match.params.type} --- {this.props.match.params.id} */} Movie --- {this.state.routeParams.type} --- {this.state.routeParams.id} \u0026lt;/div\u0026gt; ); } } æ‰“å°ç»“æœå¦‚ä¸‹ï¼š\nå·¥ç¨‹æ–‡ä»¶ï¼š2019-02-14-ReactDemo.zip\n","date":"2026-02-11T12:00:00+08:00","permalink":"https://impself.github.io/p/react-router-usage/","title":"React 07-è·¯ç”±ä½¿ç”¨"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nå•é¡¹æ•°æ®ç»‘å®š åœ¨ Vue ä¸­ï¼Œå¯ä»¥é€šè¿‡ v-model æŒ‡ä»¤æ¥å®ç°åŒå‘æ•°æ®ç»‘å®šã€‚ä½†æ˜¯ï¼Œåœ¨ React ä¸­å¹¶æ²¡æœ‰æŒ‡ä»¤çš„æ¦‚å¿µï¼Œè€Œä¸” React é»˜è®¤ä¸æ”¯æŒ åŒå‘æ•°æ®ç»‘å®šã€‚\nReact åªæ”¯æŒï¼ŒæŠŠæ•°æ®ä» state ä¸Šä¼ è¾“åˆ° é¡µé¢ï¼Œä½†æ˜¯ï¼Œæ— æ³•è‡ªåŠ¨å®ç°æ•°æ®ä» é¡µé¢ ä¼ è¾“åˆ° state ä¸­ è¿›è¡Œä¿å­˜ã€‚\nReactä¸­ï¼Œåªæ”¯æŒå•é¡¹æ•°æ®ç»‘å®šï¼Œä¸æ”¯æŒåŒå‘æ•°æ®ç»‘å®šã€‚ä¸ä¿¡çš„è¯ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 import React from \u0026#34;react\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯ MyComponent ç»„ä»¶ é»˜è®¤çš„msg\u0026#34; }; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;å‘µå‘µå“’\u0026lt;/h3\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; value={this.state.msg} /\u0026gt; \u0026lt;/div\u0026gt; ); } } ä¸Šæ–¹ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°è¯•åœ¨ inputæ–‡æœ¬æ¡†ä¸­è¯»å– state.msg çš„å€¼ï¼Œè¿è¡Œç»“æœä¸­ï¼Œå´å¼¹å‡ºäº†è­¦å‘Šï¼š\n1 Warning: Failed prop type: You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`. é€šè¿‡onChangeæ–¹æ³•ï¼Œå®ç°åŒå‘æ•°æ®ç»‘å®š å¦‚æœé’ˆå¯¹ è¡¨å•å…ƒç´ åš value å±æ€§ç»‘å®šï¼Œé‚£ä¹ˆï¼Œå¿…é¡»åŒæ—¶ä¸º è¡¨å•å…ƒç´  ç»‘å®š readOnly, æˆ–è€…æä¾› onChange äº‹ä»¶ï¼š\nå¦‚æœæ˜¯ç»‘å®šreadOnlyï¼Œè¡¨ç¤ºè¿™ä¸ªå…ƒç´ åªè¯»ï¼Œä¸èƒ½è¢«ä¿®æ”¹ã€‚æ­¤æ—¶ï¼Œæ§åˆ¶å°å°±ä¸ä¼šå¼¹å‡ºè­¦å‘Šäº†ã€‚\nå¦‚æœæ˜¯ç»‘å®šonChangeï¼Œè¡¨ç¤ºè¿™ä¸ªå…ƒç´ çš„å€¼å¯ä»¥è¢«ä¿®æ”¹ï¼Œä½†æ˜¯ï¼Œè¦è‡ªå·±å®šä¹‰ä¿®æ”¹çš„é€»è¾‘ã€‚\nç»‘å®šreadOnlyçš„ä¸¾ä¾‹å¦‚ä¸‹ï¼šï¼ˆè¡¨ç¤ºvalueä¸­çš„æ•°æ®æ˜¯åªè¯»çš„ï¼‰\n1 \u0026lt;input type=\u0026#34;text\u0026#34; value={this.state.msg} readOnly /\u0026gt; ç»‘å®š onChange çš„ä¸¾ä¾‹å¦‚ä¸‹ï¼šï¼ˆé€šè¿‡onChangeæ–¹æ³•ï¼Œå®ç°åŒå‘æ•°æ®ç»‘å®šï¼‰\n(1)index.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å®¹å™¨ï¼Œé€šè¿‡ React æ¸²æŸ“å¾—åˆ°çš„ è™šæ‹ŸDOMï¼Œä¼šå‘ˆç°åˆ°è¿™ä¸ªä½ç½® --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ï¼ˆ2ï¼‰main.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // JSæ‰“åŒ…å…¥å£æ–‡ä»¶ // 1. å¯¼å…¥åŒ… import React from \u0026#34;react\u0026#34;; import ReactDOM from \u0026#34;react-dom\u0026#34;; // å¯¼å…¥ç»„ä»¶ import MyComponent from \u0026#34;./components/MyComponent.jsx\u0026#34;; // ä½¿ç”¨ render å‡½æ•°æ¸²æŸ“ è™šæ‹ŸDOM ReactDOM.render( \u0026lt;div\u0026gt; \u0026lt;MyComponent\u0026gt;\u0026lt;/MyComponent\u0026gt; \u0026lt;/div\u0026gt;, document.getElementById(\u0026#34;app\u0026#34;) ); ï¼ˆ3ï¼‰components/MyComponent.jsx\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 import React from \u0026#34;react\u0026#34;; export default class MyComponent extends React.Component { constructor(props) { super(props); this.state = { msg: \u0026#34;è¿™æ˜¯ç»„ä»¶ é»˜è®¤çš„msg\u0026#34; }; } render() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;å‘µå‘µå“’\u0026lt;/h1\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; value={this.state.msg} onChange={this.txtChanged} ref=\u0026#34;txt\u0026#34; /\u0026gt; \u0026lt;h3\u0026gt;{\u0026#34;å®æ—¶æ˜¾ç¤ºmsgä¸­çš„å†…å®¹ï¼š\u0026#34; + this.state.msg}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; ); } // ä¸º æ–‡æœ¬æ¡† ç»‘å®š txtChanged äº‹ä»¶ txtChanged = (e) =\u0026gt; { // è·å– \u0026lt;input\u0026gt; æ–‡æœ¬æ¡†ä¸­ æ–‡æœ¬çš„3ç§æ–¹å¼ï¼š // æ–¹å¼ä¸€ï¼šä½¿ç”¨ document.getElementById // æ–¹å¼äºŒï¼šä½¿ç”¨ ref // console.log(this.refs.txt.value); // æ–¹å¼ä¸‰ï¼šä½¿ç”¨ äº‹ä»¶å¯¹è±¡çš„ å‚æ•° e æ¥æ‹¿ // æ­¤æ—¶ï¼Œe.target å°±è¡¨ç¤ºè§¦å‘ è¿™ä¸ªäº‹ä»¶çš„ äº‹ä»¶æºå¯¹è±¡ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªåŸç”Ÿçš„JS DOM å¯¹è±¡ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹é‡Œï¼Œe.targetå°±æ˜¯æŒ‡æ–‡æœ¬æ¡† // console.log(e.target.value); this.setState({ msg: e.target.value }); }; } å·¥ç¨‹æ–‡ä»¶ï¼š2019-02-13-ReactDemo.zip\n","date":"2026-02-11T11:00:00+08:00","permalink":"https://impself.github.io/p/react-one-way-data-binding/","title":"React 06-å•å‘æ•°æ®ç»‘å®š"},{"content":"\næœ¬æ–‡å¯¼è¯» è¿™ç¯‡æ–‡ç« æŒ‰ç…§ã€Œå…ˆçœ‹åœºæ™¯ã€å†è·‘ä»£ç ã€æœ€åæ€»ç»“å‘ç‚¹ã€çš„é¡ºåºæ¥å†™ã€‚å»ºè®®ä½ è¾¹è¯»è¾¹æ•²ï¼Œé‡åˆ°æ¦‚å¿µå…ˆä¸æ­»è®°ï¼Œå…ˆçœ‹å®ƒåœ¨ä»£ç é‡Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚\nè™šæ‹ŸDOMå’Œdiffç®—æ³• åœ¨å­¦ä¹  React ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸¤ä¸ªæ¦‚å¿µï¼šè™šæ‹ŸDOMã€diffç®—æ³•ã€‚\nè™šæ‹ŸDOM é—®é¢˜æè¿°ï¼š\nå‡è®¾æˆ‘ä»¬çš„æ•°æ®å‘ç”Ÿä¸€ç‚¹ç‚¹çš„å˜åŒ–ï¼Œä¹Ÿä¼šè¢«å¼ºåˆ¶é‡å»ºæ•´é¢—DOMæ ‘ï¼Œè¿™ä¹ˆåšï¼Œä¼šæ¶‰åŠåˆ°å¾ˆå¤šå…ƒç´ çš„é‡ç»˜å’Œé‡æ’ï¼Œå¯¼è‡´æ€§èƒ½æµªè´¹ä¸¥é‡ã€‚\nè§£å†³ä¸Šè¿°é—®é¢˜çš„æ€è·¯ï¼š\nå®ç°æŒ‰éœ€æ›´æ–°é¡µé¢ä¸Šçš„å…ƒç´ å³å¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠéœ€è¦ä¿®æ”¹çš„å…ƒç´ ï¼Œæ‰€å¯¹åº”çš„ DOM å…ƒç´ é‡æ–°æ„å»ºï¼›å…¶ä»–æ²¡æœ‰å˜åŒ–çš„æ•°æ®ï¼Œæ‰€å¯¹åº”çš„ DOM èŠ‚ç‚¹ä¸éœ€è¦è¢«å¼ºåˆ¶æ›´æ–°ã€‚\nå…·ä½“å®ç°æ–¹æ¡ˆï¼šï¼ˆå¦‚ä½•æŒ‰éœ€æ›´æ–°é¡µé¢ä¸Šçš„å…ƒç´ ï¼‰\nåªéœ€è¦æ‹¿åˆ° é¡µé¢æ›´æ–°å‰çš„ å†…å­˜ä¸­çš„DOMæ ‘ï¼ŒåŒæ—¶å†æ‹¿åˆ° é¡µé¢æ›´æ–°å‰çš„ æ–°æ¸²æŸ“å‡ºæ¥çš„å†…å­˜DOMæ ‘ï¼›ç„¶åï¼Œå¯¹æ¯”è¿™ä¸¤é¢—æ–°æ—§DOMæ ‘ï¼Œæ‰¾åˆ°é‚£äº›éœ€è¦è¢«é‡æ–°åˆ›å»ºå’Œä¿®æ”¹çš„å…ƒç´ å³å¯ã€‚è¿™æ ·å°±èƒ½å®ç° DOM çš„æŒ‰éœ€æ›´æ–°ã€‚\nå¦‚ä½•æ‹¿åˆ°è¿™ä¸¤æ£µDOMæ ‘ï¼šï¼ˆå³ï¼šå¦‚ä½•ä»æµè§ˆå™¨çš„å†…å­˜ä½å“ªä¸ªè·å–åˆ° æµè§ˆå™¨ç§æœ‰çš„é‚£ä¸¤é¢—DOMæ ‘ï¼Ÿï¼‰\nå¦‚æœè¦æ‹¿åˆ°æµè§ˆå™¨ç§æœ‰çš„DOMæ ‘ï¼Œé‚£æˆ‘ä»¬å¿…é¡»è°ƒç”¨æµè§ˆå™¨æä¾›çš„ç›¸å…³JSçš„APIæ‰è¡Œã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œæµè§ˆå™¨å¹¶æ²¡æœ‰æä¾›è¿™æ ·çš„APIã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è‡ªå·±æ¨¡æ‹Ÿè¿™ä¸¤é¢— æ–°æ—§DOMæ ‘ã€‚\nå¦‚ä½•è‡ªå·±æ¨¡æ‹Ÿè¿™ä¸¤é¢— æ–°æ—§DOMæ ‘ï¼šï¼ˆå³ï¼šå¦‚ä½•è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Ÿï¼‰\nè¿™é‡Œæ¶‰åŠåˆ°æ‰‹åŠ¨æ¨¡æ‹ŸDOMæ ‘çš„åŸç†ï¼šä½¿ç”¨ JS åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç”¨å’Œè¿™ä¸ªå¯¹è±¡æ¥æ¨¡æ‹Ÿæ¯ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼›ç„¶ååœ¨æ¯ä¸ªDOMèŠ‚ç‚¹ä¸­ï¼Œåˆæä¾›äº†ç±»ä¼¼äº children è¿™æ ·çš„å±æ€§æ¥æè¿°å½“å‰DOMçš„å­èŠ‚ç‚¹ã€‚è¿™æ ·çš„è¯ï¼Œå½“DOMèŠ‚ç‚¹å½¢æˆäº†åµŒå¥—å…³ç³»ï¼Œå°±æ¨¡æ‹Ÿå‡ºäº†ä¸€é¢— DOM æ ‘ã€‚\næ€»ç»“ï¼š\nè™šæ‹ŸDOMçš„æœ¬è´¨ï¼šä½¿ç”¨ JS å¯¹è±¡æ¨¡æ‹ŸDOMæ ‘ã€‚\nè™šæ‹ŸDOMçš„ç›®çš„ï¼šä¸ºäº†å®ç° DOM èŠ‚ç‚¹çš„é«˜æ•ˆæ›´æ–°ã€‚\nReactå†…éƒ¨å·²ç»å¸®æˆ‘ä»¬å®ç°äº†è™šæ‹ŸDOMï¼Œåˆå­¦è€…æŒæ¡å¦‚ä½•è°ƒç”¨å³å¯ã€‚\ndiffç®—æ³• æ€ä¹ˆå®ç° ä¸¤é¢—æ–°æ—§DOMæ ‘çš„å¯¹æ¯” å‘¢ï¼Ÿè¿™é‡Œå°±æ¶‰åŠåˆ°äº† diffç®—æ³•ã€‚å¸¸è§çš„ diffç®—æ³•å¦‚ä¸‹ï¼š\ntree diffï¼šæ–°æ—§DOMæ ‘ï¼Œé€å±‚å¯¹æ¯”çš„æ–¹å¼ï¼Œå°±å«åš tree diffã€‚æ¯å½“æˆ‘ä»¬ä»å‰åˆ°åï¼ŒæŠŠæ‰€æœ‰å±‚çš„èŠ‚ç‚¹å¯¹æ¯”å®Œåï¼Œå¿…ç„¶èƒ½å¤Ÿæ‰¾åˆ°é‚£äº› éœ€è¦è¢«æ›´æ–°çš„å…ƒç´ ã€‚\ncomponent diffï¼šåœ¨å¯¹æ¯”æ¯ä¸€å±‚çš„æ—¶å€™ï¼Œç»„ä»¶ä¹‹é—´çš„å¯¹æ¯”ï¼Œå«åš component diffã€‚å½“å¯¹æ¯”ç»„ä»¶çš„æ—¶å€™ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™æš‚æ—¶è®¤ä¸ºè¿™ä¸ªç»„ä»¶ä¸éœ€è¦è¢«æ›´æ–°ï¼Œå¦‚æœç»„ä»¶çš„ç±»å‹ä¸åŒï¼Œåˆ™ç«‹å³å°†æ—§ç»„ä»¶ç§»é™¤ï¼Œæ–°å»ºä¸€ä¸ªç»„ä»¶ï¼Œæ›¿æ¢åˆ°è¢«ç§»é™¤çš„ä½ç½®ã€‚\nelement diffï¼šåœ¨ç»„ä»¶ä¸­ï¼Œæ¯ä¸ªå…ƒç´ ä¹‹é—´ä¹Ÿè¦è¿›è¡Œå¯¹æ¯”ï¼Œé‚£ä¹ˆï¼Œå…ƒç´ çº§åˆ«çš„å¯¹æ¯”ï¼Œå«åš element diffã€‚\nkeyï¼škeyè¿™ä¸ªå±æ€§ï¼Œå¯ä»¥æŠŠ é¡µé¢ä¸Šçš„ DOMèŠ‚ç‚¹ å’Œ è™šæ‹ŸDOMä¸­çš„å¯¹è±¡ï¼Œåšä¸€å±‚å…³è”å…³ç³»ã€‚\nReact ä»‹ç» React æ˜¯ä»€ä¹ˆ Facebook å¼€æºçš„ä¸€ä¸ªJSåº“ã€‚\nä¸€ä¸ªç”¨äºåŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„JSåº“ã€‚\nReact çš„ç‰¹ç‚¹ Declarativeï¼ˆå£°æ˜å¼ç¼–ç ï¼‰\nComponent-Basedï¼ˆç»„ä»¶åŒ–ç¼–ç ï¼‰\nLearn Once, Write Anywhereï¼ˆæ”¯æŒå®¢æˆ·ç«¯ã€æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰\né«˜æ•ˆçš„DOM Diffç®—æ³•ï¼Œæœ€å°åŒ–é¡µé¢é‡ç»˜\nå•å‘æ•°æ®æµ\nReacté«˜æ•ˆçš„åŸå›  è™šæ‹Ÿ(virtual)DOMï¼Œä¸æ€»æ˜¯ç›´æ¥æ“ä½œDOM\né«˜æ•ˆçš„DOM Diffç®—æ³•ï¼Œæœ€å°åŒ–é¡µé¢é‡ç»˜ï¼ˆå³â€œå±€éƒ¨æ¸²æŸ“â€ï¼‰ã€‚\nè™šæ‹ŸDOMæŒ‡çš„æ˜¯ï¼šåœ¨çœŸå®DOMçš„ä¸Šä¸€å±‚æ˜ å°„ä¸€å±‚è™šæ‹ŸDOMã€‚æˆ‘ä»¬æ“ä½œçš„æ˜¯æ˜ å°„å…³ç³»ï¼Œè€Œä¸æ˜¯çœŸå®çš„DOMã€‚å‡è®¾é¡µé¢çš„æ ·å¼åšäº†ä¿®æ”¹ï¼ˆæ¯”å¦‚æ–°å¢äº†ä¸€ä¸ªæ ‡ç­¾ï¼‰ï¼Œæ­¤æ—¶ä¿®æ”¹çš„æ˜¯è™šæ‹ŸDOMçš„æ ·å¼ï¼ŒçœŸå®çš„DOMå¹¶æœªå‘ç”Ÿå˜åŒ–ã€‚é‚£ä»€ä¹ˆæ—¶å€™ï¼ŒçœŸå®çš„DOMä¼šå‘ç”Ÿå˜åŒ–å‘¢ï¼Ÿ å½“æˆ‘æŠŠæ‰€æœ‰çš„å†…å®¹æ“ä½œå®Œä¹‹åï¼Œè½¬åŒ–ä¸ºçœŸå®çš„DOMï¼Œæ­¤æ—¶è¦æ‰“åŒ…ç»Ÿä¸€çš„æ¸²æŸ“é¡µé¢ï¼Œäºæ˜¯çœŸå®çš„DOMå‘ç”Ÿå˜åŒ–ï¼Œç„¶åæ¸²æŸ“ä¸€æ¬¡ã€‚ è¿™æ ·åšçš„è¯ï¼Œå¯ä»¥å‡å°‘é¡µé¢çš„æ¸²æŸ“æ¬¡æ•°ã€‚\nç›¸å…³ç½‘å€ å®˜ç½‘ï¼šhttps://reactjs.org/\nGitHub åœ°å€ï¼šhttps://github.com/facebook/react æˆªè‡³2019-02-08ï¼ŒReacté¡¹ç›®å·²ç»æœ‰ 121k çš„starã€‚\næœ‰ä¸€ä¸ªç‰¹æ€§æ˜¯â€œLearn Once, Write Anywhereâ€ã€‚è¿™é‡Œçš„ â€œAnywhereâ€ å…¶å®æŒ‡çš„æ˜¯ä¸¤ä¸ªåœ°æ–¹ï¼šä¸€ä¸ªæ˜¯æµè§ˆå™¨ç«¯ï¼Œä¸€ä¸ªæ˜¯æœåŠ¡å™¨ç«¯ã€‚åè€…æŒ‡çš„æ˜¯ï¼ŒReactæ”¯æŒåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“é¡µé¢ã€‚\nç”Ÿæ€ä»‹ç» Vueç”Ÿæ€ï¼šVue + Vue-Router + Vuex + Axios + Babel + Webpack\nReactç”Ÿæ€ï¼šReact + React-Router + Redux + Axios + Babel + Webpack\nReact æ¨¡å—åŒ–ã€ç»„ä»¶åŒ– æ¨¡å— ç†è§£ï¼šå‘å¤–æä¾›ç‰¹å®šåŠŸèƒ½çš„jsç¨‹åº, ä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶\nç†ç”±ï¼šjsä»£ç æ›´å¤šæ›´å¤æ‚\nä½œç”¨ï¼šç®€åŒ–jsçš„ç¼–å†™ï¼Œé˜…è¯»ï¼Œæé«˜è¿è¡Œæ•ˆç‡\nç»„ä»¶ ç†è§£ï¼šç”¨æ¥å®ç°ç‰¹å®šåŠŸèƒ½æ•ˆæœçš„ä»£ç é›†åˆ(html/css/js)\nç†ç”±ï¼šä¸€ä¸ªç•Œé¢çš„åŠŸèƒ½æ›´å¤æ‚\nä½œç”¨ï¼šå¤ç”¨ï¼Œç®€åŒ–é¡¹ç›®ç¼–ç ï¼Œæé«˜è¿è¡Œæ•ˆç‡\næ¨¡å—åŒ–ä¸ç»„ä»¶åŒ– æ¨¡å—åŒ–ï¼šå½“åº”ç”¨çš„jséƒ½ä»¥æ¨¡å—æ¥ç¼–å†™çš„, è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„åº”ç”¨\nç»„ä»¶åŒ–ï¼šå½“åº”ç”¨æ˜¯ä»¥å¤šç»„ä»¶çš„æ–¹å¼å®ç°åŠŸèƒ½, è¿™ä¸Šåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨\né¢ç›¸å¯¹è±¡ä¸é¢å‘è¿‡ç¨‹çš„åŒºåˆ« é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼š\né‡ç‚¹æ˜¯å¯¹è±¡\næ›´åŠ å…³å¿ƒçš„æ˜¯å¹²æ´»çš„äºº\né¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼š\næ›´åŠ å…³å¿ƒçš„æ˜¯å¹²æ´»çš„è¿‡ç¨‹\nè°å»å¹²æ´»å„¿ä¸å…³å¿ƒ\nReact ç¯å¢ƒæ­å»ºï¼šå†™ç¬¬ä¸€ä¸ªHello World react.js å’Œ react-dom.js ä¸ºäº†é€šè¿‡ React å†™ä¸€ä¸ªHello Worldç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å‡ ä¸ªåŒ…ï¼š\nreact.js: Reactçš„æ ¸å¿ƒåº“ã€‚è¿™ä¸ªåŒ…ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥åˆ›å»ºReactç»„ä»¶ã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç­‰ã€‚\nreact-dom.js: æ“ä½œDOMçš„æ‰©å±•åº“ã€‚è¿™ä¸ªåŒ…ï¼Œä¸»è¦å°è£…äº†å’Œ DOM æ“ä½œç›¸å…³çš„åŒ…ï¼ˆæ¯”å¦‚ï¼ŒæŠŠç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼‰ã€‚\nbabel.min.js: å°† JSXè¯­æ³• è§£æä¸º çº¯JSè¯­æ³•ä»£ç ã€‚\næ–¹å¼ä¸€ï¼šæœ¬åœ°å¼•å…¥ç›¸å…³çš„jsåº“ å…¥é—¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å»ºè®®é‡‡å–æ–¹å¼ä¸€ã€‚\nå¦‚æœæ˜¯æœ¬åœ°å¼•å…¥çš„è¯ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š\n1 2 3 4 \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; å¦‚æœæ˜¯é€šè¿‡CDNçš„æ–¹å¼å¼•å…¥çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ç½‘ç«™ https://www.bootcdn.cn/ æä¾›çš„CDNé“¾æ¥ã€‚\nå®Œæ•´ä»£ç ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;meta /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- å¼•å…¥Reactç›¸å…³çš„jsåº“ --\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;./libs/babel.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div id=\u0026#34;myContainer\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ³¨æ„ï¼Œè¿™ä¸€è¡Œçš„ type æ˜¯å†™ \u0026#34;text/babel\u0026#34;ï¼Œè€Œä¸æ˜¯ \u0026#34;text/javascript\u0026#34; --\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; //é¡µé¢ä¸­çš„çœŸå®å®¹å™¨å…ƒç´  var containDiv = document.getElementById(\u0026#34;myContainer\u0026#34;); //1ã€åˆ›å»ºè™šæ‹ŸDOMå¯¹è±¡ var vDom = \u0026lt;div\u0026gt;Hello, React!\u0026lt;/div\u0026gt;; // ä¸æ˜¯å­—ç¬¦ä¸², ä¸èƒ½åŠ å¼•å· //2ã€æ¸²æŸ“è™šæ‹ŸDOMå¯¹è±¡ï¼ˆå°†è™šæ‹ŸDOMå¯¹è±¡æ¸²æŸ“åˆ°é¡µé¢å…ƒç´ ä¸­ï¼‰ ReactDOM.render(vDom, containDiv); // å‚æ•°1ï¼šè™šæ‹ŸDOMå¯¹è±¡ï¼›å‚æ•°2ï¼šé¡µé¢ä¸­çš„å®¹å™¨ \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ä»£ç è¿è¡Œåï¼Œé¡µé¢ä¸Šçš„DOMç»“æ„å¦‚ä¸‹ï¼š\n1 2 3 \u0026lt;div id=\u0026#34;myContainer\u0026#34;\u0026gt; \u0026lt;div\u0026gt;Hello, React!\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ä»£ç è§£é‡Šï¼š\nrenderçš„ä¸­æ–‡å«ä¹‰æ˜¯â€œæ¸²æŸ“â€ã€‚render æ–¹æ³•çš„è¯­æ³•å¦‚ä¸‹ï¼š\n1 ReactDOM.render(è¦æ¸²æŸ“çš„è™šæ‹ŸDOMå¯¹è±¡, å®¹å™¨ containerï¼šè¦æ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„å“ªä¸ªä½ç½®); æ–¹å¼äºŒï¼šnpm install å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ npm install çš„æ–¹å¼æ¥å®‰è£… react ç›¸å…³çš„åŒ…ã€‚\né¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹2019-02-08-ReactDemoï¼Œä½œä¸ºé¡¹ç›®çš„æ ¹ç›®å½•ã€‚ç„¶ååœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œè¿›è¡Œé¡¹ç›®åˆå§‹åŒ–ï¼š\n1 npm init --yes ä¸Šæ–¹å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œä¼šç”Ÿæˆpackage.jsonæ–‡ä»¶ã€‚\nç„¶åç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå®‰è£… react.js å’Œ react-dom.js è¿™ä¸¤ä¸ªåŒ…ï¼š\n1 npm i react react-dom å®Œæ•´ä»£ç ä¸¾ä¾‹ï¼š\nindex.html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;zh-CN\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;React Demo\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- æ‰“åŒ…å·¥å…·è¾“å‡ºçš„å…¥å£è„šæœ¬ï¼ˆä¾‹å¦‚ webpack æ‰“åŒ…åˆ° dist/bundle.jsï¼‰ --\u0026gt; \u0026lt;script src=\u0026#34;./dist/bundle.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; main.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // JSæ‰“åŒ…å…¥å£æ–‡ä»¶ import React from \u0026#39;react\u0026#39; import ReactDOM from \u0026#39;react-dom\u0026#39; // åœ¨ react ä¸­ï¼Œå¦‚è¦è¦åˆ›å»º DOM å…ƒç´ ï¼Œåªèƒ½ä½¿ç”¨ React æä¾›çš„ JS API æ¥åˆ›å»ºï¼Œä¸èƒ½ã€ç›´æ¥ã€‘åƒ Vue ä¸­é‚£æ ·ï¼Œæ‰‹å†™ HTML å…ƒç´  // React.createElement() æ–¹æ³•ï¼Œç”¨äºåˆ›å»º è™šæ‹ŸDOM å¯¹è±¡ï¼Œå®ƒæ¥æ”¶ 3ä¸ªåŠä»¥ä¸Šçš„å‚æ•° // å‚æ•°1ï¼š æ˜¯ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°ï¼Œè¡¨ç¤ºè¦åˆ›å»ºçš„å…ƒç´ ç±»å‹ // å‚æ•°2ï¼š æ˜¯ä¸€ä¸ªå±æ€§å¯¹è±¡ï¼Œè¡¨ç¤º åˆ›å»ºçš„è¿™ä¸ªå…ƒç´ ä¸Šï¼Œæœ‰å“ªäº›å±æ€§ // å‚æ•°3ï¼š ä»ç¬¬ä¸‰ä¸ªå‚æ•°çš„ä½ç½®å¼€å§‹ï¼Œåé¢å¯ä»¥æ”¾å¥½å¤šçš„è™šæ‹ŸDOMå¯¹è±¡ï¼Œè¿™å†™å‚æ•°ï¼Œè¡¨ç¤ºå½“å‰å…ƒç´ çš„å­èŠ‚ç‚¹ // \u0026lt;div title=\u0026#34;this is a div\u0026#34; id=\u0026#34;mydiv\u0026#34;\u0026gt;è¿™æ˜¯ä¸€ä¸ªdiv\u0026lt;/div\u0026gt; var myDiv = React.createElement(\u0026#39;div\u0026#39;, { title: \u0026#39;this is a div\u0026#39;, id: \u0026#39;mydiv\u0026#39; }, \u0026#39;è¿™æ˜¯ä¸€ä¸ªdiv\u0026#39;); // ReactDOM.render(\u0026#39;è¦æ¸²æŸ“çš„è™šæ‹ŸDOMå…ƒç´ \u0026#39;, \u0026#39;è¦æ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„å“ªä¸ªä½ç½®\u0026#39;); ReactDOM.render(myDiv, document.getElementById(\u0026#39;app\u0026#39;)); ä¸Šæ–¹ä»£ç ä¸­ï¼ŒcreateElement()æ–¹æ³•ä»‹ç»å¦‚ä¸‹ï¼š\n1 React.createElement(éœ€è¦åˆ›å»ºçš„å…ƒç´ ç±»å‹, æœ‰å“ªäº›å±æ€§, å­èŠ‚ç‚¹) ","date":"2026-02-11T00:00:00Z","permalink":"https://impself.github.io/p/react-introduction/","title":"React 01-Reactä»‹ç»"}]